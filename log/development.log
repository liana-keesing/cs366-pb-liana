DEPRECATION WARNING: Using legacy connection handling is deprecated. Please set
`legacy_connection_handling` to `false` in your application.

The new connection handling does not support `connection_handlers`
getter and setter.

Read more about how to migrate at: https://guides.rubyonrails.org/active_record_multiple_databases.html#migrate-to-the-new-connection-handling
 (called from <main> at /home/liana/stanford/cs366/pb-mysql/config/environment.rb:5)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
DEPRECATION WARNING: Non-URL-safe CSRF tokens are deprecated. Use 6.1 defaults or above. (called from block (3 levels) in <class:Railtie> at /home/liana/.rvm/gems/ruby-3.2.1/gems/actionpack-7.0.4.3/lib/action_controller/railtie.rb:80)
Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 02:09:23 -0400
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (9.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
Completed 404 Not Found in 623ms (ActiveRecord: 33.3ms | Allocations: 65465)


  
ActiveRecord::RecordNotFound (Couldn't find Election with 'id'=2):
  
app/controllers/admin/elections_controller.rb:116:in `analytics'
Started GET "/" for ::1 at 2024-03-22 02:09:31 -0400
Processing by HomeController#index as HTML
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/', 'GET', NOW())[0m
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 1.9ms | Allocations: 730)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered layout layouts/application.html.erb (Duration: 6967.1ms | Allocations: 144679)
Completed 200 OK in 6973ms (Views: 6969.7ms | ActiveRecord: 2.4ms | Allocations: 145564)


Started GET "/admin/" for ::1 at 2024-03-22 02:09:43 -0400
Processing by Admin::HomeController#index as HTML
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (2.4ms)[0m  [1m[34mSELECT elections.*, COUNT(voters.id) AS voter_count FROM `elections` LEFT OUTER JOIN voters ON voters.election_id = elections.id AND voters.void = false GROUP BY `elections`.`id`[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/home/index.html.erb within layouts/application
  Rendered shared/_election_list.html.erb (Duration: 59.6ms | Allocations: 1591)
  Rendered shared/_admin_template.html.erb (Duration: 4.8ms | Allocations: 1037)
  Rendered admin/home/index.html.erb within layouts/application (Duration: 73.1ms | Allocations: 3338)
  Rendered layout layouts/application.html.erb (Duration: 89.8ms | Allocations: 6599)
Completed 200 OK in 164ms (Views: 94.9ms | ActiveRecord: 4.9ms | Allocations: 19820)


Started GET "/admin/users" for ::1 at 2024-03-22 02:09:49 -0400
Processing by Admin::UsersController#index as HTML
  [1m[35m (3.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/', 'http://localhost:3000/admin/users', 'GET', NOW())[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/users/index.html.erb within layouts/application
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users`[0m
  [1m[36mElectionUser Load (1.2ms)[0m  [1m[34mSELECT `election_users`.* FROM `election_users` WHERE `election_users`.`user_id` = 1[0m
  [1m[36mElectionUser Load (1.0ms)[0m  [1m[34mSELECT `election_users`.* FROM `election_users` WHERE `election_users`.`user_id` = 2[0m
  [1m[36mElection Load (1.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 1 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 73)
  Rendered admin/users/index.html.erb within layouts/application (Duration: 156.7ms | Allocations: 16667)
  Rendered layout layouts/application.html.erb (Duration: 173.5ms | Allocations: 19874)
Completed 200 OK in 191ms (Views: 167.5ms | ActiveRecord: 16.6ms | Allocations: 20965)


Started GET "/admin" for ::1 at 2024-03-22 02:09:52 -0400
Processing by Admin::HomeController#index as HTML
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/users', 'http://localhost:3000/admin', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT elections.*, COUNT(voters.id) AS voter_count FROM `elections` LEFT OUTER JOIN voters ON voters.election_id = elections.id AND voters.void = false GROUP BY `elections`.`id`[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/home/index.html.erb within layouts/application
  Rendered shared/_election_list.html.erb (Duration: 0.4ms | Allocations: 95)
  Rendered shared/_admin_template.html.erb (Duration: 0.2ms | Allocations: 58)
  Rendered admin/home/index.html.erb within layouts/application (Duration: 2.2ms | Allocations: 315)
  Rendered layout layouts/application.html.erb (Duration: 11.2ms | Allocations: 3451)
Completed 200 OK in 21ms (Views: 12.7ms | ActiveRecord: 3.6ms | Allocations: 4275)


Started GET "/admin/elections/1" for ::1 at 2024-03-22 02:10:28 -0400
Processing by Admin::ElectionsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin', 'http://localhost:3000/admin/elections/1', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 1 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/show.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 1 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 307)
  Rendered admin/elections/show.html.erb within layouts/application (Duration: 128.8ms | Allocations: 23540)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: show, request: #<ActionDispatch::Request:0x00007f9c122c1400>, params: {"controller"=>"admin/elections", "action"=>"show", "id"=>"1"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 144.9ms | Allocations: 26818)
Completed 200 OK in 171ms (Views: 145.0ms | ActiveRecord: 19.0ms | Allocations: 27867)


Started GET "/admin/elections/1/analytics" for ::1 at 2024-03-22 02:10:31 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/1', 'http://localhost:3000/admin/elections/1/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '1', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 06:10:31', '2024-03-22 06:10:31')[0m
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 1 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 1[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 1[0m
  [1m[36mCategory Load (1.4ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCategory::Translation Load (1.2ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 1[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 2[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 1[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 3[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 1[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 4[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 1 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 1[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 5[0m
  [1m[36mCategory Load (1.3ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mCategory::Translation Load (1.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 6[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 2[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 7[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 8[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 2 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 2[0m
  [1m[36mProject::Translation Load (1.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 9[0m
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 3 LIMIT 1[0m
  [1m[36mCategory::Translation Load (0.9ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 3[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 10[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 3 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 3[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 11[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 3 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 3[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 12[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 3 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 3[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 13[0m
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 4 LIMIT 1[0m
  [1m[36mCategory::Translation Load (1.1ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 4[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 14[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 4 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.1ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 4[0m
  [1m[36mProject::Translation Load (1.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 15[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 4 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 4[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 16[0m
  [1m[36mCACHE Category Load (0.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`id` = 4 LIMIT 1[0m
  [1m[36mCACHE Category::Translation Load (0.0ms)[0m  [1m[34mSELECT `category_translations`.* FROM `category_translations` WHERE `category_translations`.`category_id` = 4[0m
  [1m[36mProject Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 1 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '+00:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 1 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'approval' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mProject Load (5.3ms)[0m  [1m[34mSELECT projects.*, COUNT(voters.id) + COALESCE(projects.external_vote_count, 0) AS vote_count FROM `projects` LEFT OUTER JOIN vote_approvals ON vote_approvals.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_approvals.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 1 GROUP BY `projects`.`id` ORDER BY vote_count DESC[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 1[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 2[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 3[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 4[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 5[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 6[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 7[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 8[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 9[0m
  [1m[36mCACHE Project::Translation Load (0.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 10[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 11[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 12[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 13[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 14[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 15[0m
  [1m[36mCACHE Project::Translation Load (0.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 16[0m
  [1m[36mVoterRegistrationRecord Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 1 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  [1m[36mCategory Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 1 LIMIT 1[0m
  Rendered shared/analytics/_approval.html.erb (Duration: 10.0ms | Allocations: 2067)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 279)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 24.8ms | Allocations: 5535)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c13b8fdd8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"1"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 42.6ms | Allocations: 8732)
Completed 200 OK in 623ms (Views: 44.4ms | ActiveRecord: 97.9ms | Allocations: 75643)


Started GET "/admin" for ::1 at 2024-03-22 02:10:40 -0400
Processing by Admin::HomeController#index as HTML
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/1/analytics', 'http://localhost:3000/admin', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT elections.*, COUNT(voters.id) AS voter_count FROM `elections` LEFT OUTER JOIN voters ON voters.election_id = elections.id AND voters.void = false GROUP BY `elections`.`id`[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/home/index.html.erb within layouts/application
  Rendered shared/_election_list.html.erb (Duration: 0.3ms | Allocations: 95)
  Rendered shared/_admin_template.html.erb (Duration: 0.2ms | Allocations: 58)
  Rendered admin/home/index.html.erb within layouts/application (Duration: 1.9ms | Allocations: 315)
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | Allocations: 3450)
Completed 200 OK in 22ms (Views: 13.1ms | ActiveRecord: 4.4ms | Allocations: 4276)


Started GET "/admin/elections/new" for ::1 at 2024-03-22 02:10:42 -0400
Processing by Admin::ElectionsController#new as HTML
  [1m[35m (3.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin', 'http://localhost:3000/admin/elections/new', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/new.html.erb within layouts/application
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 61)
  Rendered admin/elections/new.html.erb within layouts/application (Duration: 117.4ms | Allocations: 2798)
  Rendered layout layouts/application.html.erb (Duration: 134.7ms | Allocations: 5937)
Completed 200 OK in 148ms (Views: 137.5ms | ActiveRecord: 4.4ms | Allocations: 6650)


Started POST "/admin/elections" for ::1 at 2024-03-22 02:10:49 -0400
Processing by Admin::ElectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"YZ9F1gbpNeDA8DuyEFJXVTneucL6Ne4m1r8tNFDnZEjA7UIB8W7dKShwI8sDVV81R+6hofNESw8OjIhMGIoK1w==", "election"=>{"name"=>"testing-mes", "slug"=>"testing-mes"}, "commit"=>"Save"}
  [1m[35m (4.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/new', 'http://localhost:3000/admin/elections', 'POST', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mElection Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mElection Create (0.8ms)[0m  [1m[32mINSERT INTO `elections` (`name`, `slug`, `config_yaml`, `created_at`, `updated_at`) VALUES ('testing-mes', 'testing-mes', '', '2024-03-22 06:10:49', '2024-03-22 06:10:49')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.7ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `created_at`, `updated_at`) VALUES (2, '1', 1000, '2024-03-22 06:10:49', '2024-03-22 06:10:49')[0m
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 17 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.9ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`) VALUES (17, 'en', '2024-03-22 06:10:49', '2024-03-22 06:10:49', 'Example Project 1', 'Example description 1.')[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.7ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `created_at`, `updated_at`) VALUES (2, '2', 2000, '2024-03-22 06:10:49', '2024-03-22 06:10:49')[0m
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 18 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.6ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`) VALUES (18, 'en', '2024-03-22 06:10:49', '2024-03-22 06:10:49', 'Example Project 2', 'Example description 2.')[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.7ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `created_at`, `updated_at`) VALUES (2, '3', 3000, '2024-03-22 06:10:49', '2024-03-22 06:10:49')[0m
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 19 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.7ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`) VALUES (19, 'en', '2024-03-22 06:10:49', '2024-03-22 06:10:49', 'Example Project 3', 'Example description 3.')[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.7ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `created_at`, `updated_at`) VALUES (2, '4', 4000, '2024-03-22 06:10:49', '2024-03-22 06:10:49')[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 20 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.7ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`) VALUES (20, 'en', '2024-03-22 06:10:49', '2024-03-22 06:10:49', 'Example Project 4', 'Example description 4.')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.7ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `created_at`, `updated_at`) VALUES (2, '5', 5000, '2024-03-22 06:10:49', '2024-03-22 06:10:49')[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 21 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.6ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`) VALUES (21, 'en', '2024-03-22 06:10:49', '2024-03-22 06:10:49', 'Example Project 5', 'Example description 5.')[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/2
Completed 302 Found in 146ms (ActiveRecord: 35.8ms | Allocations: 22422)


Started GET "/admin/elections/2" for ::1 at 2024-03-22 02:10:49 -0400
Processing by Admin::ElectionsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/new', 'http://localhost:3000/admin/elections/2', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/show.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 280)
  Rendered admin/elections/show.html.erb within layouts/application (Duration: 10.3ms | Allocations: 1538)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: show, request: #<ActionDispatch::Request:0x00007f9c10c0d998>, params: {"controller"=>"admin/elections", "action"=>"show", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 29.4ms | Allocations: 4739)
Completed 200 OK in 43ms (Views: 31.2ms | ActiveRecord: 5.6ms | Allocations: 5463)


Started GET "/testing-mes" for ::1 at 2024-03-22 02:10:53 -0400
Processing by VoteController#index as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (3.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2', 'http://localhost:3000/testing-mes', 'GET', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 4.6ms | Allocations: 1429)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c10c419a0>, params: {"controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | Allocations: 4913)
Completed 200 OK in 33ms (Views: 21.8ms | ActiveRecord: 4.7ms | Allocations: 6081)


Started GET "/admin/elections/2/edit" for ::1 at 2024-03-22 02:11:05 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
Started GET "/admin/elections/2/edit" for ::1 at 2024-03-22 02:11:08 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 2660.0ms | Allocations: 331533)
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 2666.2ms | Allocations: 332519)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c122782a0>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 2721.2ms | Allocations: 337272)
Completed 200 OK in 2879ms (Views: 2722.5ms | ActiveRecord: 3.6ms | Allocations: 376400)


  Rendered shared/_election_form.html.erb (Duration: 355.1ms | Allocations: 230104)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 358.6ms | Allocations: 230529)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c10c4e560>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 364.3ms | Allocations: 233408)
Completed 200 OK in 445ms (Views: 365.3ms | ActiveRecord: 15.2ms | Allocations: 272497)


Started PATCH "/admin/elections/2" for ::1 at 2024-03-22 02:11:55 -0400
Processing by Admin::ElectionsController#update as JSON
  Parameters: {"utf8"=>"âœ“", "election"=>{"config_yaml"=>"workflow: [knapsack, thanks]\r\navailable_locales: [en]\r\ndefault_locale: en\r\nshow_public_results: false\r\nallow_local_voting: false\r\nallow_remote_voting: true\r\nremote_voting_free_verification: true\r\nfree_verification_use_captcha: false\r\nknapsack:\r\n  has_budget_limit: true\r\n  has_n_project_limit: false\r\n  total_tokens: 15\r\n  max_n_projects: 4\r\n  shuffle_projects: true\r\n", "name"=>"testing-mes", "slug"=>"testing-mes", "budget"=>"6000", "time_zone"=>"International Date Line West", "allow_admins_to_update_election"=>"1", "allow_admins_to_see_voter_data"=>"1", "allow_admins_to_see_exact_results"=>"1", "real_election"=>"1", "remarks"=>""}, "mce_0"=>"<p><img style=\"margin-left: auto; margin-right: auto; display: block;\" src=\"../../../img/sample-city-logo.png\" /></p>\r\n<p class=\"lead\">Welcome to the Participatory Budgeting sample digital ballot, courtesy of the Stanford Crowdsourced Democracy Team.</p>\r\n<p class=\"lead\">On this website, you can familiarize yourself with this year&rsquo;s projects and the digital ballot. This website is only informational, and you <strong>cannot</strong> cast your actual vote here.</p>\r\n<p class=\"lead\">When you cast your <u>actual ballot</u>, you will be deciding how you want to allocate $XXX million of the city's capital improvement budget. In order to vote, you need to come to one of the many voting sites that will be located throughout the city. The voting will be held from (Date XXX) to (Date YYY). See all times and locations below.</p>", "mce_2"=>"<h3>Voting Locations</h3>\r\n<p><strong>Saturday, September 27</strong> &nbsp; (12:00 noon - 4:00 p.m.)<br />Somewhere<br /><br /><strong>Tuesday, September 30</strong> &nbsp; (6:00 p.m. - 9:00 p.m.)<br />Somewhere<br /><br /></p>\r\n<p>For more information, please visit <a href=\"http://www.example.com/\">http://www.example.com/</a></p>", "mce_14"=>"<p style=\"font-size: 20px;\">You will now be asked to participate in an activity that will <u>not</u> affect your vote, but is part of a Stanford University research project meant to help us improve the participatory budgeting process.</p>\r\n<ul style=\"font-size: 20px;\">\r\n<li>Participating in this activity is optional. You can exit at any time.</li>\r\n<li>The expected time for this activity is 2-3 minutes.</li>\r\n</ul>\r\n<p style=\"font-size: 14px;\">This study poses no risk. No payment will be made to you for participation, and we cannot guarantee any benefits to you. You have the right to refuse to answer particular questions. Please contact Professor Ashish Goel at goel_admins@lists.stanford.edu if you have any questions, suggestions, or concerns. You may also contact the Stanford Institutional Review Board at 650-723-2480.</p>", "mce_15"=>"<h3>Instructions</h3>\r\n<ol>\r\n<li>Select the projects you would like to support. The total cost cannot exceed <strong>%{budget}</strong>.</li>\r\n<li>You can see the total amount you have allocated so far in the bar above. You can remove any previously selected projects by clicking on the bar or directly by clicking on the chosen project.</li>\r\n<li>Click the <strong>\"Submit My Vote\"</strong> button when you're ready to submit.</li>\r\n</ol>", "commit"=>"Save", "id"=>"2"}
  [1m[35m (9.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2', 'POST', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mElection Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `elections` WHERE `elections`.`slug` = 'testing-mes' AND `elections`.`id` != 2 LIMIT 1[0m
  [1m[36mElection Update (1.1ms)[0m  [1m[33mUPDATE `elections` SET `elections`.`budget` = 6000, `elections`.`time_zone` = 'International Date Line West', `elections`.`config_yaml` = 'workflow: [knapsack, thanks]\r\navailable_locales: [en]\r\ndefault_locale: en\r\nshow_public_results: false\r\nallow_local_voting: false\r\nallow_remote_voting: true\r\nremote_voting_free_verification: true\r\nfree_verification_use_captcha: false\r\nknapsack:\r\n  has_budget_limit: true\r\n  has_n_project_limit: false\r\n  total_tokens: 15\r\n  max_n_projects: 4\r\n  shuffle_projects: true\r\n', `elections`.`updated_at` = '2024-03-22 06:11:55', `elections`.`remarks` = '' WHERE `elections`.`id` = 2[0m
  [1m[36mTRANSACTION (8.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 35ms (Views: 0.4ms | ActiveRecord: 20.8ms | Allocations: 1855)


Started GET "/admin/elections/2/edit" for ::1 at 2024-03-22 02:12:06 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (12.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 80.2ms | Allocations: 115630)
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 87.0ms | Allocations: 116055)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c122ac0a0>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 93.4ms | Allocations: 118932)
Completed 200 OK in 189ms (Views: 94.8ms | ActiveRecord: 13.1ms | Allocations: 157850)


Started GET "/testing-mes/" for ::1 at 2024-03-22 02:12:12 -0400
Processing by VoteController#index as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/testing-mes', 'GET', NOW())[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 0.9ms | Allocations: 295)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c10c64a68>, params: {"controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 9.1ms | Allocations: 3701)
Completed 200 OK in 17ms (Views: 9.7ms | ActiveRecord: 3.2ms | Allocations: 5353)


Started GET "/testing-mes/free_signup" for ::1 at 2024-03-22 02:12:14 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (3.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/', 'http://localhost:3000/testing-mes/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 1.6ms | Allocations: 696)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9c12263530>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 11.8ms | Allocations: 4011)
Completed 200 OK in 23ms (Views: 12.6ms | ActiveRecord: 5.4ms | Allocations: 4824)


Started POST "/testing-mes/post_free_signup" for ::1 at 2024-03-22 02:12:16 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"ww2FMchD1QYwJN2LeMxmh28EWhX94dE6ffq8qdotB2Jif4LmP8Q9z9ikxfJry27nETRCdvSQdBOlyRnRkkBp/Q==", "election_slug"=>"testing-mes"}
  [1m[35m (2.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-22 06:11:16.522196') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '8bb5b453f040a18c75fd99bd9e9269b8' AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (0.7ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (2, 'free', '8bb5b453f040a18c75fd99bd9e9269b8', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 06:12:16', '2024-03-22 06:12:16')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '8bb5b453f040a18c75fd99bd9e9269b8' AND `voters`.`id` != 1 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.4ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 1[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/knapsack
Completed 302 Found in 54ms (ActiveRecord: 18.3ms | Allocations: 8360)


Started GET "/testing-mes/knapsack" for ::1 at 2024-03-22 02:12:16 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (3.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 1[0m
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '8bb5b453f040a18c75fd99bd9e9269b8' AND `voters`.`id` != 1 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087936}}' WHERE `voters`.`id` = 1[0m
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 2.3ms | Allocations: 382)
  Rendered shared/_sidebar.html.erb (Duration: 3.5ms | Allocations: 902)
  Rendered shared/_project.html.erb (Duration: 8.7ms | Allocations: 2477)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.3ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.6ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 307)
  Rendered shared/_project_list.html.erb (Duration: 25.8ms | Allocations: 5531)
  Rendered shared/themes/_theme_2.html (Duration: 1.1ms | Allocations: 74)
  Rendered shared/_approval_js.html.erb (Duration: 15.1ms | Allocations: 5034)
  Rendered shared/_timer.html.erb (Duration: 2.2ms | Allocations: 426)
  Rendered vote/approval.html.erb within layouts/application (Duration: 74.0ms | Allocations: 16345)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9c139f1058>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 95.5ms | Allocations: 19667)
Completed 200 OK in 179ms (Views: 98.4ms | ActiveRecord: 27.4ms | Allocations: 26896)


Started POST "/testing-mes/submit_knapsack" for ::1 at 2024-03-22 02:12:24 -0400
Processing by VoteController#submit_knapsack as HTML
  Parameters: {"project"=>{"17"=>"1000", "18"=>"2000", "19"=>"3000", "20"=>"0", "21"=>"0"}, "project_rank"=>{"17"=>"0", "18"=>"0", "19"=>"0", "20"=>"0", "21"=>"0"}, "authenticity_token"=>"cL4qaYBf00CPagMMJEBuvdPtn8Vf0AfmOAqGGhBciifRzC2+d9g7iWfqG3U3R2bdrd2Hplahos/gOSNiWDHkuA==", "election_slug"=>"testing-mes"}
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/submit_knapsack', 'POST', NOW())[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mVoteKnapsack Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM `vote_knapsacks` WHERE `vote_knapsacks`.`voter_id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Create (1.0ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (1, 17, 1000, '2024-03-22 06:12:25', '2024-03-22 06:12:25')[0m
  [1m[36mVoteKnapsack Create (0.8ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (1, 18, 2000, '2024-03-22 06:12:25', '2024-03-22 06:12:25')[0m
  [1m[36mVoteKnapsack Create (0.9ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (1, 19, 3000, '2024-03-22 06:12:25', '2024-03-22 06:12:25')[0m
  [1m[36mTRANSACTION (5.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/thanks
Completed 302 Found in 104ms (ActiveRecord: 27.0ms | Allocations: 13046)


Started GET "/testing-mes/thanks" for ::1 at 2024-03-22 02:12:25 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (15.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-22 06:12:25' WHERE `voters`.`id` = 1[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '8bb5b453f040a18c75fd99bd9e9269b8' AND `voters`.`id` != 1 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087936,\"thanks\":1711087945}}' WHERE `voters`.`id` = 1[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.6ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 4.2ms | Allocations: 600)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c10078538>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.7ms | Allocations: 3925)
Completed 200 OK in 82ms (Views: 26.2ms | ActiveRecord: 30.2ms | Allocations: 6104)


Started GET "/testing-mes/done" for ::1 at 2024-03-22 02:12:27 -0400
Processing by VoteController#done as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (3.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes/done', 'GET', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'done', `voters`.`updated_at` = '2024-03-22 06:12:27' WHERE `voters`.`id` = 1[0m
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '8bb5b453f040a18c75fd99bd9e9269b8' AND `voters`.`id` != 1 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087936,\"thanks\":1711087945,\"done\":1711087947}}' WHERE `voters`.`id` = 1[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes?locale=en
Completed 302 Found in 47ms (ActiveRecord: 18.5ms | Allocations: 2032)


Started GET "/testing-mes?locale=en" for ::1 at 2024-03-22 02:12:27 -0400
Processing by VoteController#index as HTML
  Parameters: {"locale"=>"en", "election_slug"=>"testing-mes"}
  [1m[35m (13.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes?locale=en', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 1.8ms | Allocations: 288)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameters: :locale, :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c122cb2c0>, params: {"locale"=>"en", "controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.0ms | Allocations: 3706)
Completed 200 OK in 50ms (Views: 26.4ms | ActiveRecord: 16.2ms | Allocations: 4466)


Started GET "/testing-mes/knapsack" for ::1 at 2024-03-22 02:12:28 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (11.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes?locale=en', 'http://localhost:3000/testing-mes/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mCACHE Voter Load (0.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mCACHE Voter Load (0.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCategory Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  [1m[36mCACHE Voter Load (0.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendered shared/_budgetbar.html.erb (Duration: 0.6ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 0.9ms | Allocations: 348)
  [1m[36mCACHE Voter Load (0.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendered shared/_project.html.erb (Duration: 1.3ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.0ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 307)
  Rendered shared/_project_list.html.erb (Duration: 13.6ms | Allocations: 2225)
  [1m[36mCACHE Voter Load (0.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mCACHE Voter Load (0.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 3.1ms | Allocations: 1444)
  [1m[36mCACHE Voter Load (0.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendered shared/_timer.html.erb (Duration: 1.9ms | Allocations: 141)
  Rendered vote/approval.html.erb within layouts/application (Duration: 36.7ms | Allocations: 6021)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9c100e80e0>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 55.0ms | Allocations: 9348)
Completed 200 OK in 111ms (Views: 56.3ms | ActiveRecord: 21.0ms | Allocations: 13847)


Started GET "/testing-mes/thanks" for ::1 at 2024-03-22 02:12:30 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (12.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mCACHE Voter Load (0.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mCACHE Voter Load (0.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  [1m[36mCACHE Voter Load (0.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mCACHE Voter Load (0.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendered shared/_timer.html.erb (Duration: 1.8ms | Allocations: 142)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 5.5ms | Allocations: 471)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c10091e20>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 27.2ms | Allocations: 3794)
Completed 200 OK in 53ms (Views: 28.7ms | ActiveRecord: 15.0ms | Allocations: 4829)


Started GET "/testing-mes" for ::1 at 2024-03-22 02:12:31 -0400
Processing by VoteController#index as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (14.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 2.2ms | Allocations: 288)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c10171e08>, params: {"controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.0ms | Allocations: 3695)
Completed 200 OK in 50ms (Views: 25.5ms | ActiveRecord: 17.3ms | Allocations: 4461)


Started GET "/testing-mes/free_signup" for ::1 at 2024-03-22 02:12:34 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes', 'http://localhost:3000/testing-mes/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.3ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 0.6ms | Allocations: 203)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9c10c47da0>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 11.3ms | Allocations: 3518)
Completed 200 OK in 19ms (Views: 11.9ms | ActiveRecord: 3.4ms | Allocations: 4286)


Started POST "/testing-mes/post_free_signup" for ::1 at 2024-03-22 02:12:35 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"1dYWGNPGm2K7lFcecp99u41oB+fJwlMbx1MsYF5agMN0pBHPJEFzq1MUT2dhmHXb81gfhMCz9jIfYIkYFjfuXA==", "election_slug"=>"testing-mes"}
  [1m[35m (14.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-22 06:11:35.526654') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '60ea5e41b8e70a6edd71e0ff29a44c8d' AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (1.1ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (2, 'free', '60ea5e41b8e70a6edd71e0ff29a44c8d', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 06:12:35', '2024-03-22 06:12:35')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '60ea5e41b8e70a6edd71e0ff29a44c8d' AND `voters`.`id` != 2 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.1ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/knapsack
Completed 302 Found in 56ms (ActiveRecord: 28.8ms | Allocations: 2253)


Started GET "/testing-mes/knapsack" for ::1 at 2024-03-22 02:12:35 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (14.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 2 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.4ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '60ea5e41b8e70a6edd71e0ff29a44c8d' AND `voters`.`id` != 2 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087955}}' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.6ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 1.1ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.7ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.3ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 307)
  Rendered shared/_project_list.html.erb (Duration: 12.6ms | Allocations: 2071)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 3.6ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 1.2ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 30.0ms | Allocations: 5414)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9c122dddf8>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 50.6ms | Allocations: 8736)
Completed 200 OK in 140ms (Views: 52.3ms | ActiveRecord: 37.8ms | Allocations: 14220)


Started POST "/testing-mes/submit_knapsack" for ::1 at 2024-03-22 02:12:42 -0400
Processing by VoteController#submit_knapsack as HTML
  Parameters: {"project"=>{"17"=>"1000", "18"=>"0", "19"=>"0", "20"=>"4000", "21"=>"0"}, "project_rank"=>{"17"=>"0", "18"=>"0", "19"=>"0", "20"=>"0", "21"=>"0"}, "authenticity_token"=>"cDvVekifJHPcalKI2iV8QmOusZBRGrV/d9TwLZeD7V/RSdKtvxjMujTqSvHJInQiHZ6p81hrEFav51VV3+6DwA==", "election_slug"=>"testing-mes"}
  [1m[35m (13.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/submit_knapsack', 'POST', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 2 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mVoteKnapsack Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `vote_knapsacks` WHERE `vote_knapsacks`.`voter_id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Create (1.0ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (2, 17, 1000, '2024-03-22 06:12:42', '2024-03-22 06:12:42')[0m
  [1m[36mVoteKnapsack Create (1.0ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (2, 20, 4000, '2024-03-22 06:12:42', '2024-03-22 06:12:42')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/thanks
Completed 302 Found in 47ms (ActiveRecord: 23.1ms | Allocations: 2335)


Started GET "/testing-mes/thanks" for ::1 at 2024-03-22 02:12:42 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (14.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 2 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.5ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-22 06:12:42' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '60ea5e41b8e70a6edd71e0ff29a44c8d' AND `voters`.`id` != 2 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087955,\"thanks\":1711087962}}' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.6ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 2.7ms | Allocations: 315)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c144d6ea0>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 27.5ms | Allocations: 3638)
Completed 200 OK in 86ms (Views: 29.3ms | ActiveRecord: 29.9ms | Allocations: 5734)


Started GET "/testing-mes/done" for ::1 at 2024-03-22 02:12:43 -0400
Processing by VoteController#done as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (12.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes/done', 'GET', NOW())[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 2 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'done', `voters`.`updated_at` = '2024-03-22 06:12:43' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '60ea5e41b8e70a6edd71e0ff29a44c8d' AND `voters`.`id` != 2 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.9ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087955,\"thanks\":1711087962,\"done\":1711087963}}' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes?locale=en
Completed 302 Found in 42ms (ActiveRecord: 23.4ms | Allocations: 2031)


Started GET "/testing-mes?locale=en" for ::1 at 2024-03-22 02:12:44 -0400
Processing by VoteController#index as HTML
  Parameters: {"locale"=>"en", "election_slug"=>"testing-mes"}
  [1m[35m (14.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes?locale=en', 'GET', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 2.4ms | Allocations: 288)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameters: :locale, :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c13bfb1a0>, params: {"locale"=>"en", "controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.1ms | Allocations: 3710)
Completed 200 OK in 53ms (Views: 27.7ms | ActiveRecord: 17.3ms | Allocations: 4476)


Started GET "/testing-mes/free_signup" for ::1 at 2024-03-22 02:12:45 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (14.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes?locale=en', 'http://localhost:3000/testing-mes/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 0.9ms | Allocations: 203)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9c10c4d480>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 21.4ms | Allocations: 3519)
Completed 200 OK in 44ms (Views: 22.7ms | ActiveRecord: 16.4ms | Allocations: 4272)


Started POST "/testing-mes/post_free_signup" for ::1 at 2024-03-22 02:12:48 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"IJ5pvxKb7KNxAAV7bWGnsdVoxV03z1/y2YnWEi5ibSWB7G5o5RwEapmAHQJ+Zq/Rq1jdPj6++tsBunNqZg8Dug==", "election_slug"=>"testing-mes"}
  [1m[35m (5.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-22 06:11:48.425929') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'ef0ad488e13e89ffd346841ae344712a' AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (0.5ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (2, 'free', 'ef0ad488e13e89ffd346841ae344712a', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 06:12:48', '2024-03-22 06:12:48')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'ef0ad488e13e89ffd346841ae344712a' AND `voters`.`id` != 3 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/knapsack
Completed 302 Found in 31ms (ActiveRecord: 14.7ms | Allocations: 2253)


Started GET "/testing-mes/knapsack" for ::1 at 2024-03-22 02:12:48 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 3 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'ef0ad488e13e89ffd346841ae344712a' AND `voters`.`id` != 3 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087968}}' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.4ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 0.9ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 0.5ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.5ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.5ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.6ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.5ms | Allocations: 307)
  Rendered shared/_project_list.html.erb (Duration: 6.1ms | Allocations: 2071)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 2.2ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 0.3ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 16.0ms | Allocations: 5414)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9c10082c68>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.4ms | Allocations: 8741)
Completed 200 OK in 67ms (Views: 27.1ms | ActiveRecord: 14.5ms | Allocations: 14236)


Started POST "/testing-mes/submit_knapsack" for ::1 at 2024-03-22 02:13:03 -0400
Processing by VoteController#submit_knapsack as HTML
  Parameters: {"project"=>{"17"=>"1000", "18"=>"0", "19"=>"0", "20"=>"4000", "21"=>"0"}, "project_rank"=>{"17"=>"0", "18"=>"0", "19"=>"0", "20"=>"0", "21"=>"0"}, "authenticity_token"=>"365AHgsqDk2ZU6hR5AxR3vQCdCYu+FGOyp2lQl8sS8x+3EfJ/K3mhHHTsCj3C1m+ijJsRSeJ9KcSrgA6F0ElUw==", "election_slug"=>"testing-mes"}
  [1m[35m (14.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/submit_knapsack', 'POST', NOW())[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 3 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mVoteKnapsack Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `vote_knapsacks` WHERE `vote_knapsacks`.`voter_id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Create (0.8ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (3, 17, 1000, '2024-03-22 06:13:03', '2024-03-22 06:13:03')[0m
  [1m[36mVoteKnapsack Create (0.5ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (3, 20, 4000, '2024-03-22 06:13:03', '2024-03-22 06:13:03')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/thanks
Completed 302 Found in 36ms (ActiveRecord: 20.9ms | Allocations: 2322)


Started GET "/testing-mes/thanks" for ::1 at 2024-03-22 02:13:03 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (15.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 3 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-22 06:13:03' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'ef0ad488e13e89ffd346841ae344712a' AND `voters`.`id` != 3 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.4ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087968,\"thanks\":1711087983}}' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.6ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 2.8ms | Allocations: 315)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c10884ce0>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.3ms | Allocations: 3638)
Completed 200 OK in 83ms (Views: 25.9ms | ActiveRecord: 30.8ms | Allocations: 5728)


Started GET "/testing-mes/done" for ::1 at 2024-03-22 02:13:04 -0400
Processing by VoteController#done as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (12.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes/done', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 3 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'done', `voters`.`updated_at` = '2024-03-22 06:13:04' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (6.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'ef0ad488e13e89ffd346841ae344712a' AND `voters`.`id` != 3 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.1ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087968,\"thanks\":1711087983,\"done\":1711087984}}' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes?locale=en
Completed 302 Found in 58ms (ActiveRecord: 30.5ms | Allocations: 2025)


Started GET "/testing-mes?locale=en" for ::1 at 2024-03-22 02:13:04 -0400
Processing by VoteController#index as HTML
  Parameters: {"locale"=>"en", "election_slug"=>"testing-mes"}
  [1m[35m (14.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes?locale=en', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 1.8ms | Allocations: 288)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameters: :locale, :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c12277a80>, params: {"locale"=>"en", "controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.1ms | Allocations: 3701)
Completed 200 OK in 49ms (Views: 24.6ms | ActiveRecord: 17.3ms | Allocations: 4476)


Started GET "/testing-mes/free_signup" for ::1 at 2024-03-22 02:13:06 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (15.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes?locale=en', 'http://localhost:3000/testing-mes/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (1.2ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 1.4ms | Allocations: 203)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9c12302590>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 22.7ms | Allocations: 3518)
Completed 200 OK in 51ms (Views: 24.6ms | ActiveRecord: 18.8ms | Allocations: 4286)


Started POST "/testing-mes/post_free_signup" for ::1 at 2024-03-22 02:13:08 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"s3evZNhgeoipsvOQrdnuxliaKpxzF+Mkls78n3EDyIYSBaizL+eSQUEy6+m+3uamJqoy/3pmRg1O/VnnOW6mGQ==", "election_slug"=>"testing-mes"}
  [1m[35m (3.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-22 06:12:08.624484') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '89b2c746592eb9e60c0430dac83a0279' AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (0.7ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (2, 'free', '89b2c746592eb9e60c0430dac83a0279', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 06:13:08', '2024-03-22 06:13:08')[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '89b2c746592eb9e60c0430dac83a0279' AND `voters`.`id` != 4 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.7ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/knapsack
Completed 302 Found in 34ms (ActiveRecord: 13.4ms | Allocations: 2253)


Started GET "/testing-mes/knapsack" for ::1 at 2024-03-22 02:13:08 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 4 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.9ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '89b2c746592eb9e60c0430dac83a0279' AND `voters`.`id` != 4 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.9ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087988}}' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCategory Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.5ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 0.6ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 0.8ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.8ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.8ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.8ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.7ms | Allocations: 307)
  Rendered shared/_project_list.html.erb (Duration: 9.1ms | Allocations: 2071)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 2.4ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 0.6ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 20.9ms | Allocations: 5414)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9c14533858>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 34.6ms | Allocations: 8736)
Completed 200 OK in 86ms (Views: 35.6ms | ActiveRecord: 17.6ms | Allocations: 14209)


Started POST "/testing-mes/submit_knapsack" for ::1 at 2024-03-22 02:13:16 -0400
Processing by VoteController#submit_knapsack as HTML
  Parameters: {"project"=>{"17"=>"1000", "18"=>"2000", "19"=>"3000", "20"=>"0", "21"=>"0"}, "project_rank"=>{"17"=>"0", "18"=>"0", "19"=>"0", "20"=>"0", "21"=>"0"}, "authenticity_token"=>"u4+VPDmYtrxWjnXyIV1CYjCtVQbkZhQi+tphrNdz9mUa/ZLrzh9edb4ObYsyWkoCTp1NZe0XsQsi6cTUnx6Y+g==", "election_slug"=>"testing-mes"}
  [1m[35m (13.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/submit_knapsack', 'POST', NOW())[0m
  [1m[36mElection Load (1.2ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 4 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mVoteKnapsack Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `vote_knapsacks` WHERE `vote_knapsacks`.`voter_id` = 4 LIMIT 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Create (0.9ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (4, 17, 1000, '2024-03-22 06:13:16', '2024-03-22 06:13:16')[0m
  [1m[36mVoteKnapsack Create (0.9ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (4, 18, 2000, '2024-03-22 06:13:16', '2024-03-22 06:13:16')[0m
  [1m[36mVoteKnapsack Create (0.9ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (4, 19, 3000, '2024-03-22 06:13:16', '2024-03-22 06:13:16')[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/thanks
Completed 302 Found in 58ms (ActiveRecord: 25.4ms | Allocations: 2651)


Started GET "/testing-mes/thanks" for ::1 at 2024-03-22 02:13:16 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (4.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 4 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-22 06:13:16' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '89b2c746592eb9e60c0430dac83a0279' AND `voters`.`id` != 4 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087988,\"thanks\":1711087997}}', `voters`.`updated_at` = '2024-03-22 06:13:17' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.6ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 2.8ms | Allocations: 315)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c122a6ce0>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.8ms | Allocations: 3646)
Completed 200 OK in 72ms (Views: 26.6ms | ActiveRecord: 19.8ms | Allocations: 5769)


Started GET "/testing-mes/done" for ::1 at 2024-03-22 02:13:18 -0400
Processing by VoteController#done as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (14.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes/done', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 4 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'done', `voters`.`updated_at` = '2024-03-22 06:13:18' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '89b2c746592eb9e60c0430dac83a0279' AND `voters`.`id` != 4 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711087988,\"thanks\":1711087997,\"done\":1711087998}}' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes?locale=en
Completed 302 Found in 58ms (ActiveRecord: 28.6ms | Allocations: 2022)


Started GET "/testing-mes?locale=en" for ::1 at 2024-03-22 02:13:18 -0400
Processing by VoteController#index as HTML
  Parameters: {"locale"=>"en", "election_slug"=>"testing-mes"}
  [1m[35m (4.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes?locale=en', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 2.2ms | Allocations: 288)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameters: :locale, :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c10084d88>, params: {"locale"=>"en", "controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.0ms | Allocations: 3701)
Completed 200 OK in 40ms (Views: 24.5ms | ActiveRecord: 7.3ms | Allocations: 4467)


Started GET "/testing-mes/free_signup" for ::1 at 2024-03-22 02:13:19 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (14.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes?locale=en', 'http://localhost:3000/testing-mes/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 1.7ms | Allocations: 203)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9c100e3400>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 22.0ms | Allocations: 3518)
Completed 200 OK in 48ms (Views: 24.0ms | ActiveRecord: 17.4ms | Allocations: 4295)


Started POST "/testing-mes/post_free_signup" for ::1 at 2024-03-22 02:13:22 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"GEGinlxKRBqx5mPXr0TFManV8Phs/MonMtaz4xcBsea5M6VJq82s01lme668Q81R1+Xom2WNbw7q5RabX2zfeQ==", "election_slug"=>"testing-mes"}
  [1m[35m (5.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-22 06:12:22.400965') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'e5750d47ee6e554274213e5b343758db' AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (0.8ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (2, 'free', 'e5750d47ee6e554274213e5b343758db', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 06:13:22', '2024-03-22 06:13:22')[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'e5750d47ee6e554274213e5b343758db' AND `voters`.`id` != 5 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.1ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 5[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/knapsack
Completed 302 Found in 39ms (ActiveRecord: 17.2ms | Allocations: 2265)


Started GET "/testing-mes/knapsack" for ::1 at 2024-03-22 02:13:22 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (4.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 5 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 5[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'e5750d47ee6e554274213e5b343758db' AND `voters`.`id` != 5 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.4ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711088002}}' WHERE `voters`.`id` = 5[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.6ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 1.0ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 307)
  Rendered shared/_project_list.html.erb (Duration: 12.8ms | Allocations: 2071)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 3.7ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 0.7ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 29.5ms | Allocations: 5414)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9c10c4faa0>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 49.2ms | Allocations: 8737)
Completed 200 OK in 125ms (Views: 50.7ms | ActiveRecord: 25.5ms | Allocations: 14211)


Started POST "/testing-mes/submit_knapsack" for ::1 at 2024-03-22 02:13:31 -0400
Processing by VoteController#submit_knapsack as HTML
  Parameters: {"project"=>{"17"=>"1000", "18"=>"0", "19"=>"0", "20"=>"0", "21"=>"5000"}, "project_rank"=>{"17"=>"0", "18"=>"0", "19"=>"0", "20"=>"0", "21"=>"0"}, "authenticity_token"=>"fLKpYYSUXnNBZUE9wOUZLwK89k5WmpV/Sh6aYUqzHSndwK62cxO2uqnlWUTT4hFPfIzuLV/rMFaSLT8ZAt5ztg==", "election_slug"=>"testing-mes"}
  [1m[35m (15.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/submit_knapsack', 'POST', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 5 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mVoteKnapsack Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `vote_knapsacks` WHERE `vote_knapsacks`.`voter_id` = 5 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Create (0.9ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (5, 17, 1000, '2024-03-22 06:13:31', '2024-03-22 06:13:31')[0m
  [1m[36mVoteKnapsack Create (0.8ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (5, 21, 5000, '2024-03-22 06:13:31', '2024-03-22 06:13:31')[0m
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/thanks
Completed 302 Found in 54ms (ActiveRecord: 25.7ms | Allocations: 2307)


Started GET "/testing-mes/thanks" for ::1 at 2024-03-22 02:13:31 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (3.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 5 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-22 06:13:31' WHERE `voters`.`id` = 5[0m
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'e5750d47ee6e554274213e5b343758db' AND `voters`.`id` != 5 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711088002,\"thanks\":1711088011}}' WHERE `voters`.`id` = 5[0m
  [1m[36mTRANSACTION (5.2ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.6ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 2.5ms | Allocations: 315)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c1230df30>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | Allocations: 3638)
Completed 200 OK in 71ms (Views: 24.8ms | ActiveRecord: 21.5ms | Allocations: 5738)


Started GET "/testing-mes/done" for ::1 at 2024-03-22 02:13:34 -0400
Processing by VoteController#done as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes/done', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 5 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.9ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'done', `voters`.`updated_at` = '2024-03-22 06:13:34' WHERE `voters`.`id` = 5[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'e5750d47ee6e554274213e5b343758db' AND `voters`.`id` != 5 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.0ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711088002,\"thanks\":1711088011,\"done\":1711088014}}' WHERE `voters`.`id` = 5[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes?locale=en
Completed 302 Found in 44ms (ActiveRecord: 24.4ms | Allocations: 2034)


Started GET "/testing-mes?locale=en" for ::1 at 2024-03-22 02:13:34 -0400
Processing by VoteController#index as HTML
  Parameters: {"locale"=>"en", "election_slug"=>"testing-mes"}
  [1m[35m (3.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes?locale=en', 'GET', NOW())[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 1.5ms | Allocations: 288)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameters: :locale, :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c146db368>, params: {"locale"=>"en", "controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | Allocations: 3701)
Completed 200 OK in 29ms (Views: 18.3ms | ActiveRecord: 5.4ms | Allocations: 4464)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 02:13:37 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 06:13:37', '2024-03-22 06:13:37')[0m
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 4.0ms | Allocations: 1246)
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 13.4ms | Allocations: 2588)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122680d0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 33.8ms | Allocations: 5789)
Completed 200 OK in 218ms (Views: 36.6ms | ActiveRecord: 38.1ms | Allocations: 20483)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 02:24:44 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (4.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 06:24:44', '2024-03-22 06:24:44')[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.7ms | Allocations: 1236)
  Rendered shared/_admin_template.html.erb (Duration: 2.8ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 10.8ms | Allocations: 5037)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c1008d8e8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 21.1ms | Allocations: 9250)
Completed 200 OK in 75ms (Views: 24.0ms | ActiveRecord: 19.2ms | Allocations: 16229)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 02:25:18 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 06:25:18', '2024-03-22 06:25:18')[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 1237)
  Rendered shared/_admin_template.html.erb (Duration: 2.2ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.1ms | Allocations: 5038)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c100e0de0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 18.1ms | Allocations: 9252)
Completed 200 OK in 66ms (Views: 20.6ms | ActiveRecord: 23.5ms | Allocations: 16120)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 08:55:55 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (4.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.0ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 12:55:55', '2024-03-22 12:55:55')[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (2.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 3.8ms | Allocations: 1237)
  Rendered shared/_admin_template.html.erb (Duration: 5.6ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 21.9ms | Allocations: 5038)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c4e920>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 45.5ms | Allocations: 9251)
Completed 200 OK in 150ms (Views: 51.0ms | ActiveRecord: 41.8ms | Allocations: 16240)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:00:17 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:00:17', '2024-03-22 13:00:17')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.9ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 5.8ms | Allocations: 1514)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122a6c40>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 17.7ms | Allocations: 4710)
Completed 200 OK in 81ms (Views: 19.6ms | ActiveRecord: 27.0ms | Allocations: 11061)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:17:31 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.7ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:17:31', '2024-03-22 13:17:31')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 1240)
  Rendered shared/_admin_template.html.erb (Duration: 28.2ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 195.9ms | Allocations: 5042)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c138d1f60>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 301.3ms | Allocations: 9255)
Completed 200 OK in 367ms (Views: 304.2ms | ActiveRecord: 28.3ms | Allocations: 16225)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:23:22 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:23:22', '2024-03-22 13:23:22')[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 2.1ms | Allocations: 1254)
  Rendered shared/_admin_template.html.erb (Duration: 1.8ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.0ms | Allocations: 5057)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c159b7f90>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 17.9ms | Allocations: 9275)
Completed 200 OK in 78ms (Views: 21.0ms | ActiveRecord: 23.6ms | Allocations: 16261)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:23:32 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:23:32', '2024-03-22 13:23:32')[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 1253)
  Rendered shared/_admin_template.html.erb (Duration: 2.3ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.8ms | Allocations: 5054)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10078498>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 16.6ms | Allocations: 9267)
Completed 200 OK in 63ms (Views: 18.7ms | ActiveRecord: 22.5ms | Allocations: 16127)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:23:37 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:23:37', '2024-03-22 13:23:37')[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.4ms | Allocations: 1251)
  Rendered shared/_admin_template.html.erb (Duration: 1.5ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.6ms | Allocations: 5052)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c1014c090>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 9266)
Completed 200 OK in 64ms (Views: 18.5ms | ActiveRecord: 22.6ms | Allocations: 16128)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:24:14 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (12.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:24:14', '2024-03-22 13:24:14')[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.7ms | Allocations: 1236)
  Rendered shared/_admin_template.html.erb (Duration: 1.6ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.9ms | Allocations: 5037)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c48340>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | Allocations: 9250)
Completed 200 OK in 62ms (Views: 19.3ms | ActiveRecord: 20.6ms | Allocations: 16106)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:25:32 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:25:32', '2024-03-22 13:25:32')[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.4ms | Allocations: 1251)
  Rendered shared/_admin_template.html.erb (Duration: 1.8ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.3ms | Allocations: 5052)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122b4390>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | Allocations: 9265)
Completed 200 OK in 64ms (Views: 18.1ms | ActiveRecord: 23.1ms | Allocations: 16154)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:25:52 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:25:52', '2024-03-22 13:25:52')[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.4ms | Allocations: 1251)
  Rendered shared/_admin_template.html.erb (Duration: 1.5ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.4ms | Allocations: 5052)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c13b8d0d8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | Allocations: 9268)
Completed 200 OK in 60ms (Views: 16.7ms | ActiveRecord: 21.5ms | Allocations: 16148)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:26:19 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:26:19', '2024-03-22 13:26:19')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 1252)
  Rendered shared/_admin_template.html.erb (Duration: 2.6ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.0ms | Allocations: 5055)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c100994e0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 17.8ms | Allocations: 9273)
Completed 200 OK in 70ms (Views: 19.9ms | ActiveRecord: 22.8ms | Allocations: 16156)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:26:42 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:26:42', '2024-03-22 13:26:42')[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.6ms | Allocations: 1253)
  Rendered shared/_admin_template.html.erb (Duration: 1.8ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.3ms | Allocations: 5054)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c1009c780>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | Allocations: 9267)
Completed 200 OK in 69ms (Views: 19.5ms | ActiveRecord: 24.1ms | Allocations: 16137)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:26:50 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (4.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:26:50', '2024-03-22 13:26:50')[0m
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 3.6ms | Allocations: 1253)
  Rendered shared/_admin_template.html.erb (Duration: 4.7ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 20.1ms | Allocations: 5054)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c1014b230>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 41.3ms | Allocations: 9268)
Completed 200 OK in 127ms (Views: 46.3ms | ActiveRecord: 25.7ms | Allocations: 16139)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:27:01 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:27:01', '2024-03-22 13:27:01')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 3.8ms | Allocations: 1253)
  Rendered shared/_admin_template.html.erb (Duration: 6.9ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 24.5ms | Allocations: 5054)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c6f148>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 47.4ms | Allocations: 9267)
Completed 200 OK in 145ms (Views: 53.3ms | ActiveRecord: 34.9ms | Allocations: 16150)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-22 09:27:45 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (12.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-22 13:27:45', '2024-03-22 13:27:45')[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 1250)
  Rendered shared/_admin_template.html.erb (Duration: 1.7ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.8ms | Allocations: 5051)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122c5500>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 9264)
Completed 200 OK in 65ms (Views: 18.2ms | ActiveRecord: 23.0ms | Allocations: 16132)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:03:03 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (4.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:03:04', '2024-03-24 21:03:04')[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.4ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 4.1ms | Allocations: 2877)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c22280>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.9ms | Allocations: 6149)
Completed 200 OK in 341ms (Views: 28.6ms | ActiveRecord: 22.9ms | Allocations: 63488)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:07:13 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:07:13', '2024-03-24 21:07:13')[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 7.5ms | Allocations: 1252)
  Rendered shared/_admin_template.html.erb (Duration: 41.2ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 228.1ms | Allocations: 5056)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10be0dd0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 413.5ms | Allocations: 9270)
Completed 200 OK in 478ms (Views: 423.8ms | ActiveRecord: 24.6ms | Allocations: 16169)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:07:53 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:07:53', '2024-03-24 21:07:53')[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.8ms | Allocations: 1252)
  Rendered shared/_admin_template.html.erb (Duration: 2.3ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 11.0ms | Allocations: 5055)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c159bb5f0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 21.7ms | Allocations: 9269)
Completed 200 OK in 80ms (Views: 24.3ms | ActiveRecord: 25.4ms | Allocations: 16138)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:07:54 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.0ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:07:54', '2024-03-24 21:07:54')[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.7ms | Allocations: 1514)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10071198>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.6ms | Allocations: 4710)
Completed 200 OK in 122ms (Views: 30.4ms | ActiveRecord: 35.4ms | Allocations: 11079)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:08:49 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:08:49', '2024-03-24 21:08:49')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 5.3ms | Allocations: 2418)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 15.5ms | Allocations: 4778)
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | Allocations: 4863)
Completed 500 Internal Server Error in 108ms (ActiveRecord: 34.2ms | Allocations: 11722)


  
ActionView::Template::Error (undefined local variable or method `analytics_data' for #<ActionView::Base:0x000000000287f8>):
    149: function reloadKnapsackTable() {
    150:   var knapsack_data = analytics_data.knapsack.knapsack_data;
    151: 
    152:   <% concat analytics_data.knapsack.knapsack_max_vote_count %>
    153: 
    154:   var table = document.createElement('table');
    155:   table.className = 'table table-bordered table-sm';
  
app/views/shared/analytics/_knapsack.html.erb:152
app/views/admin/elections/analytics.html.erb:170
app/views/admin/elections/analytics.html.erb:3
Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:09:56 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.2ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.0ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:09:56', '2024-03-24 21:09:56')[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 6.4ms | Allocations: 1249)
  Rendered shared/_admin_template.html.erb (Duration: 4.9ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 24.1ms | Allocations: 5052)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c15912d10>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 34.9ms | Allocations: 9270)
Completed 200 OK in 144ms (Views: 41.3ms | ActiveRecord: 37.9ms | Allocations: 16139)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:10:11 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.0ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:10:11', '2024-03-24 21:10:11')[0m
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.0ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.9ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.9ms | Allocations: 2883)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c9d340>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 28.2ms | Allocations: 6155)
Completed 200 OK in 364ms (Views: 32.4ms | ActiveRecord: 75.5ms | Allocations: 66489)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:10:20 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:10:20', '2024-03-24 21:10:20')[0m
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.9ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 18.4ms | Allocations: 2889)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c100d7da8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 34.5ms | Allocations: 6186)
Completed 200 OK in 269ms (Views: 38.0ms | ActiveRecord: 54.0ms | Allocations: 66472)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:16:08 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:16:08', '2024-03-24 21:16:08')[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.6ms)[0m  [1m[34mSELECT COUNT(id, stage) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
Completed 500 Internal Server Error in 129ms (ActiveRecord: 33.3ms | Allocations: 55517)


  
ActiveRecord::StatementInvalid (Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', stage) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FA' at line 1):
  
app/controllers/admin/elections_controller.rb:670:in `compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:708:in `analytics_knapsack'
app/controllers/admin/elections_controller.rb:163:in `analytics'
Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:17:24 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:17:24', '2024-03-24 21:17:24')[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Load (2.6ms)[0m  [1m[34mSELECT `vote_approvals`.* FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Load (1.5ms)[0m  [1m[34mSELECT `vote_approvals`.* FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Load (1.1ms)[0m  [1m[34mSELECT `vote_approvals`.* FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Load (1.1ms)[0m  [1m[34mSELECT `vote_approvals`.* FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Load (1.0ms)[0m  [1m[34mSELECT `vote_approvals`.* FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 11.4ms | Allocations: 2901)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122ab880>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 30.3ms | Allocations: 6198)
Completed 200 OK in 248ms (Views: 34.2ms | ActiveRecord: 48.1ms | Allocations: 70378)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:26:23 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.7ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:26:23', '2024-03-24 21:26:23')[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (2.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.7ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.7ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 3.9ms | Allocations: 1511)
  Rendered shared/_admin_template.html.erb (Duration: 3.6ms | Allocations: 1237)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 20.0ms | Allocations: 6630)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10064ce0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 36.9ms | Allocations: 10886)
Completed 200 OK in 278ms (Views: 41.1ms | ActiveRecord: 42.7ms | Allocations: 72180)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:29:56 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:29:57', '2024-03-24 21:29:57')[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 5.8ms | Allocations: 1513)
  Rendered shared/_admin_template.html.erb (Duration: 5.5ms | Allocations: 1237)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 26.5ms | Allocations: 6638)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10076558>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 48.4ms | Allocations: 10894)
Completed 200 OK in 303ms (Views: 54.2ms | ActiveRecord: 59.3ms | Allocations: 75134)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:46:28 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:46:28', '2024-03-24 21:46:28')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.8ms | Allocations: 1331)
  Rendered shared/_admin_template.html.erb (Duration: 2.5ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.5ms | Allocations: 5132)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c139f1c38>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 18.8ms | Allocations: 9345)
Completed 200 OK in 84ms (Views: 21.7ms | ActiveRecord: 27.8ms | Allocations: 18330)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:46:46 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:46:46', '2024-03-24 21:46:46')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.7ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 5.2ms | Allocations: 1330)
  Rendered shared/_admin_template.html.erb (Duration: 4.5ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 21.9ms | Allocations: 5131)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c1439de80>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 65.4ms | Allocations: 9359)
Completed 200 OK in 134ms (Views: 70.7ms | ActiveRecord: 20.2ms | Allocations: 18191)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:56:14 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:56:14', '2024-03-24 21:56:14')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 2.6ms | Allocations: 1350)
  Rendered shared/_admin_template.html.erb (Duration: 2.0ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.9ms | Allocations: 5153)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122d46b8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 19.8ms | Allocations: 9382)
Completed 200 OK in 93ms (Views: 22.3ms | ActiveRecord: 29.9ms | Allocations: 18339)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:56:31 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:56:31', '2024-03-24 21:56:31')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.3ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.6ms | Allocations: 1531)
  Rendered shared/_admin_template.html.erb (Duration: 1.5ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.3ms | Allocations: 5332)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c100d33e8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 9545)
Completed 200 OK in 72ms (Views: 17.3ms | ActiveRecord: 24.8ms | Allocations: 18392)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:56:44 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (15.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:56:44', '2024-03-24 21:56:44')[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.8ms | Allocations: 1348)
  Rendered shared/_admin_template.html.erb (Duration: 1.5ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.2ms | Allocations: 5149)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10cb6b88>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 16.7ms | Allocations: 9362)
Completed 200 OK in 76ms (Views: 19.0ms | ActiveRecord: 27.6ms | Allocations: 18200)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 17:58:00 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 21:58:00', '2024-03-24 21:58:00')[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.9ms | Allocations: 1348)
  Rendered shared/_admin_template.html.erb (Duration: 1.8ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.5ms | Allocations: 5149)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c13a5cb28>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 17.7ms | Allocations: 9362)
Completed 200 OK in 77ms (Views: 19.9ms | ActiveRecord: 25.6ms | Allocations: 18218)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:01:09 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:01:09', '2024-03-24 22:01:09')[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.7ms | Allocations: 1531)
  Rendered shared/_admin_template.html.erb (Duration: 1.8ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.6ms | Allocations: 5332)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c16321860>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 17.7ms | Allocations: 9545)
Completed 200 OK in 76ms (Views: 19.9ms | ActiveRecord: 25.6ms | Allocations: 18377)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:07:31 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:07:31', '2024-03-24 22:07:31')[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.3ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 1276)
  Rendered shared/_admin_template.html.erb (Duration: 1.6ms | Allocations: 1236)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 11.6ms | Allocations: 5080)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3bef008>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 20.5ms | Allocations: 9328)
Completed 200 OK in 76ms (Views: 22.5ms | ActiveRecord: 25.6ms | Allocations: 18281)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:08:14 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:08:14', '2024-03-24 22:08:14')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.7ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 4.2ms | Allocations: 1442)
  Rendered shared/_admin_template.html.erb (Duration: 4.4ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 17.7ms | Allocations: 5244)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10883160>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 39.9ms | Allocations: 9477)
Completed 200 OK in 132ms (Views: 44.4ms | ActiveRecord: 34.1ms | Allocations: 18315)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:12:16 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:12:17', '2024-03-24 22:12:17')[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.4ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 4.6ms | Allocations: 2926)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c138d1060>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 11.7ms | Allocations: 6223)
Completed 200 OK in 174ms (Views: 13.4ms | ActiveRecord: 40.7ms | Allocations: 70283)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:15:35 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:15:36', '2024-03-24 22:15:36')[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.3ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.4ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 3.7ms | Allocations: 2932)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10cb5dc8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 11.2ms | Allocations: 6229)
Completed 200 OK in 151ms (Views: 12.7ms | ActiveRecord: 34.0ms | Allocations: 70297)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:16:24 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:16:24', '2024-03-24 22:16:24')[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 2.2ms | Allocations: 1394)
  Rendered shared/_admin_template.html.erb (Duration: 1.8ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.8ms | Allocations: 5206)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c100937c0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 17.7ms | Allocations: 9419)
Completed 200 OK in 79ms (Views: 19.8ms | ActiveRecord: 27.3ms | Allocations: 18294)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:19:36 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:19:36', '2024-03-24 22:19:36')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.6ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.6ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 6.4ms | Allocations: 2938)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3bcdca0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 16.8ms | Allocations: 6235)
Completed 200 OK in 213ms (Views: 19.0ms | ActiveRecord: 49.0ms | Allocations: 70282)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:32:46 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.2ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:32:46', '2024-03-24 22:32:46')[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.9ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 4.9ms | Allocations: 1278)
  Rendered shared/_admin_template.html.erb (Duration: 7.3ms | Allocations: 1233)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 25.8ms | Allocations: 5090)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c24080>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 49.6ms | Allocations: 9303)
Completed 200 OK in 182ms (Views: 55.7ms | ActiveRecord: 45.5ms | Allocations: 18288)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:33:00 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (18.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:33:00', '2024-03-24 22:33:00')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.9ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.1ms | Allocations: 1522)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122b9570>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.5ms | Allocations: 4718)
Completed 200 OK in 146ms (Views: 27.1ms | ActiveRecord: 46.4ms | Allocations: 13035)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:34:56 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:34:56', '2024-03-24 22:34:56')[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 3.9ms | Allocations: 1394)
  Rendered shared/_admin_template.html.erb (Duration: 3.8ms | Allocations: 1237)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 24.5ms | Allocations: 6550)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3bcfbe0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 44.8ms | Allocations: 10806)
Completed 200 OK in 392ms (Views: 49.9ms | ActiveRecord: 79.5ms | Allocations: 75239)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:35:47 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:35:48', '2024-03-24 22:35:48')[0m
  [1m[36mTRANSACTION (14.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 11.9ms | Allocations: 2950)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3bc4740>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 30.2ms | Allocations: 6247)
Completed 200 OK in 425ms (Views: 34.8ms | ActiveRecord: 101.6ms | Allocations: 70178)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:36:09 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:36:10', '2024-03-24 22:36:10')[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (4.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.9ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.8ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.9ms | Allocations: 2956)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3bdaab8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.8ms | Allocations: 6253)
Completed 200 OK in 342ms (Views: 28.1ms | ActiveRecord: 49.3ms | Allocations: 70313)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:36:34 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:36:34', '2024-03-24 22:36:34')[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.5ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 5.1ms | Allocations: 2962)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c1226bff0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 14.3ms | Allocations: 6229)
Completed 200 OK in 195ms (Views: 16.6ms | ActiveRecord: 43.3ms | Allocations: 70290)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:36:38 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:36:38', '2024-03-24 22:36:38')[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.8ms | Allocations: 1522)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3c19f60>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 31.2ms | Allocations: 4718)
Completed 200 OK in 147ms (Views: 34.1ms | ActiveRecord: 40.7ms | Allocations: 13067)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:37:06 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:37:06', '2024-03-24 22:37:06')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.8ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 12.4ms | Allocations: 2968)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc39e03c0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 32.3ms | Allocations: 6265)
Completed 200 OK in 389ms (Views: 37.1ms | ActiveRecord: 82.0ms | Allocations: 70222)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:47:17 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:47:18', '2024-03-24 22:47:18')[0m
  [1m[36mTRANSACTION (21.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.8ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (2.0ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 13.5ms | Allocations: 2974)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c13ae8cb8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 35.2ms | Allocations: 6271)
Completed 200 OK in 415ms (Views: 40.1ms | ActiveRecord: 74.1ms | Allocations: 66947)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:48:06 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:48:07', '2024-03-24 22:48:07')[0m
  [1m[36mTRANSACTION (19.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 2.7ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.8ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 15.1ms | Allocations: 2980)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c14398660>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 35.1ms | Allocations: 6277)
Completed 200 OK in 394ms (Views: 40.1ms | ActiveRecord: 94.2ms | Allocations: 70133)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:48:19 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:48:20', '2024-03-24 22:48:20')[0m
  [1m[36mTRANSACTION (18.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 4.0ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 14.4ms | Allocations: 2986)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c14334e30>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 35.6ms | Allocations: 6283)
Completed 200 OK in 457ms (Views: 39.7ms | ActiveRecord: 108.2ms | Allocations: 70249)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:48:46 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:48:46', '2024-03-24 22:48:46')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.3ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.5ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 4.8ms | Allocations: 2992)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122b8df0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 12.1ms | Allocations: 6290)
Completed 200 OK in 172ms (Views: 13.7ms | ActiveRecord: 37.0ms | Allocations: 70262)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:49:11 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:49:11', '2024-03-24 22:49:11')[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.7ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2998)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10146910>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 12.9ms | Allocations: 6266)
Completed 200 OK in 172ms (Views: 14.9ms | ActiveRecord: 40.0ms | Allocations: 70315)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:50:05 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.0ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:50:05', '2024-03-24 22:50:05')[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 12.3ms | Allocations: 3004)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc32d7808>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 31.6ms | Allocations: 6301)
Completed 200 OK in 394ms (Views: 35.8ms | ActiveRecord: 84.1ms | Allocations: 70382)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:50:19 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:50:19', '2024-03-24 22:50:19')[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.5ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.6ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 6.1ms | Allocations: 3010)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc31f3f40>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | Allocations: 6307)
Completed 200 OK in 305ms (Views: 18.2ms | ActiveRecord: 40.9ms | Allocations: 70460)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:51:23 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:51:23', '2024-03-24 22:51:23')[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.5ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 4.3ms | Allocations: 1522)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc32b2300>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | Allocations: 4718)
Completed 200 OK in 86ms (Views: 15.7ms | ActiveRecord: 28.6ms | Allocations: 13120)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:53:12 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:53:12', '2024-03-24 22:53:12')[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.7ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 3.2ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 13.5ms | Allocations: 3016)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c146b7620>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 33.1ms | Allocations: 6283)
Completed 200 OK in 362ms (Views: 37.5ms | ActiveRecord: 74.8ms | Allocations: 70156)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:54:24 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:54:24', '2024-03-24 22:54:24')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.4ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.8ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 2.1ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 12.5ms | Allocations: 3022)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3a0f3c8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 33.1ms | Allocations: 6319)
Completed 200 OK in 358ms (Views: 37.3ms | ActiveRecord: 68.2ms | Allocations: 70872)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 18:54:49 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 22:54:50', '2024-03-24 22:54:50')[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 17 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 18 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 19 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 20 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mVoteApproval Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_approvals`.`cost`) FROM `vote_approvals` WHERE `vote_approvals`.`project_id` = 21 AND `vote_approvals`.`voter_id` IN (2, 4, 1, 5, 3)[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 11.4ms | Allocations: 3028)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3be4e28>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 32.6ms | Allocations: 6295)
Completed 200 OK in 377ms (Views: 36.8ms | ActiveRecord: 76.0ms | Allocations: 70894)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:02:15 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:02:15', '2024-03-24 23:02:15')[0m
  [1m[36mTRANSACTION (17.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (12.5ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.3ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.3ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.3ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.9ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (2.0ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 12.4ms | Allocations: 3118)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3c1c4e0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 33.0ms | Allocations: 6415)
Completed 200 OK in 419ms (Views: 37.5ms | ActiveRecord: 86.6ms | Allocations: 66755)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:07:10 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:07:10', '2024-03-24 23:07:10')[0m
  [1m[36mTRANSACTION (10.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 2.3ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 13.0ms | Allocations: 3124)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c6e2e8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 32.5ms | Allocations: 6421)
Completed 200 OK in 426ms (Views: 36.5ms | ActiveRecord: 94.7ms | Allocations: 69515)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:07:41 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:07:41', '2024-03-24 23:07:41')[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.0ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.5ms | Allocations: 3142)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc31ec9e8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.8ms | Allocations: 6439)
Completed 200 OK in 321ms (Views: 30.9ms | ActiveRecord: 65.7ms | Allocations: 69871)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:08:32 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.7ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5)[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 309)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 195.4ms | Allocations: 7204)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c13a90b58>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 206.2ms | Allocations: 10469)
Completed 200 OK in 217ms (Views: 203.5ms | ActiveRecord: 8.7ms | Allocations: 11780)


Started GET "/admin/elections/2/voters/1" for ::1 at 2024-03-24 19:08:36 -0400
Processing by Admin::VotersController#show as HTML
  Parameters: {"election_id"=>"2", "id"=>"1"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/1', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 1 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/show.html.erb within layouts/application
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 276)
  Rendered admin/voters/show.html.erb within layouts/application (Duration: 80.9ms | Allocations: 1181)
[31mUnpermitted parameters: :election_id, :id. Context: { controller: Admin::VotersController, action: show, request: #<ActionDispatch::Request:0x00007f9c14725c88>, params: {"controller"=>"admin/voters", "action"=>"show", "election_id"=>"2", "id"=>"1"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 97.9ms | Allocations: 4383)
Completed 200 OK in 111ms (Views: 99.0ms | ActiveRecord: 5.2ms | Allocations: 5823)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:08:42 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters/1', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:08:42', '2024-03-24 23:08:42')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.3ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.0ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 1.4ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.9ms | Allocations: 1618)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c139b6188>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.0ms | Allocations: 4844)
Completed 200 OK in 135ms (Views: 28.5ms | ActiveRecord: 37.3ms | Allocations: 13470)


Started GET "/admin/elections/2/analytics.csv?table=voter_data" for ::1 at 2024-03-24 19:08:49 -0400
Processing by Admin::ElectionsController#analytics as CSV
  Parameters: {"table"=>"voter_data", "id"=>"2"}
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/analytics.csv?table=voter_data', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:08:49', '2024-03-24 23:08:49')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.7ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0) ORDER BY `voters`.`id` ASC[0m
  Rendering text template
  Rendered text template (Duration: 0.0ms | Allocations: 3)
Sent data  (23.6ms)
Completed 200 OK in 108ms (Views: 23.3ms | ActiveRecord: 23.4ms | Allocations: 9291)


Started GET "/admin/elections/2/files" for ::1 at 2024-03-24 19:14:27 -0400
Processing by Admin::FilesController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/files', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/files/index.html.erb within layouts/application
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 309)
  Rendered admin/files/index.html.erb within layouts/application (Duration: 108.8ms | Allocations: 1398)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::FilesController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3401f58>, params: {"controller"=>"admin/files", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 117.3ms | Allocations: 4646)
Completed 200 OK in 140ms (Views: 121.4ms | ActiveRecord: 6.2ms | Allocations: 6091)


Started GET "/admin/elections/2/projects" for ::1 at 2024-03-24 19:14:33 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/files', 'http://localhost:3000/admin/elections/2/projects', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 302)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 193.4ms | Allocations: 6912)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc39f7278>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 199.7ms | Allocations: 10176)
Completed 200 OK in 221ms (Views: 200.5ms | ActiveRecord: 8.6ms | Allocations: 11945)


Started GET "/admin" for ::1 at 2024-03-24 19:14:55 -0400
Processing by Admin::HomeController#index as HTML
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects', 'http://localhost:3000/admin', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT elections.*, COUNT(voters.id) AS voter_count FROM `elections` LEFT OUTER JOIN voters ON voters.election_id = elections.id AND voters.void = false GROUP BY `elections`.`id`[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/home/index.html.erb within layouts/application
  Rendered shared/_election_list.html.erb (Duration: 27.8ms | Allocations: 611)
  Rendered shared/_admin_template.html.erb (Duration: 0.2ms | Allocations: 68)
  Rendered admin/home/index.html.erb within layouts/application (Duration: 52.2ms | Allocations: 1281)
  Rendered layout layouts/application.html.erb (Duration: 58.9ms | Allocations: 4486)
Completed 200 OK in 70ms (Views: 60.9ms | ActiveRecord: 3.5ms | Allocations: 6741)


Started GET "/admin/elections/new" for ::1 at 2024-03-24 19:14:56 -0400
Processing by Admin::ElectionsController#new as HTML
  [1m[35m (13.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin', 'http://localhost:3000/admin/elections/new', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/new.html.erb within layouts/application
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 61)
  Rendered admin/elections/new.html.erb within layouts/application (Duration: 111.8ms | Allocations: 1405)
  Rendered layout layouts/application.html.erb (Duration: 128.1ms | Allocations: 4539)
Completed 200 OK in 148ms (Views: 130.3ms | ActiveRecord: 13.6ms | Allocations: 5250)


Started POST "/admin/elections" for ::1 at 2024-03-24 19:15:52 -0400
Processing by Admin::ElectionsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"t6gvtXme+HHNmgo6fBcKsggaB/j36VDz0zueiyTf33YW2ihijhkQuCUaEkNvEALSdiofm/6Y9doLCDvzbLKx6Q==", "election"=>{"name"=>"equal-shares-demo", "slug"=>"equal-shares-demo"}, "commit"=>"Save"}
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/new', 'http://localhost:3000/admin/elections', 'POST', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mElection Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mElection Create (0.7ms)[0m  [1m[32mINSERT INTO `elections` (`name`, `slug`, `config_yaml`, `created_at`, `updated_at`) VALUES ('equal-shares-demo', 'equal-shares-demo', '', '2024-03-24 23:15:52', '2024-03-24 23:15:52')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.4ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `created_at`, `updated_at`) VALUES (3, '1', 1000, '2024-03-24 23:15:52', '2024-03-24 23:15:52')[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 22 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.4ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`) VALUES (22, 'en', '2024-03-24 23:15:52', '2024-03-24 23:15:52', 'Example Project 1', 'Example description 1.')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.4ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `created_at`, `updated_at`) VALUES (3, '2', 2000, '2024-03-24 23:15:52', '2024-03-24 23:15:52')[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 23 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.3ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`) VALUES (23, 'en', '2024-03-24 23:15:52', '2024-03-24 23:15:52', 'Example Project 2', 'Example description 2.')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.4ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `created_at`, `updated_at`) VALUES (3, '3', 3000, '2024-03-24 23:15:52', '2024-03-24 23:15:52')[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 24 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.4ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`) VALUES (24, 'en', '2024-03-24 23:15:52', '2024-03-24 23:15:52', 'Example Project 3', 'Example description 3.')[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.4ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `created_at`, `updated_at`) VALUES (3, '4', 4000, '2024-03-24 23:15:52', '2024-03-24 23:15:52')[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 25 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.4ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`) VALUES (25, 'en', '2024-03-24 23:15:52', '2024-03-24 23:15:52', 'Example Project 4', 'Example description 4.')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.4ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `created_at`, `updated_at`) VALUES (3, '5', 5000, '2024-03-24 23:15:52', '2024-03-24 23:15:52')[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 26 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.4ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`) VALUES (26, 'en', '2024-03-24 23:15:52', '2024-03-24 23:15:52', 'Example Project 5', 'Example description 5.')[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3
Completed 302 Found in 97ms (ActiveRecord: 28.1ms | Allocations: 21725)


Started GET "/admin/elections/3" for ::1 at 2024-03-24 19:15:52 -0400
Processing by Admin::ElectionsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/new', 'http://localhost:3000/admin/elections/3', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/show.html.erb within layouts/application
  [1m[36mProject Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 280)
  Rendered admin/elections/show.html.erb within layouts/application (Duration: 51.9ms | Allocations: 2192)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: show, request: #<ActionDispatch::Request:0x00007f9c1393aab0>, params: {"controller"=>"admin/elections", "action"=>"show", "id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 63.0ms | Allocations: 5388)
Completed 200 OK in 71ms (Views: 63.9ms | ActiveRecord: 3.4ms | Allocations: 6173)


Started GET "/admin/elections/3/edit" for ::1 at 2024-03-24 19:15:58 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3', 'http://localhost:3000/admin/elections/3/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 311.1ms | Allocations: 116577)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 362.4ms | Allocations: 117460)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c158f4d88>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 368.0ms | Allocations: 120357)
Completed 200 OK in 939ms (Views: 369.3ms | ActiveRecord: 3.9ms | Allocations: 159331)


Started PATCH "/admin/elections/3" for ::1 at 2024-03-24 19:16:28 -0400
Processing by Admin::ElectionsController#update as JSON
  Parameters: {"utf8"=>"âœ“", "election"=>{"config_yaml"=>"workflow: [knapsack, thanks]\r\navailable_locales: [en]\r\ndefault_locale: en\r\nshow_public_results: false\r\nallow_local_voting: false\r\nallow_remote_voting: true\r\nremote_voting_free_verification: true\r\nfree_verification_use_captcha: false\r\nknapsack:\r\n  has_budget_limit: true\r\n  has_n_project_limit: false\r\n  total_tokens: 15\r\n  max_n_projects: 4\r\n  shuffle_projects: true\r\n", "name"=>"equal-shares-demo", "slug"=>"equal-shares-demo", "budget"=>"300", "time_zone"=>"International Date Line West", "allow_admins_to_update_election"=>"1", "allow_admins_to_see_voter_data"=>"1", "allow_admins_to_see_exact_results"=>"1", "real_election"=>"1", "remarks"=>""}, "mce_0"=>"<p><img style=\"margin-left: auto; margin-right: auto; display: block;\" src=\"../../../img/sample-city-logo.png\" /></p>\r\n<p class=\"lead\">Welcome to the Participatory Budgeting sample digital ballot, courtesy of the Stanford Crowdsourced Democracy Team.</p>\r\n<p class=\"lead\">On this website, you can familiarize yourself with this year&rsquo;s projects and the digital ballot. This website is only informational, and you <strong>cannot</strong> cast your actual vote here.</p>\r\n<p class=\"lead\">When you cast your <u>actual ballot</u>, you will be deciding how you want to allocate $XXX million of the city's capital improvement budget. In order to vote, you need to come to one of the many voting sites that will be located throughout the city. The voting will be held from (Date XXX) to (Date YYY). See all times and locations below.</p>", "mce_2"=>"<h3>Voting Locations</h3>\r\n<p><strong>Saturday, September 27</strong> &nbsp; (12:00 noon - 4:00 p.m.)<br />Somewhere<br /><br /><strong>Tuesday, September 30</strong> &nbsp; (6:00 p.m. - 9:00 p.m.)<br />Somewhere<br /><br /></p>\r\n<p>For more information, please visit <a href=\"http://www.example.com/\">http://www.example.com/</a></p>", "mce_10"=>"<p style=\"font-size: 20px;\">You will now be asked to participate in an activity that will <u>not</u> affect your vote, but is part of a Stanford University research project meant to help us improve the participatory budgeting process.</p>\r\n<ul style=\"font-size: 20px;\">\r\n<li>Participating in this activity is optional. You can exit at any time.</li>\r\n<li>The expected time for this activity is 2-3 minutes.</li>\r\n</ul>\r\n<p style=\"font-size: 14px;\">This study poses no risk. No payment will be made to you for participation, and we cannot guarantee any benefits to you. You have the right to refuse to answer particular questions. Please contact Professor Ashish Goel at goel_admins@lists.stanford.edu if you have any questions, suggestions, or concerns. You may also contact the Stanford Institutional Review Board at 650-723-2480.</p>", "mce_11"=>"<h3>Instructions</h3>\r\n<ol>\r\n<li>Select the projects you would like to support. The total cost cannot exceed <strong>%{budget}</strong>.</li>\r\n<li>You can see the total amount you have allocated so far in the bar above. You can remove any previously selected projects by clicking on the bar or directly by clicking on the chosen project.</li>\r\n<li>Click the <strong>\"Submit My Vote\"</strong> button when you're ready to submit.</li>\r\n</ol>", "commit"=>"Save", "id"=>"3"}
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/edit', 'http://localhost:3000/admin/elections/3', 'POST', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mElection Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' AND `elections`.`id` != 3 LIMIT 1[0m
  [1m[36mElection Update (0.7ms)[0m  [1m[33mUPDATE `elections` SET `elections`.`budget` = 300, `elections`.`time_zone` = 'International Date Line West', `elections`.`config_yaml` = 'workflow: [knapsack, thanks]\r\navailable_locales: [en]\r\ndefault_locale: en\r\nshow_public_results: false\r\nallow_local_voting: false\r\nallow_remote_voting: true\r\nremote_voting_free_verification: true\r\nfree_verification_use_captcha: false\r\nknapsack:\r\n  has_budget_limit: true\r\n  has_n_project_limit: false\r\n  total_tokens: 15\r\n  max_n_projects: 4\r\n  shuffle_projects: true\r\n', `elections`.`updated_at` = '2024-03-24 23:16:28', `elections`.`remarks` = '' WHERE `elections`.`id` = 3[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 7.2ms | Allocations: 1737)


Started GET "/equal-shares-demo" for ::1 at 2024-03-24 19:16:56 -0400
Processing by VoteController#index as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (15.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/equal-shares-demo', 'GET', NOW())[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 159.3ms | Allocations: 1450)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3c1c440>, params: {"controller"=>"vote", "action"=>"index", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 166.4ms | Allocations: 4930)
Completed 200 OK in 195ms (Views: 169.4ms | ActiveRecord: 16.8ms | Allocations: 7088)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:17:04 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/edit', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 23[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 24[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 25[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 26[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 46.8ms | Allocations: 5334)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c1008a148>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 65.3ms | Allocations: 8529)
Completed 200 OK in 78ms (Views: 59.9ms | ActiveRecord: 11.2ms | Allocations: 9860)


Started DELETE "/admin/elections/3/projects/23" for ::1 at 2024-03-24 19:17:08 -0400
Processing by Admin::ProjectsController#destroy as HTML
  Parameters: {"authenticity_token"=>"atZPbs0//AbCHdn7L0lRN3o4ZX3PCCDoEcm+yZ2iOPHLpEi5OrgUzyqdwYI8TllXBAh9HsZ5hcHJ+hux1c9Wbg==", "election_id"=>"3", "id"=>"23"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/23', 'POST', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 AND `projects`.`id` = 23 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 23[0m
  [1m[36mProject::Translation Destroy (2.0ms)[0m  [1m[31mDELETE FROM `project_translations` WHERE `project_translations`.`id` = 23[0m
  [1m[36mProject Destroy (0.8ms)[0m  [1m[31mDELETE FROM `projects` WHERE `projects`.`id` = 23[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 29ms (ActiveRecord: 11.5ms | Allocations: 1930)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:17:08 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (3.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 24[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 25[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 26[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 40.4ms | Allocations: 4539)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c10be2810>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 57.9ms | Allocations: 7734)
Completed 200 OK in 75ms (Views: 53.8ms | ActiveRecord: 11.7ms | Allocations: 9041)


Started DELETE "/admin/elections/3/projects/24" for ::1 at 2024-03-24 19:17:11 -0400
Processing by Admin::ProjectsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nD90zR7uh2jLzhUElvU15xjCoFFxRhqpm36GNUd/4J89TXMa6WlvoSNODX2F8j2HZvK4Mng3v4BDTSNNDxKOAA==", "election_id"=>"3", "id"=>"24"}
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/24', 'POST', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 AND `projects`.`id` = 24 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 24[0m
  [1m[36mProject::Translation Destroy (0.4ms)[0m  [1m[31mDELETE FROM `project_translations` WHERE `project_translations`.`id` = 24[0m
  [1m[36mProject Destroy (0.4ms)[0m  [1m[31mDELETE FROM `projects` WHERE `projects`.`id` = 24[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 21ms (ActiveRecord: 9.3ms | Allocations: 1759)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:17:11 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 25[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 26[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 17.2ms | Allocations: 3743)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c122d8cb8>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.4ms | Allocations: 6938)
Completed 200 OK in 35ms (Views: 23.6ms | ActiveRecord: 6.4ms | Allocations: 8266)


Started DELETE "/admin/elections/3/projects/25" for ::1 at 2024-03-24 19:17:13 -0400
Processing by Admin::ProjectsController#destroy as HTML
  Parameters: {"authenticity_token"=>"S4wnUPa1vHQhzfinoEgSDXLWosKtP5mFuCCskKyTp1Lq/iCHATJUvclN4N6zTxptDOa6oaROPKxgEwno5P7JzQ==", "election_id"=>"3", "id"=>"25"}
  [1m[35m (3.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/25', 'POST', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 AND `projects`.`id` = 25 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 25[0m
  [1m[36mProject::Translation Destroy (0.9ms)[0m  [1m[31mDELETE FROM `project_translations` WHERE `project_translations`.`id` = 25[0m
  [1m[36mProject Destroy (1.0ms)[0m  [1m[31mDELETE FROM `projects` WHERE `projects`.`id` = 25[0m
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 37ms (ActiveRecord: 14.4ms | Allocations: 1756)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:17:13 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (3.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 26[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 31.6ms | Allocations: 2948)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c13c21ff8>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 50.9ms | Allocations: 6143)
Completed 200 OK in 70ms (Views: 47.9ms | ActiveRecord: 11.5ms | Allocations: 7456)


Started DELETE "/admin/elections/3/projects/26" for ::1 at 2024-03-24 19:17:16 -0400
Processing by Admin::ProjectsController#destroy as HTML
  Parameters: {"authenticity_token"=>"f1GBo1geNa3rU8pRPKEzZ0da0RVozk27hE/OvvznXXTeI4Z0r5ndZAPT0igvpjsHOWrJdmG/6JJcfGvGtIoz6w==", "election_id"=>"3", "id"=>"26"}
  [1m[35m (14.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/26', 'POST', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 AND `projects`.`id` = 26 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 26[0m
  [1m[36mProject::Translation Destroy (1.1ms)[0m  [1m[31mDELETE FROM `project_translations` WHERE `project_translations`.`id` = 26[0m
  [1m[36mProject Destroy (0.8ms)[0m  [1m[31mDELETE FROM `projects` WHERE `projects`.`id` = 26[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 42ms (ActiveRecord: 23.2ms | Allocations: 1750)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:17:16 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3 ORDER BY `categories`.`sort_order` ASC[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 28.0ms | Allocations: 2299)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3bdea78>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 45.5ms | Allocations: 5494)
Completed 200 OK in 64ms (Views: 42.9ms | ActiveRecord: 11.0ms | Allocations: 6813)


Started GET "/admin/elections/3/projects/22/edit" for ::1 at 2024-03-24 19:17:18 -0400
Processing by Admin::ProjectsController#edit as HTML
  Parameters: {"election_id"=>"3", "id"=>"22"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/22/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 AND `projects`.`id` = 22 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/edit.html.erb within layouts/application
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Load (1.5ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3[0m
  Rendered shared/_project_form.html.erb (Duration: 402.3ms | Allocations: 9078)
  Rendered shared/_admin_template.html.erb (Duration: 1.5ms | Allocations: 276)
  Rendered admin/projects/edit.html.erb within layouts/application (Duration: 457.3ms | Allocations: 9782)
[31mUnpermitted parameters: :election_id, :id. Context: { controller: Admin::ProjectsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c13b86418>, params: {"controller"=>"admin/projects", "action"=>"edit", "election_id"=>"3", "id"=>"22"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 476.6ms | Allocations: 13008)
Completed 200 OK in 491ms (Views: 477.2ms | ActiveRecord: 6.2ms | Allocations: 14289)


Started PATCH "/admin/elections/3/projects/22" for ::1 at 2024-03-24 19:17:54 -0400
Processing by Admin::ProjectsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"95IQPA4kY1Dx3P4//Od5duWB0MoYRtWYqb8jiEke0/RW4Bfr+aOLmRlc5kbv4HEWm7HIqRE3cLFxjIbwAXO9aw==", "project"=>{"number"=>"1", "title_en"=>"Bike path", "description_en"=>"Example description 1.", "cost"=>"699", "adjustable_cost"=>"0", "cost_min"=>"0", "cost_step"=>"1", "uses_slider"=>"0", "address_en"=>"", "category_id"=>"", "image_cache"=>"", "image_description_en"=>"", "map_geometry"=>"", "video_url_en"=>"", "details_en"=>"", "external_vote_count"=>"", "data"=>""}, "commit"=>"Save", "election_id"=>"3", "id"=>"22"}
  [1m[35m (3.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/22/edit', 'http://localhost:3000/admin/elections/3/projects/22', 'POST', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 AND `projects`.`id` = 22 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject Update (1.3ms)[0m  [1m[33mUPDATE `projects` SET `projects`.`cost` = 699, `projects`.`map_geometry` = '', `projects`.`data` = '', `projects`.`updated_at` = '2024-03-24 23:17:54' WHERE `projects`.`id` = 22[0m
  [1m[36mProject::Translation Update (1.1ms)[0m  [1m[33mUPDATE `project_translations` SET `project_translations`.`updated_at` = '2024-03-24 23:17:54', `project_translations`.`title` = 'Bike path', `project_translations`.`details` = '', `project_translations`.`address` = '', `project_translations`.`video_url` = '', `project_translations`.`image_description` = '' WHERE `project_translations`.`id` = 22[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 55ms (ActiveRecord: 13.8ms | Allocations: 5536)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:17:54 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (13.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/22/edit', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCategory Load (0.8ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3 ORDER BY `categories`.`sort_order` ASC[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 24.9ms | Allocations: 2294)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc31e3848>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 42.2ms | Allocations: 5502)
Completed 200 OK in 70ms (Views: 40.1ms | ActiveRecord: 20.2ms | Allocations: 6824)


Started GET "/admin/elections/3/projects/22/edit" for ::1 at 2024-03-24 19:17:56 -0400
Processing by Admin::ProjectsController#edit as HTML
  Parameters: {"election_id"=>"3", "id"=>"22"}
  [1m[35m (15.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/22/edit', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 AND `projects`.`id` = 22 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/edit.html.erb within layouts/application
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3[0m
  Rendered shared/_project_form.html.erb (Duration: 21.6ms | Allocations: 4346)
  Rendered shared/_admin_template.html.erb (Duration: 1.5ms | Allocations: 276)
  Rendered admin/projects/edit.html.erb within layouts/application (Duration: 26.2ms | Allocations: 4792)
[31mUnpermitted parameters: :election_id, :id. Context: { controller: Admin::ProjectsController, action: edit, request: #<ActionDispatch::Request:0x00007f9bc33857a0>, params: {"controller"=>"admin/projects", "action"=>"edit", "election_id"=>"3", "id"=>"22"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 44.0ms | Allocations: 7985)
Completed 200 OK in 75ms (Views: 44.4ms | ActiveRecord: 20.0ms | Allocations: 9218)


Started PATCH "/admin/elections/3/projects/22" for ::1 at 2024-03-24 19:18:02 -0400
Processing by Admin::ProjectsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"rjOrtYzI11Z6Q0fTHpyu+FEt5ltE27VQWRbZpOYgBxgPQaxie08/n5LDX6oNm6aYLx3+OE2qEHmBJXzcrk1phw==", "project"=>{"number"=>"1", "title_en"=>"Bike path", "description_en"=>"Example description 1.", "cost"=>"700", "adjustable_cost"=>"0", "cost_min"=>"0", "cost_step"=>"1", "uses_slider"=>"0", "address_en"=>"", "category_id"=>"", "image_cache"=>"", "image_description_en"=>"", "map_geometry"=>"", "video_url_en"=>"", "details_en"=>"", "external_vote_count"=>"", "data"=>""}, "commit"=>"Save", "election_id"=>"3", "id"=>"22"}
  [1m[35m (12.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/22/edit', 'http://localhost:3000/admin/elections/3/projects/22', 'POST', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 AND `projects`.`id` = 22 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject Update (0.6ms)[0m  [1m[33mUPDATE `projects` SET `projects`.`cost` = 700, `projects`.`updated_at` = '2024-03-24 23:18:02' WHERE `projects`.`id` = 22[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 36ms (ActiveRecord: 17.5ms | Allocations: 5098)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:18:02 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (4.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/22/edit', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3 ORDER BY `categories`.`sort_order` ASC[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 12.2ms | Allocations: 2294)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc39f7b38>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 20.5ms | Allocations: 5489)
Completed 200 OK in 32ms (Views: 19.4ms | ActiveRecord: 7.3ms | Allocations: 6808)


Started GET "/admin/elections/3/edit" for ::1 at 2024-03-24 19:18:04 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (3.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 69.5ms | Allocations: 115617)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 72.9ms | Allocations: 116042)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9bc3bfea80>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 78.4ms | Allocations: 118939)
Completed 200 OK in 241ms (Views: 79.5ms | ActiveRecord: 4.4ms | Allocations: 157859)


Started PATCH "/admin/elections/3" for ::1 at 2024-03-24 19:18:18 -0400
Processing by Admin::ElectionsController#update as JSON
  Parameters: {"utf8"=>"âœ“", "election"=>{"config_yaml"=>"workflow: [knapsack, thanks]\r\navailable_locales: [en]\r\ndefault_locale: en\r\nshow_public_results: false\r\nallow_local_voting: false\r\nallow_remote_voting: true\r\nremote_voting_free_verification: true\r\nfree_verification_use_captcha: false\r\nknapsack:\r\n  has_budget_limit: true\r\n  has_n_project_limit: false\r\n  total_tokens: 15\r\n  max_n_projects: 4\r\n  shuffle_projects: true\r\n", "name"=>"equal-shares-demo", "slug"=>"equal-shares-demo", "budget"=>"1099", "time_zone"=>"International Date Line West", "allow_admins_to_update_election"=>"1", "allow_admins_to_see_voter_data"=>"1", "allow_admins_to_see_exact_results"=>"1", "real_election"=>"1", "remarks"=>""}, "mce_0"=>"<p><img style=\"margin-left: auto; margin-right: auto; display: block;\" src=\"../../../img/sample-city-logo.png\" /></p>\r\n<p class=\"lead\">Welcome to the Participatory Budgeting sample digital ballot, courtesy of the Stanford Crowdsourced Democracy Team.</p>\r\n<p class=\"lead\">On this website, you can familiarize yourself with this year&rsquo;s projects and the digital ballot. This website is only informational, and you <strong>cannot</strong> cast your actual vote here.</p>\r\n<p class=\"lead\">When you cast your <u>actual ballot</u>, you will be deciding how you want to allocate $XXX million of the city's capital improvement budget. In order to vote, you need to come to one of the many voting sites that will be located throughout the city. The voting will be held from (Date XXX) to (Date YYY). See all times and locations below.</p>", "mce_2"=>"<h3>Voting Locations</h3>\r\n<p><strong>Saturday, September 27</strong> &nbsp; (12:00 noon - 4:00 p.m.)<br />Somewhere<br /><br /><strong>Tuesday, September 30</strong> &nbsp; (6:00 p.m. - 9:00 p.m.)<br />Somewhere<br /><br /></p>\r\n<p>For more information, please visit <a href=\"http://www.example.com/\">http://www.example.com/</a></p>", "mce_3"=>"<p style=\"font-size: 20px;\">You will now be asked to participate in an activity that will <u>not</u> affect your vote, but is part of a Stanford University research project meant to help us improve the participatory budgeting process.</p>\r\n<ul style=\"font-size: 20px;\">\r\n<li>Participating in this activity is optional. You can exit at any time.</li>\r\n<li>The expected time for this activity is 2-3 minutes.</li>\r\n</ul>\r\n<p style=\"font-size: 14px;\">This study poses no risk. No payment will be made to you for participation, and we cannot guarantee any benefits to you. You have the right to refuse to answer particular questions. Please contact Professor Ashish Goel at goel_admins@lists.stanford.edu if you have any questions, suggestions, or concerns. You may also contact the Stanford Institutional Review Board at 650-723-2480.</p>", "mce_4"=>"<h3>Instructions</h3>\r\n<ol>\r\n<li>Select the projects you would like to support. The total cost cannot exceed <strong>%{budget}</strong>.</li>\r\n<li>You can see the total amount you have allocated so far in the bar above. You can remove any previously selected projects by clicking on the bar or directly by clicking on the chosen project.</li>\r\n<li>Click the <strong>\"Submit My Vote\"</strong> button when you're ready to submit.</li>\r\n</ol>", "commit"=>"Save", "id"=>"3"}
  [1m[35m (14.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/edit', 'http://localhost:3000/admin/elections/3', 'POST', NOW())[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mElection Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' AND `elections`.`id` != 3 LIMIT 1[0m
  [1m[36mElection Update (1.1ms)[0m  [1m[33mUPDATE `elections` SET `elections`.`budget` = 1099, `elections`.`updated_at` = '2024-03-24 23:18:18' WHERE `elections`.`id` = 3[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 40ms (Views: 0.3ms | ActiveRecord: 22.5ms | Allocations: 1511)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:18:23 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (13.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/edit', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3 ORDER BY `categories`.`sort_order` ASC[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 25.8ms | Allocations: 3111)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c10c7f5c0>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 51.3ms | Allocations: 6336)
Completed 200 OK in 75ms (Views: 49.0ms | ActiveRecord: 19.2ms | Allocations: 7650)


Started GET "/admin/elections/3/projects/new" for ::1 at 2024-03-24 19:18:26 -0400
Processing by Admin::ProjectsController#new as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/new', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/new.html.erb within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3[0m
  Rendered shared/_project_form.html.erb (Duration: 17.4ms | Allocations: 3900)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 276)
  Rendered admin/projects/new.html.erb within layouts/application (Duration: 61.9ms | Allocations: 4529)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: new, request: #<ActionDispatch::Request:0x00007f9c12274ce0>, params: {"controller"=>"admin/projects", "action"=>"new", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 79.1ms | Allocations: 7745)
Completed 200 OK in 89ms (Views: 80.5ms | ActiveRecord: 4.5ms | Allocations: 8558)


Started POST "/admin/elections/3/projects" for ::1 at 2024-03-24 19:18:35 -0400
Processing by Admin::ProjectsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"i56tNTYiSJwt0Z2qTP2G5NqDDJ3aMSMBEBvSYktePYEq7KriwaWgVcVRhdNf+o6EpLMU/tNAhijIKHcaAzNTHg==", "project"=>{"number"=>"", "title_en"=>"Outdoor gym", "description_en"=>"", "cost"=>"399", "adjustable_cost"=>"0", "cost_min"=>"0", "cost_step"=>"1", "uses_slider"=>"0", "address_en"=>"", "category_id"=>"", "image_cache"=>"", "image_description_en"=>"", "map_geometry"=>"", "video_url_en"=>"", "details_en"=>"", "data"=>""}, "commit"=>"Save", "election_id"=>"3"}
  [1m[35m (19.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/new', 'http://localhost:3000/admin/elections/3/projects', 'POST', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Maximum (2.2ms)[0m  [1m[34mSELECT MAX(`projects`.`sort_order`) FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (1.0ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `map_geometry`, `sort_order`, `data`, `created_at`, `updated_at`) VALUES (3, '', 399, '', 1, '', '2024-03-24 23:18:36', '2024-03-24 23:18:36')[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 27 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.8ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`, `details`, `address`, `video_url`, `image_description`) VALUES (27, 'en', '2024-03-24 23:18:36', '2024-03-24 23:18:36', 'Outdoor gym', '', '', '', '', '')[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 72ms (ActiveRecord: 29.2ms | Allocations: 5605)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:18:36 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (14.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/new', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 27.4ms | Allocations: 2812)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3199f68>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 44.3ms | Allocations: 6008)
Completed 200 OK in 73ms (Views: 42.2ms | ActiveRecord: 21.6ms | Allocations: 7331)


Started GET "/admin/elections/3/projects/27/edit" for ::1 at 2024-03-24 19:18:38 -0400
Processing by Admin::ProjectsController#edit as HTML
  Parameters: {"election_id"=>"3", "id"=>"27"}
  [1m[35m (12.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/27/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 AND `projects`.`id` = 27 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/edit.html.erb within layouts/application
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3[0m
  Rendered shared/_project_form.html.erb (Duration: 20.2ms | Allocations: 4345)
  Rendered shared/_admin_template.html.erb (Duration: 1.5ms | Allocations: 276)
  Rendered admin/projects/edit.html.erb within layouts/application (Duration: 25.0ms | Allocations: 4791)
[31mUnpermitted parameters: :election_id, :id. Context: { controller: Admin::ProjectsController, action: edit, request: #<ActionDispatch::Request:0x00007f9bc32be740>, params: {"controller"=>"admin/projects", "action"=>"edit", "election_id"=>"3", "id"=>"27"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 41.7ms | Allocations: 7984)
Completed 200 OK in 67ms (Views: 42.1ms | ActiveRecord: 16.8ms | Allocations: 9196)


Started PATCH "/admin/elections/3/projects/27" for ::1 at 2024-03-24 19:18:45 -0400
Processing by Admin::ProjectsController#update as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"DqMPaDDLroc/+QljVl6ofELPVRsLkmFIMpk7YWgmOJOv0Qi/x0xGTtd5ERpFWaAcPP9NeALjxGHqqp4ZIEtWDA==", "project"=>{"number"=>"", "title_en"=>"Outdoor gym", "description_en"=>"Example 2", "cost"=>"400", "adjustable_cost"=>"0", "cost_min"=>"0", "cost_step"=>"1", "uses_slider"=>"0", "address_en"=>"", "category_id"=>"", "image_cache"=>"", "image_description_en"=>"", "map_geometry"=>"", "video_url_en"=>"", "details_en"=>"", "external_vote_count"=>"", "data"=>""}, "commit"=>"Save", "election_id"=>"3", "id"=>"27"}
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/27/edit', 'http://localhost:3000/admin/elections/3/projects/27', 'POST', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 AND `projects`.`id` = 27 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject Update (0.7ms)[0m  [1m[33mUPDATE `projects` SET `projects`.`cost` = 400, `projects`.`updated_at` = '2024-03-24 23:18:45' WHERE `projects`.`id` = 27[0m
  [1m[36mProject::Translation Update (0.5ms)[0m  [1m[33mUPDATE `project_translations` SET `project_translations`.`updated_at` = '2024-03-24 23:18:45', `project_translations`.`description` = 'Example 2' WHERE `project_translations`.`id` = 27[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 29ms (ActiveRecord: 8.4ms | Allocations: 5265)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:18:45 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (2.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/27/edit', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.6ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 16.6ms | Allocations: 2947)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3a0e748>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.6ms | Allocations: 6142)
Completed 200 OK in 37ms (Views: 25.3ms | ActiveRecord: 6.1ms | Allocations: 7470)


Started GET "/admin/elections/3/projects/new" for ::1 at 2024-03-24 19:18:48 -0400
Processing by Admin::ProjectsController#new as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (14.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/new', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/new.html.erb within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3[0m
  Rendered shared/_project_form.html.erb (Duration: 17.0ms | Allocations: 3863)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 276)
  Rendered admin/projects/new.html.erb within layouts/application (Duration: 20.6ms | Allocations: 4293)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: new, request: #<ActionDispatch::Request:0x00007f9bc3bd1698>, params: {"controller"=>"admin/projects", "action"=>"new", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 38.3ms | Allocations: 7479)
Completed 200 OK in 64ms (Views: 39.7ms | ActiveRecord: 17.3ms | Allocations: 8230)


Started POST "/admin/elections/3/projects" for ::1 at 2024-03-24 19:19:00 -0400
Processing by Admin::ProjectsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"EfEaVKIHuWDf+c5UUVGV237o4hRcNjZeYfPQlT0solywgx2DVYBRqTd51i1CVp27ANj6d1VHk3e5wHXtdUHMww==", "project"=>{"number"=>"", "title_en"=>"New Park", "description_en"=>"Example 3", "cost"=>"250", "adjustable_cost"=>"0", "cost_min"=>"0", "cost_step"=>"1", "uses_slider"=>"0", "address_en"=>"", "category_id"=>"", "image_cache"=>"", "image_description_en"=>"", "map_geometry"=>"", "video_url_en"=>"", "details_en"=>"", "data"=>""}, "commit"=>"Save", "election_id"=>"3"}
  [1m[35m (3.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/new', 'http://localhost:3000/admin/elections/3/projects', 'POST', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Maximum (0.9ms)[0m  [1m[34mSELECT MAX(`projects`.`sort_order`) FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (1.0ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `map_geometry`, `sort_order`, `data`, `created_at`, `updated_at`) VALUES (3, '', 250, '', 2, '', '2024-03-24 23:19:00', '2024-03-24 23:19:00')[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 28 LIMIT 1[0m
  [1m[36mProject::Translation Create (1.1ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`, `details`, `address`, `video_url`, `image_description`) VALUES (28, 'en', '2024-03-24 23:19:00', '2024-03-24 23:19:00', 'New Park', 'Example 3', '', '', '', '')[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 49ms (ActiveRecord: 13.1ms | Allocations: 5705)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:19:01 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (4.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/new', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 35.3ms | Allocations: 3737)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c1008ef68>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 53.0ms | Allocations: 6932)
Completed 200 OK in 71ms (Views: 49.9ms | ActiveRecord: 11.7ms | Allocations: 8255)


Started GET "/admin/elections/3/projects/new" for ::1 at 2024-03-24 19:19:04 -0400
Processing by Admin::ProjectsController#new as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (3.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/new', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/new.html.erb within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3[0m
  Rendered shared/_project_form.html.erb (Duration: 17.8ms | Allocations: 3866)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 276)
  Rendered admin/projects/new.html.erb within layouts/application (Duration: 21.3ms | Allocations: 4296)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: new, request: #<ActionDispatch::Request:0x00007f9c1088f140>, params: {"controller"=>"admin/projects", "action"=>"new", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 38.8ms | Allocations: 7482)
Completed 200 OK in 52ms (Views: 40.0ms | ActiveRecord: 6.2ms | Allocations: 8236)


Started POST "/admin/elections/3/projects" for ::1 at 2024-03-24 19:19:15 -0400
Processing by Admin::ProjectsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"qpiMSPYU2+lbp6uhogHPZDlMng+Uw8ewxtMuCIBfEfAL6oufAZMzILMns9ixBscER3yGbJ2yYpke4ItwyDJ/bw==", "project"=>{"number"=>"", "title_en"=>"New Playground", "description_en"=>"example 4", "cost"=>"200", "adjustable_cost"=>"0", "cost_min"=>"0", "cost_step"=>"1", "uses_slider"=>"0", "address_en"=>"", "category_id"=>"", "image_cache"=>"", "image_description_en"=>"", "map_geometry"=>"", "video_url_en"=>"", "details_en"=>"", "data"=>""}, "commit"=>"Save", "election_id"=>"3"}
  [1m[35m (3.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/new', 'http://localhost:3000/admin/elections/3/projects', 'POST', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Maximum (1.0ms)[0m  [1m[34mSELECT MAX(`projects`.`sort_order`) FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (1.0ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `map_geometry`, `sort_order`, `data`, `created_at`, `updated_at`) VALUES (3, '', 200, '', 3, '', '2024-03-24 23:19:15', '2024-03-24 23:19:15')[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 29 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.8ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`, `details`, `address`, `video_url`, `image_description`) VALUES (29, 'en', '2024-03-24 23:19:15', '2024-03-24 23:19:15', 'New Playground', 'example 4', '', '', '', '')[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 48ms (ActiveRecord: 12.2ms | Allocations: 5708)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:19:15 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (14.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/new', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 39.4ms | Allocations: 4528)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c138f8f20>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 56.8ms | Allocations: 7723)
Completed 200 OK in 86ms (Views: 53.4ms | ActiveRecord: 22.5ms | Allocations: 9053)


Started GET "/admin/elections/3/projects/new" for ::1 at 2024-03-24 19:19:18 -0400
Processing by Admin::ProjectsController#new as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (14.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/projects/new', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/new.html.erb within layouts/application
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 3[0m
  Rendered shared/_project_form.html.erb (Duration: 16.2ms | Allocations: 3863)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 276)
  Rendered admin/projects/new.html.erb within layouts/application (Duration: 20.0ms | Allocations: 4293)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: new, request: #<ActionDispatch::Request:0x00007f9c159b5a10>, params: {"controller"=>"admin/projects", "action"=>"new", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 37.8ms | Allocations: 7479)
Completed 200 OK in 64ms (Views: 39.6ms | ActiveRecord: 17.4ms | Allocations: 8215)


Started POST "/admin/elections/3/projects" for ::1 at 2024-03-24 19:19:33 -0400
Processing by Admin::ProjectsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"QqU/N30+AYbSzl/f28TpNrZR+resux0SB48xTIqfwBzj1zjgirnpTzpOR6bIw+FWyGHi1KXKuDvfvJQ0wvKugw==", "project"=>{"number"=>"", "title_en"=>"Library", "description_en"=>"Example 5", "cost"=>"100", "adjustable_cost"=>"0", "cost_min"=>"0", "cost_step"=>"1", "uses_slider"=>"0", "address_en"=>"", "category_id"=>"", "image_cache"=>"", "image_description_en"=>"", "map_geometry"=>"", "video_url_en"=>"", "details_en"=>"", "data"=>""}, "commit"=>"Save", "election_id"=>"3"}
  [1m[35m (5.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/new', 'http://localhost:3000/admin/elections/3/projects', 'POST', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mProject Maximum (0.6ms)[0m  [1m[34mSELECT MAX(`projects`.`sort_order`) FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.5ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `map_geometry`, `sort_order`, `data`, `created_at`, `updated_at`) VALUES (3, '', 100, '', 4, '', '2024-03-24 23:19:33', '2024-03-24 23:19:33')[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 30 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.7ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`, `details`, `address`, `video_url`, `image_description`) VALUES (30, 'en', '2024-03-24 23:19:33', '2024-03-24 23:19:33', 'Library', 'Example 5', '', '', '', '')[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/3/projects
Completed 302 Found in 35ms (ActiveRecord: 11.6ms | Allocations: 5696)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:19:33 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (13.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects/new', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 50.8ms | Allocations: 5318)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c10c49f60>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 70.3ms | Allocations: 8543)
Completed 200 OK in 98ms (Views: 65.2ms | ActiveRecord: 23.0ms | Allocations: 9857)


Started GET "/equal-shares-demo/free_signup" for ::1 at 2024-03-24 19:19:42 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (3.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo', 'http://localhost:3000/equal-shares-demo/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 76.5ms | Allocations: 657)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9c100b1f40>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 98.5ms | Allocations: 4001)
Completed 200 OK in 114ms (Views: 100.2ms | ActiveRecord: 6.2ms | Allocations: 4819)


Started POST "/equal-shares-demo/post_free_signup" for ::1 at 2024-03-24 19:19:44 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"Sx28Dfm3XN4w9YaQobdov6sggYTnU1TYg7WIENd37o7qb7vaDjC0F9h1numysGDf1RCZ5+4i8fFbhi1onxqAEQ==", "election_slug"=>"equal-shares-demo"}
  [1m[35m (3.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-24 23:18:44.969403') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '84e4ffa815231762600609ba55f75e5a' AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (3.1ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (3, 'free', '84e4ffa815231762600609ba55f75e5a', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:19:44', '2024-03-24 23:19:44')[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '84e4ffa815231762600609ba55f75e5a' AND `voters`.`id` != 6 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 6[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/equal-shares-demo/knapsack
Completed 302 Found in 52ms (ActiveRecord: 20.4ms | Allocations: 2917)


Started GET "/equal-shares-demo/knapsack" for ::1 at 2024-03-24 19:19:45 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (3.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 6 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack', `voters`.`updated_at` = '2024-03-24 23:19:45' WHERE `voters`.`id` = 6[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '84e4ffa815231762600609ba55f75e5a' AND `voters`.`id` != 6 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322385}}' WHERE `voters`.`id` = 6[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 9.3ms | Allocations: 361)
  Rendered shared/_sidebar.html.erb (Duration: 23.9ms | Allocations: 884)
  Rendered shared/_project.html.erb (Duration: 124.5ms | Allocations: 2372)
  Rendered shared/_project.html.erb (Duration: 0.4ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 0.3ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 0.5ms | Allocations: 315)
  Rendered shared/_project.html.erb (Duration: 0.3ms | Allocations: 314)
  Rendered shared/_project_list.html.erb (Duration: 197.7ms | Allocations: 5405)
  Rendered shared/themes/_theme_2.html (Duration: 5.7ms | Allocations: 67)
  Rendered shared/_approval_js.html.erb (Duration: 32.6ms | Allocations: 4668)
  Rendered shared/_timer.html.erb (Duration: 25.3ms | Allocations: 408)
  Rendered vote/approval.html.erb within layouts/application (Duration: 505.8ms | Allocations: 15663)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9bc3406b98>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 514.7ms | Allocations: 18987)
Completed 200 OK in 611ms (Views: 517.2ms | ActiveRecord: 30.0ms | Allocations: 28207)


Started GET "/equal-shares-demo/free_signup" for ::1 at 2024-03-24 19:19:54 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (15.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo', 'http://localhost:3000/equal-shares-demo/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 6 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 1.4ms | Allocations: 203)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9bc3517f00>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 21.8ms | Allocations: 3518)
Completed 200 OK in 52ms (Views: 23.2ms | ActiveRecord: 18.8ms | Allocations: 4469)


Started GET "/admin/elections/3/edit" for ::1 at 2024-03-24 19:19:56 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (6.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 75.5ms | Allocations: 115617)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 80.7ms | Allocations: 116042)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9bc39f7db8>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 86.7ms | Allocations: 118939)
Completed 200 OK in 242ms (Views: 87.8ms | ActiveRecord: 7.1ms | Allocations: 157842)


Started GET "/admin/elections/3/projects" for ::1 at 2024-03-24 19:20:01 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/edit', 'http://localhost:3000/admin/elections/3/projects', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 277)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 47.2ms | Allocations: 5318)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc31ed3e8>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 65.0ms | Allocations: 8515)
Completed 200 OK in 83ms (Views: 59.9ms | ActiveRecord: 13.4ms | Allocations: 9852)


Started GET "/equal-shares-demo/free_signup" for ::1 at 2024-03-24 19:20:05 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (13.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo', 'http://localhost:3000/equal-shares-demo/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 6 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 1.4ms | Allocations: 203)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9bc3524c50>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 22.5ms | Allocations: 3518)
Completed 200 OK in 49ms (Views: 24.0ms | ActiveRecord: 16.7ms | Allocations: 4445)


Started POST "/equal-shares-demo/post_free_signup" for ::1 at 2024-03-24 19:20:08 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"miSPUvdqVGEzTTUZsmxHwUubJGNZQcqhrT9Vpq4Fsr47VoiFAO28qNvNLWCha0+hNas8AFAwb4h1DPDe5mjcIQ==", "election_slug"=>"equal-shares-demo"}
  [1m[35m (14.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 6 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mActivityLog Count (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-24 23:19:08.746233') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'f82659d4427b475ea5bc41ab3b4d8756' AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (0.9ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (3, 'free', 'f82659d4427b475ea5bc41ab3b4d8756', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:20:08', '2024-03-24 23:20:08')[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'f82659d4427b475ea5bc41ab3b4d8756' AND `voters`.`id` != 7 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.0ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 7[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/equal-shares-demo/knapsack
Completed 302 Found in 56ms (ActiveRecord: 28.3ms | Allocations: 2432)


Started GET "/equal-shares-demo/knapsack" for ::1 at 2024-03-24 19:20:08 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (15.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 7 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 7[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'f82659d4427b475ea5bc41ab3b4d8756' AND `voters`.`id` != 7 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322408}}' WHERE `voters`.`id` = 7[0m
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.6ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 0.9ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 315)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.8ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 314)
  Rendered shared/_project_list.html.erb (Duration: 13.1ms | Allocations: 2107)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 4.2ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 0.6ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 29.5ms | Allocations: 5470)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9bc3be99c8>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 49.3ms | Allocations: 8792)
Completed 200 OK in 137ms (Views: 50.8ms | ActiveRecord: 37.3ms | Allocations: 14352)


Started GET "/equal-shares-demo/knapsack" for ::1 at 2024-03-24 19:20:15 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (12.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 7 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'f82659d4427b475ea5bc41ab3b4d8756' AND `voters`.`id` != 7 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322415}}', `voters`.`updated_at` = '2024-03-24 23:20:15' WHERE `voters`.`id` = 7[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 1.1ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 1.0ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 315)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.4ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 314)
  Rendered shared/_project_list.html.erb (Duration: 12.8ms | Allocations: 2107)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 3.8ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 0.7ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 30.5ms | Allocations: 5470)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9c1006ad20>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 51.5ms | Allocations: 8792)
Completed 200 OK in 108ms (Views: 53.0ms | ActiveRecord: 24.0ms | Allocations: 14179)


Started GET "/equal-shares-demo/thanks" for ::1 at 2024-03-24 19:20:17 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (13.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/knapsack', 'http://localhost:3000/equal-shares-demo/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 7 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-24 23:20:17' WHERE `voters`.`id` = 7[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'f82659d4427b475ea5bc41ab3b4d8756' AND `voters`.`id` != 7 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322415,\"thanks\":1711322417}}' WHERE `voters`.`id` = 7[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.8ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 57.1ms | Allocations: 585)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c10177948>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 78.0ms | Allocations: 3908)
Completed 200 OK in 134ms (Views: 79.5ms | ActiveRecord: 28.1ms | Allocations: 6075)


Started GET "/admin/elections/3/edit" for ::1 at 2024-03-24 19:20:23 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/projects', 'http://localhost:3000/admin/elections/3/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 77.0ms | Allocations: 115618)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 82.1ms | Allocations: 116043)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c1229f3c8>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 87.7ms | Allocations: 118939)
Completed 200 OK in 297ms (Views: 89.1ms | ActiveRecord: 3.6ms | Allocations: 157855)


Started PATCH "/admin/elections/3" for ::1 at 2024-03-24 19:20:29 -0400
Processing by Admin::ElectionsController#update as JSON
  Parameters: {"utf8"=>"âœ“", "election"=>{"config_yaml"=>"workflow: [knapsack, thanks]\r\navailable_locales: [en]\r\ndefault_locale: en\r\nshow_public_results: false\r\nallow_local_voting: false\r\nallow_remote_voting: true\r\nremote_voting_free_verification: true\r\nfree_verification_use_captcha: false\r\nknapsack:\r\n  has_budget_limit: true\r\n  has_n_project_limit: false\r\n  total_tokens: 15\r\n  max_n_projects: 4\r\n  shuffle_projects: true\r\n", "name"=>"equal-shares-demo", "slug"=>"equal-shares-demo", "budget"=>"1100", "time_zone"=>"International Date Line West", "allow_admins_to_update_election"=>"1", "allow_admins_to_see_voter_data"=>"1", "allow_admins_to_see_exact_results"=>"1", "real_election"=>"1", "remarks"=>""}, "mce_0"=>"<p><img style=\"margin-left: auto; margin-right: auto; display: block;\" src=\"../../../img/sample-city-logo.png\" /></p>\r\n<p class=\"lead\">Welcome to the Participatory Budgeting sample digital ballot, courtesy of the Stanford Crowdsourced Democracy Team.</p>\r\n<p class=\"lead\">On this website, you can familiarize yourself with this year&rsquo;s projects and the digital ballot. This website is only informational, and you <strong>cannot</strong> cast your actual vote here.</p>\r\n<p class=\"lead\">When you cast your <u>actual ballot</u>, you will be deciding how you want to allocate $XXX million of the city's capital improvement budget. In order to vote, you need to come to one of the many voting sites that will be located throughout the city. The voting will be held from (Date XXX) to (Date YYY). See all times and locations below.</p>", "mce_2"=>"<h3>Voting Locations</h3>\r\n<p><strong>Saturday, September 27</strong> &nbsp; (12:00 noon - 4:00 p.m.)<br />Somewhere<br /><br /><strong>Tuesday, September 30</strong> &nbsp; (6:00 p.m. - 9:00 p.m.)<br />Somewhere<br /><br /></p>\r\n<p>For more information, please visit <a href=\"http://www.example.com/\">http://www.example.com/</a></p>", "mce_3"=>"<p style=\"font-size: 20px;\">You will now be asked to participate in an activity that will <u>not</u> affect your vote, but is part of a Stanford University research project meant to help us improve the participatory budgeting process.</p>\r\n<ul style=\"font-size: 20px;\">\r\n<li>Participating in this activity is optional. You can exit at any time.</li>\r\n<li>The expected time for this activity is 2-3 minutes.</li>\r\n</ul>\r\n<p style=\"font-size: 14px;\">This study poses no risk. No payment will be made to you for participation, and we cannot guarantee any benefits to you. You have the right to refuse to answer particular questions. Please contact Professor Ashish Goel at goel_admins@lists.stanford.edu if you have any questions, suggestions, or concerns. You may also contact the Stanford Institutional Review Board at 650-723-2480.</p>", "mce_4"=>"<h3>Instructions</h3>\r\n<ol>\r\n<li>Select the projects you would like to support. The total cost cannot exceed <strong>%{budget}</strong>.</li>\r\n<li>You can see the total amount you have allocated so far in the bar above. You can remove any previously selected projects by clicking on the bar or directly by clicking on the chosen project.</li>\r\n<li>Click the <strong>\"Submit My Vote\"</strong> button when you're ready to submit.</li>\r\n</ol>", "commit"=>"Save", "id"=>"3"}
  [1m[35m (14.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/edit', 'http://localhost:3000/admin/elections/3', 'POST', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mElection Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' AND `elections`.`id` != 3 LIMIT 1[0m
  [1m[36mElection Update (1.1ms)[0m  [1m[33mUPDATE `elections` SET `elections`.`budget` = 1100, `elections`.`updated_at` = '2024-03-24 23:20:29' WHERE `elections`.`id` = 3[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 38ms (Views: 0.3ms | ActiveRecord: 22.0ms | Allocations: 1500)


Started GET "/equal-shares-demo/thanks" for ::1 at 2024-03-24 19:20:34 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (12.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/knapsack', 'http://localhost:3000/equal-shares-demo/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 7 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'f82659d4427b475ea5bc41ab3b4d8756' AND `voters`.`id` != 7 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.1ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322415,\"thanks\":1711322434}}', `voters`.`updated_at` = '2024-03-24 23:20:34' WHERE `voters`.`id` = 7[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.5ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 2.6ms | Allocations: 315)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c122d58d8>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.3ms | Allocations: 3638)
Completed 200 OK in 62ms (Views: 24.9ms | ActiveRecord: 21.2ms | Allocations: 6360)


Started GET "/equal-shares-demo/done" for ::1 at 2024-03-24 19:20:36 -0400
Processing by VoteController#done as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/thanks', 'http://localhost:3000/equal-shares-demo/done', 'GET', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 7 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'done', `voters`.`updated_at` = '2024-03-24 23:20:36' WHERE `voters`.`id` = 7[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'f82659d4427b475ea5bc41ab3b4d8756' AND `voters`.`id` != 7 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.9ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322415,\"thanks\":1711322434,\"done\":1711322436}}' WHERE `voters`.`id` = 7[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/equal-shares-demo?locale=en
Completed 302 Found in 27ms (ActiveRecord: 12.0ms | Allocations: 2023)


Started GET "/equal-shares-demo?locale=en" for ::1 at 2024-03-24 19:20:36 -0400
Processing by VoteController#index as HTML
  Parameters: {"locale"=>"en", "election_slug"=>"equal-shares-demo"}
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/thanks', 'http://localhost:3000/equal-shares-demo?locale=en', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 2.0ms | Allocations: 289)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameters: :locale, :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9bc31fe440>, params: {"locale"=>"en", "controller"=>"vote", "action"=>"index", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 21.5ms | Allocations: 3703)
Completed 200 OK in 37ms (Views: 22.9ms | ActiveRecord: 6.6ms | Allocations: 4463)


Started GET "/equal-shares-demo/free_signup" for ::1 at 2024-03-24 19:20:38 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (14.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo?locale=en', 'http://localhost:3000/equal-shares-demo/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 0.9ms | Allocations: 203)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9c138d9d00>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | Allocations: 3551)
Completed 200 OK in 35ms (Views: 15.4ms | ActiveRecord: 15.9ms | Allocations: 4319)


Started POST "/equal-shares-demo/post_free_signup" for ::1 at 2024-03-24 19:20:41 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"wLs21Q8ZQquzIuOH1z3t3dV6FkoqBAcxRXa7Iw0YPYJhyTEC+J6qYlui+/7EOuW9q0oOKSN1ohidRR5bRXVTHQ==", "election_slug"=>"equal-shares-demo"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-24 23:19:41.302317') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '147641d8322c09d5490f4b5b90fde68a' AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (0.8ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (3, 'free', '147641d8322c09d5490f4b5b90fde68a', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:20:41', '2024-03-24 23:20:41')[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '147641d8322c09d5490f4b5b90fde68a' AND `voters`.`id` != 8 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 8[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/equal-shares-demo/knapsack
Completed 302 Found in 45ms (ActiveRecord: 23.7ms | Allocations: 2247)


Started GET "/equal-shares-demo/knapsack" for ::1 at 2024-03-24 19:20:41 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (17.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 8 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.1ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 8[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '147641d8322c09d5490f4b5b90fde68a' AND `voters`.`id` != 8 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322441}}' WHERE `voters`.`id` = 8[0m
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.7ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 1.0ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 315)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.5ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 314)
  Rendered shared/_project_list.html.erb (Duration: 12.7ms | Allocations: 2107)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 3.7ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 0.6ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 29.6ms | Allocations: 5470)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9bc39d9750>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 49.8ms | Allocations: 8803)
Completed 200 OK in 141ms (Views: 51.3ms | ActiveRecord: 39.8ms | Allocations: 14351)


Started POST "/equal-shares-demo/submit_knapsack" for ::1 at 2024-03-24 19:20:53 -0400
Processing by VoteController#submit_knapsack as HTML
  Parameters: {"project"=>{"22"=>"700", "27"=>"400", "28"=>"0", "29"=>"0", "30"=>"0"}, "project_rank"=>{"22"=>"0", "27"=>"0", "28"=>"0", "29"=>"0", "30"=>"0"}, "authenticity_token"=>"RcpPI55MvZwiszXB0nUu6TeSjkW94bXth5qqEagpJd/kuEj0actVVcozLbjBciaJSaKWJrSQEMRfqQ9p4ERLQA==", "election_slug"=>"equal-shares-demo"}
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/knapsack', 'http://localhost:3000/equal-shares-demo/submit_knapsack', 'POST', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 8 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mVoteKnapsack Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `vote_knapsacks` WHERE `vote_knapsacks`.`voter_id` = 8 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mVoteKnapsack Create (0.5ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (8, 22, 700, '2024-03-24 23:20:53', '2024-03-24 23:20:53')[0m
  [1m[36mVoteKnapsack Create (0.4ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (8, 27, 400, '2024-03-24 23:20:53', '2024-03-24 23:20:53')[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/equal-shares-demo/thanks
Completed 302 Found in 28ms (ActiveRecord: 10.1ms | Allocations: 4512)


Started GET "/equal-shares-demo/thanks" for ::1 at 2024-03-24 19:20:53 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/knapsack', 'http://localhost:3000/equal-shares-demo/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 8 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-24 23:20:53' WHERE `voters`.`id` = 8[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '147641d8322c09d5490f4b5b90fde68a' AND `voters`.`id` != 8 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322441,\"thanks\":1711322453}}' WHERE `voters`.`id` = 8[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 1.3ms | Allocations: 315)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9bc3455518>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 11.3ms | Allocations: 3638)
Completed 200 OK in 37ms (Views: 12.1ms | ActiveRecord: 11.4ms | Allocations: 5725)


Started GET "/admin/elections/3/analytics" for ::1 at 2024-03-24 19:20:55 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (3.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/edit', 'http://localhost:3000/admin/elections/3/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '3', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:20:55', '2024-03-24 23:20:55')[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mVoter Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 3 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 3 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 22 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 27 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 28 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 29 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 30 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 3 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 281)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.5ms | Allocations: 1570)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc39f3b78>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.6ms | Allocations: 4766)
Completed 200 OK in 132ms (Views: 28.1ms | ActiveRecord: 29.2ms | Allocations: 13140)


Started GET "/equal-shares-demo/done" for ::1 at 2024-03-24 19:21:00 -0400
Processing by VoteController#done as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (6.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/thanks', 'http://localhost:3000/equal-shares-demo/done', 'GET', NOW())[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 8 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'done', `voters`.`updated_at` = '2024-03-24 23:21:00' WHERE `voters`.`id` = 8[0m
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '147641d8322c09d5490f4b5b90fde68a' AND `voters`.`id` != 8 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.4ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322441,\"thanks\":1711322453,\"done\":1711322460}}' WHERE `voters`.`id` = 8[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/equal-shares-demo?locale=en
Completed 302 Found in 47ms (ActiveRecord: 21.7ms | Allocations: 2027)


Started GET "/equal-shares-demo?locale=en" for ::1 at 2024-03-24 19:21:00 -0400
Processing by VoteController#index as HTML
  Parameters: {"locale"=>"en", "election_slug"=>"equal-shares-demo"}
  [1m[35m (3.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/thanks', 'http://localhost:3000/equal-shares-demo?locale=en', 'GET', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 1.8ms | Allocations: 288)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameters: :locale, :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c10068ac0>, params: {"locale"=>"en", "controller"=>"vote", "action"=>"index", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.2ms | Allocations: 3701)
Completed 200 OK in 39ms (Views: 24.8ms | ActiveRecord: 6.8ms | Allocations: 4470)


Started GET "/equal-shares-demo/free_signup" for ::1 at 2024-03-24 19:21:02 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (14.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo?locale=en', 'http://localhost:3000/equal-shares-demo/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 0.9ms | Allocations: 203)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9c100d23a8>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 19.5ms | Allocations: 3518)
Completed 200 OK in 43ms (Views: 20.7ms | ActiveRecord: 17.2ms | Allocations: 4274)


Started GET "/admin/elections/3/voters" for ::1 at 2024-03-24 19:21:06 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/analytics', 'http://localhost:3000/admin/elections/3/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 3 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.6ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (6, 7, 8)[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 278)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 8.1ms | Allocations: 1237)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c1226c8b0>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | Allocations: 4432)
Completed 200 OK in 30ms (Views: 20.9ms | ActiveRecord: 4.9ms | Allocations: 5309)


Started PATCH "/admin/elections/3/voters/8" for ::1 at 2024-03-24 19:21:21 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"3", "id"=>"8"}
  [1m[35m (13.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/voters', 'http://localhost:3000/admin/elections/3/voters/8', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 8 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.5ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:21:21' WHERE `voters`.`id` = 8[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 25ms (Views: 0.1ms | ActiveRecord: 17.8ms | Allocations: 1060)


Started GET "/admin/elections/3/analytics" for ::1 at 2024-03-24 19:21:24 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (6.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/voters', 'http://localhost:3000/admin/elections/3/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '3', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:21:24', '2024-03-24 23:21:24')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mVoter Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 3 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 3 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 22 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 27 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 28 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 29 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 30 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 3 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.9ms | Allocations: 201)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 281)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 6.9ms | Allocations: 1392)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c15a5ed90>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 33.2ms | Allocations: 4589)
Completed 200 OK in 143ms (Views: 35.8ms | ActiveRecord: 32.4ms | Allocations: 12763)


Started POST "/equal-shares-demo/post_free_signup" for ::1 at 2024-03-24 19:21:32 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"m+RLy6LZWOQv/OA5sQX6biAszr8bDc/wHjMV0xHtNSM6lkwcVV6wLcd8+ECiAvIOXhzW3BJ8atnGALCrWYBbvA==", "election_slug"=>"equal-shares-demo"}
  [1m[35m (4.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-24 23:20:32.650449') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '31216a7a7046cf8dc2649adbc188377b' AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (1.0ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (3, 'free', '31216a7a7046cf8dc2649adbc188377b', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:21:32', '2024-03-24 23:21:32')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '31216a7a7046cf8dc2649adbc188377b' AND `voters`.`id` != 9 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 9[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/equal-shares-demo/knapsack
Completed 302 Found in 56ms (ActiveRecord: 18.3ms | Allocations: 2259)


Started GET "/equal-shares-demo/knapsack" for ::1 at 2024-03-24 19:21:32 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (3.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (1.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 9 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 9[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '31216a7a7046cf8dc2649adbc188377b' AND `voters`.`id` != 9 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322492}}' WHERE `voters`.`id` = 9[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.7ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 1.0ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 2.0ms | Allocations: 315)
  Rendered shared/_project.html.erb (Duration: 1.7ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 314)
  Rendered shared/_project_list.html.erb (Duration: 15.5ms | Allocations: 2107)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 4.7ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 0.7ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 34.3ms | Allocations: 5470)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9c10befbf0>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 54.5ms | Allocations: 8822)
Completed 200 OK in 135ms (Views: 56.4ms | ActiveRecord: 25.7ms | Allocations: 14364)


Started GET "/admin/elections/3/voters" for ::1 at 2024-03-24 19:21:34 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (13.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/analytics', 'http://localhost:3000/admin/elections/3/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 3 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.5ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (6, 7, 8, 9)[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 278)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 7.4ms | Allocations: 1336)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc32b9ba0>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 20.9ms | Allocations: 4531)
Completed 200 OK in 42ms (Views: 21.4ms | ActiveRecord: 15.9ms | Allocations: 5402)


Started GET "/admin/elections/3/users" for ::1 at 2024-03-24 19:21:35 -0400
Processing by Admin::UsersController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (13.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/voters', 'http://localhost:3000/admin/elections/3/users', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/users/index.html.erb within layouts/application
  [1m[36mElectionUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `election_users` WHERE `election_users`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.8ms | Allocations: 313)
  Rendered admin/users/index.html.erb within layouts/application (Duration: 155.8ms | Allocations: 1482)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::UsersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3459118>, params: {"controller"=>"admin/users", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 169.1ms | Allocations: 4747)
Completed 200 OK in 243ms (Views: 172.1ms | ActiveRecord: 20.1ms | Allocations: 8071)


Started GET "/admin/elections/3/voters" for ::1 at 2024-03-24 19:21:37 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (14.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/users', 'http://localhost:3000/admin/elections/3/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 3 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.7ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (6, 7, 8, 9)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 278)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 11.2ms | Allocations: 1337)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc39d30d0>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 28.5ms | Allocations: 4532)
Completed 200 OK in 53ms (Views: 29.3ms | ActiveRecord: 17.5ms | Allocations: 5410)


Started GET "/admin/elections/3/analytics" for ::1 at 2024-03-24 19:21:43 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (15.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/voters', 'http://localhost:3000/admin/elections/3/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '3', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:21:43', '2024-03-24 23:21:43')[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mProject Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mVoter Count (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 3 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 3 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 22 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 27 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 28 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 29 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 30 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 3 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.8ms | Allocations: 201)
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 281)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 6.8ms | Allocations: 1392)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3bc8700>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 22.5ms | Allocations: 4588)
Completed 200 OK in 143ms (Views: 24.3ms | ActiveRecord: 42.9ms | Allocations: 12776)


Started GET "/admin/elections/3/users" for ::1 at 2024-03-24 19:21:46 -0400
Processing by Admin::UsersController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (13.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/analytics', 'http://localhost:3000/admin/elections/3/users', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/users/index.html.erb within layouts/application
  [1m[36mElectionUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `election_users` WHERE `election_users`.`election_id` = 3 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 278)
  Rendered admin/users/index.html.erb within layouts/application (Duration: 4.9ms | Allocations: 550)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::UsersController, action: index, request: #<ActionDispatch::Request:0x00007f9c146b1180>, params: {"controller"=>"admin/users", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 22.8ms | Allocations: 3745)
Completed 200 OK in 46ms (Views: 24.5ms | ActiveRecord: 15.9ms | Allocations: 4614)


Started GET "/admin/elections/3/voters" for ::1 at 2024-03-24 19:21:48 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (3.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/users', 'http://localhost:3000/admin/elections/3/voters', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 3 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (1.0ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (6, 7, 8, 9)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 278)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 12.2ms | Allocations: 1336)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c100b6180>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 29.4ms | Allocations: 4531)
Completed 200 OK in 45ms (Views: 29.9ms | ActiveRecord: 7.4ms | Allocations: 5395)


Started GET "/admin/elections/3/voters/7" for ::1 at 2024-03-24 19:21:52 -0400
Processing by Admin::VotersController#show as HTML
  Parameters: {"election_id"=>"3", "id"=>"7"}
  [1m[35m (2.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/voters', 'http://localhost:3000/admin/elections/3/voters/7', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 7 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/show.html.erb within layouts/application
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 278)
  Rendered admin/voters/show.html.erb within layouts/application (Duration: 6.0ms | Allocations: 821)
[31mUnpermitted parameters: :election_id, :id. Context: { controller: Admin::VotersController, action: show, request: #<ActionDispatch::Request:0x00007f9c10cbe4c8>, params: {"controller"=>"admin/voters", "action"=>"show", "election_id"=>"3", "id"=>"7"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 22.6ms | Allocations: 4023)
Completed 200 OK in 35ms (Views: 23.8ms | ActiveRecord: 5.3ms | Allocations: 4836)


Started GET "/admin/elections/3/voters" for ::1 at 2024-03-24 19:21:54 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"3"}
  [1m[35m (13.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/users', 'http://localhost:3000/admin/elections/3/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 3 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.8ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (6, 7, 8, 9)[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.8ms | Allocations: 278)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 11.2ms | Allocations: 1333)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c13973360>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.2ms | Allocations: 4528)
Completed 200 OK in 50ms (Views: 26.6ms | ActiveRecord: 16.4ms | Allocations: 5391)


Started PATCH "/admin/elections/3/voters/7" for ::1 at 2024-03-24 19:21:59 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"3", "id"=>"7"}
  [1m[35m (13.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/voters', 'http://localhost:3000/admin/elections/3/voters/7', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 7 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.1ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:21:59' WHERE `voters`.`id` = 7[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 19.8ms | Allocations: 1016)


Started PATCH "/admin/elections/3/voters/9" for ::1 at 2024-03-24 19:22:03 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"3", "id"=>"9"}
  [1m[35m (14.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/voters', 'http://localhost:3000/admin/elections/3/voters/9', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 9 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:22:03' WHERE `voters`.`id` = 9[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 19.4ms | Allocations: 1017)


Started PATCH "/admin/elections/3/voters/8" for ::1 at 2024-03-24 19:22:05 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"3", "id"=>"8"}
  [1m[35m (12.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/voters', 'http://localhost:3000/admin/elections/3/voters/8', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.3ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 8 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.4ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-24 23:22:05' WHERE `voters`.`id` = 8[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 15.7ms | Allocations: 1027)


Started GET "/admin/elections/3/analytics" for ::1 at 2024-03-24 19:22:08 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"3"}
  [1m[35m (14.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/voters', 'http://localhost:3000/admin/elections/3/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.7ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '3', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:22:08', '2024-03-24 23:22:08')[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject::Translation Load (1.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 3 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  [1m[36mVoter Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 3 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 3 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 22 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 27 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 28 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 29 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 30 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 3 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 3 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.8ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 281)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.0ms | Allocations: 1570)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c13972460>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"3"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.5ms | Allocations: 4796)
Completed 200 OK in 145ms (Views: 29.3ms | ActiveRecord: 40.2ms | Allocations: 13156)


Started POST "/equal-shares-demo/submit_knapsack" for ::1 at 2024-03-24 19:22:20 -0400
Processing by VoteController#submit_knapsack as HTML
  Parameters: {"project"=>{"22"=>"700", "27"=>"400", "28"=>"0", "29"=>"0", "30"=>"0"}, "project_rank"=>{"22"=>"0", "27"=>"0", "28"=>"0", "29"=>"0", "30"=>"0"}, "authenticity_token"=>"+vWdFEwhXXNOXayMHWjS2lxM09ckBys1aX/uB4KsnKlbh5rDu6a1uqbdtPUOb9q6InzLtC12jhyxTEt/ysHyNg==", "election_slug"=>"equal-shares-demo"}
  [1m[35m (16.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/knapsack', 'http://localhost:3000/equal-shares-demo/submit_knapsack', 'POST', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 9 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mVoteKnapsack Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `vote_knapsacks` WHERE `vote_knapsacks`.`voter_id` = 9 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mVoteKnapsack Create (1.1ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (9, 22, 700, '2024-03-24 23:22:20', '2024-03-24 23:22:20')[0m
  [1m[36mVoteKnapsack Create (0.8ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (9, 27, 400, '2024-03-24 23:22:20', '2024-03-24 23:22:20')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/equal-shares-demo/thanks
Completed 302 Found in 53ms (ActiveRecord: 27.3ms | Allocations: 2329)


Started GET "/equal-shares-demo/thanks" for ::1 at 2024-03-24 19:22:20 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (14.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/knapsack', 'http://localhost:3000/equal-shares-demo/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 9 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.4ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-24 23:22:20' WHERE `voters`.`id` = 9[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '31216a7a7046cf8dc2649adbc188377b' AND `voters`.`id` != 9 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322492,\"thanks\":1711322540}}' WHERE `voters`.`id` = 9[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 1.0ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 3.1ms | Allocations: 315)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9bc332bf48>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.9ms | Allocations: 3638)
Completed 200 OK in 80ms (Views: 25.6ms | ActiveRecord: 29.6ms | Allocations: 5730)


Started GET "/equal-shares-demo/done" for ::1 at 2024-03-24 19:22:24 -0400
Processing by VoteController#done as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (15.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/thanks', 'http://localhost:3000/equal-shares-demo/done', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 9 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'done', `voters`.`updated_at` = '2024-03-24 23:22:24' WHERE `voters`.`id` = 9[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '31216a7a7046cf8dc2649adbc188377b' AND `voters`.`id` != 9 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322492,\"thanks\":1711322540,\"done\":1711322544}}' WHERE `voters`.`id` = 9[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/equal-shares-demo?locale=en
Completed 302 Found in 54ms (ActiveRecord: 29.1ms | Allocations: 2023)


Started GET "/equal-shares-demo?locale=en" for ::1 at 2024-03-24 19:22:24 -0400
Processing by VoteController#index as HTML
  Parameters: {"locale"=>"en", "election_slug"=>"equal-shares-demo"}
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/thanks', 'http://localhost:3000/equal-shares-demo?locale=en', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 1.7ms | Allocations: 288)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameters: :locale, :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9bc39d6550>, params: {"locale"=>"en", "controller"=>"vote", "action"=>"index", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 21.8ms | Allocations: 3701)
Completed 200 OK in 37ms (Views: 23.3ms | ActiveRecord: 6.5ms | Allocations: 4449)


Started GET "/equal-shares-demo/free_signup" for ::1 at 2024-03-24 19:22:27 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (14.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo?locale=en', 'http://localhost:3000/equal-shares-demo/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 1.8ms | Allocations: 203)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9bc3bcf640>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.5ms | Allocations: 3518)
Completed 200 OK in 49ms (Views: 24.7ms | ActiveRecord: 17.3ms | Allocations: 4274)


Started POST "/equal-shares-demo/post_free_signup" for ::1 at 2024-03-24 19:22:30 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"BItdyN/QRjEQ29ZsiLyYJWtG4/QQzvw3de70EXmRMpWl+VofKFeu+PhbzhWbu5BFFXb7lxm/WR6t3VFpMfxcCg==", "election_slug"=>"equal-shares-demo"}
  [1m[35m (5.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-24 23:21:30.324877') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '4be4dcf5f3dbe06df08669ff1149f097' AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (1.2ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (3, 'free', '4be4dcf5f3dbe06df08669ff1149f097', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:22:30', '2024-03-24 23:22:30')[0m
  [1m[36mTRANSACTION (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '4be4dcf5f3dbe06df08669ff1149f097' AND `voters`.`id` != 10 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 10[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/equal-shares-demo/knapsack
Completed 302 Found in 51ms (ActiveRecord: 21.6ms | Allocations: 2267)


Started GET "/equal-shares-demo/knapsack" for ::1 at 2024-03-24 19:22:30 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (15.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/free_signup', 'http://localhost:3000/equal-shares-demo/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 10 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 10[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '4be4dcf5f3dbe06df08669ff1149f097' AND `voters`.`id` != 10 AND `voters`.`election_id` = 3 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711322550}}' WHERE `voters`.`id` = 10[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 3[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 22[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 27[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 28[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 29[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 30[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.7ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 1.0ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.7ms | Allocations: 315)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.1ms | Allocations: 314)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 314)
  Rendered shared/_project_list.html.erb (Duration: 13.4ms | Allocations: 2107)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 4.5ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 0.7ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 30.8ms | Allocations: 5470)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9c10066cc0>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 52.8ms | Allocations: 8792)
Completed 200 OK in 138ms (Views: 54.1ms | ActiveRecord: 36.1ms | Allocations: 14336)


Started GET "/admin" for ::1 at 2024-03-24 19:23:39 -0400
Processing by Admin::HomeController#index as HTML
  [1m[35m (5.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/3/analytics', 'http://localhost:3000/admin', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.3ms)[0m  [1m[34mSELECT elections.*, COUNT(voters.id) AS voter_count FROM `elections` LEFT OUTER JOIN voters ON voters.election_id = elections.id AND voters.void = false GROUP BY `elections`.`id`[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/home/index.html.erb within layouts/application
  Rendered shared/_election_list.html.erb (Duration: 1.5ms | Allocations: 266)
  Rendered shared/_admin_template.html.erb (Duration: 0.3ms | Allocations: 58)
  Rendered admin/home/index.html.erb within layouts/application (Duration: 4.7ms | Allocations: 486)
  Rendered layout layouts/application.html.erb (Duration: 21.5ms | Allocations: 3621)
Completed 200 OK in 40ms (Views: 24.2ms | ActiveRecord: 7.6ms | Allocations: 4512)


Started GET "/admin/elections/2" for ::1 at 2024-03-24 19:23:43 -0400
Processing by Admin::ElectionsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin', 'http://localhost:3000/admin/elections/2', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/show.html.erb within layouts/application
  [1m[36mProject Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 280)
  Rendered admin/elections/show.html.erb within layouts/application (Duration: 7.1ms | Allocations: 829)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: show, request: #<ActionDispatch::Request:0x00007f9c12287598>, params: {"controller"=>"admin/elections", "action"=>"show", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.7ms | Allocations: 4024)
Completed 200 OK in 50ms (Views: 26.3ms | ActiveRecord: 17.3ms | Allocations: 4754)


Started GET "/testing-mes" for ::1 at 2024-03-24 19:23:48 -0400
Processing by VoteController#index as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2', 'http://localhost:3000/testing-mes', 'GET', NOW())[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 10 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 288)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c159192f0>, params: {"controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 8.3ms | Allocations: 3694)
Completed 200 OK in 28ms (Views: 8.9ms | ActiveRecord: 14.8ms | Allocations: 4632)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:23:52 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:23:52', '2024-03-24 23:23:52')[0m
  [1m[36mTRANSACTION (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.7ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.9ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.0ms | Allocations: 1618)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3bfbb00>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 30.2ms | Allocations: 4838)
Completed 200 OK in 112ms (Views: 32.4ms | ActiveRecord: 33.7ms | Allocations: 13446)


Started GET "/admin/elections/2/edit" for ::1 at 2024-03-24 19:23:54 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 73.1ms | Allocations: 115617)
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 76.7ms | Allocations: 116042)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c10886860>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 82.2ms | Allocations: 118939)
Completed 200 OK in 230ms (Views: 83.2ms | ActiveRecord: 3.6ms | Allocations: 157860)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:24:06 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (13.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.5ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5)[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 7.2ms | Allocations: 1435)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3bf80e0>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 20.6ms | Allocations: 4630)
Completed 200 OK in 42ms (Views: 21.3ms | ActiveRecord: 15.5ms | Allocations: 5503)


Started GET "/admin/elections/2/files" for ::1 at 2024-03-24 19:24:17 -0400
Processing by Admin::FilesController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (13.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/files', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/files/index.html.erb within layouts/application
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 276)
  Rendered admin/files/index.html.erb within layouts/application (Duration: 2.4ms | Allocations: 673)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::FilesController, action: index, request: #<ActionDispatch::Request:0x00007f9c146c1198>, params: {"controller"=>"admin/files", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | Allocations: 3867)
Completed 200 OK in 34ms (Views: 15.1ms | ActiveRecord: 14.6ms | Allocations: 4769)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:24:20 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (15.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/files', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.0ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:24:20', '2024-03-24 23:24:20')[0m
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.5ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.6ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 0.6ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 4.2ms | Allocations: 1618)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10885000>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 16.5ms | Allocations: 4814)
Completed 200 OK in 102ms (Views: 18.4ms | ActiveRecord: 34.3ms | Allocations: 13427)


Started GET "/admin/elections/2/code_batches" for ::1 at 2024-03-24 19:24:22 -0400
Processing by Admin::CodeBatchesController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/code_batches', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/code_batches/index.html.erb within layouts/application
  [1m[36mCodeBatch Load (1.1ms)[0m  [1m[34mSELECT `code_batches`.* FROM `code_batches` WHERE `code_batches`.`election_id` = 2[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 311)
  Rendered admin/code_batches/index.html.erb within layouts/application (Duration: 87.9ms | Allocations: 2331)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::CodeBatchesController, action: index, request: #<ActionDispatch::Request:0x00007f9c138f9a60>, params: {"controller"=>"admin/code_batches", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 97.8ms | Allocations: 5596)
Completed 200 OK in 128ms (Views: 95.9ms | ActiveRecord: 8.2ms | Allocations: 8334)


Started GET "/admin/elections/2/projects" for ::1 at 2024-03-24 19:24:23 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (12.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/code_batches', 'http://localhost:3000/admin/elections/2/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.8ms | Allocations: 275)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 46.3ms | Allocations: 5337)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc2ffcc78>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 62.4ms | Allocations: 8532)
Completed 200 OK in 85ms (Views: 56.4ms | ActiveRecord: 21.8ms | Allocations: 9862)


Started GET "/admin/elections/2/edit" for ::1 at 2024-03-24 19:24:26 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 75.5ms | Allocations: 115617)
  Rendered shared/_admin_template.html.erb (Duration: 0.8ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 80.2ms | Allocations: 116042)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c12261370>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 86.0ms | Allocations: 118939)
Completed 200 OK in 252ms (Views: 86.9ms | ActiveRecord: 15.8ms | Allocations: 157852)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:24:32 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (5.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (1.0ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 13.5ms | Allocations: 1439)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c1006b0e0>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 31.4ms | Allocations: 4634)
Completed 200 OK in 49ms (Views: 31.6ms | ActiveRecord: 10.1ms | Allocations: 5513)


Started GET "/admin/elections/2/voters/1" for ::1 at 2024-03-24 19:24:35 -0400
Processing by Admin::VotersController#show as HTML
  Parameters: {"election_id"=>"2", "id"=>"1"}
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/1', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 1 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/show.html.erb within layouts/application
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.8ms | Allocations: 276)
  Rendered admin/voters/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 819)
[31mUnpermitted parameters: :election_id, :id. Context: { controller: Admin::VotersController, action: show, request: #<ActionDispatch::Request:0x00007f9c10448de8>, params: {"controller"=>"admin/voters", "action"=>"show", "election_id"=>"2", "id"=>"1"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 20.6ms | Allocations: 4021)
Completed 200 OK in 33ms (Views: 22.0ms | ActiveRecord: 5.2ms | Allocations: 4843)


Started GET "/admin/elections/2/users" for ::1 at 2024-03-24 19:24:40 -0400
Processing by Admin::UsersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (3.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters/1', 'http://localhost:3000/admin/elections/2/users', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/users/index.html.erb within layouts/application
  [1m[36mElectionUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM `election_users` WHERE `election_users`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 276)
  Rendered admin/users/index.html.erb within layouts/application (Duration: 5.8ms | Allocations: 546)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::UsersController, action: index, request: #<ActionDispatch::Request:0x00007f9c138f1ea0>, params: {"controller"=>"admin/users", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 22.5ms | Allocations: 3741)
Completed 200 OK in 38ms (Views: 23.7ms | ActiveRecord: 6.4ms | Allocations: 4615)


Started GET "/admin/elections/2/projects" for ::1 at 2024-03-24 19:24:41 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (10.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mCategory Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 275)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 48.6ms | Allocations: 5332)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc2fdd0d0>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 65.6ms | Allocations: 8527)
Completed 200 OK in 90ms (Views: 60.2ms | ActiveRecord: 20.4ms | Allocations: 9844)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:24:44 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:24:44', '2024-03-24 23:24:44')[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.4ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.0ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.2ms | Allocations: 1618)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc2faaf18>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 28.7ms | Allocations: 4814)
Completed 200 OK in 150ms (Views: 31.3ms | ActiveRecord: 40.8ms | Allocations: 13431)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:25:29 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (11.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.5ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5)[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 9.2ms | Allocations: 1435)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c10c97a80>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 18.5ms | Allocations: 4663)
Completed 200 OK in 36ms (Views: 18.6ms | ActiveRecord: 13.2ms | Allocations: 5533)


Started PATCH "/admin/elections/2/voters/2" for ::1 at 2024-03-24 19:25:32 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"2", "id"=>"2"}
  [1m[35m (14.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/2', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:25:32' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 19.0ms | Allocations: 1017)


Started PATCH "/admin/elections/2/voters/3" for ::1 at 2024-03-24 19:25:34 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"2", "id"=>"3"}
  [1m[35m (6.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/3', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.9ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:25:34' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 12.2ms | Allocations: 1040)


Started PATCH "/admin/elections/2/voters/4" for ::1 at 2024-03-24 19:25:37 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"2", "id"=>"4"}
  [1m[35m (14.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/4', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 4 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.0ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:25:37' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 31ms (Views: 0.3ms | ActiveRecord: 20.3ms | Allocations: 1024)


Started PATCH "/admin/elections/2/voters/5" for ::1 at 2024-03-24 19:25:39 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"2", "id"=>"5"}
  [1m[35m (13.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/5', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 5 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:25:39' WHERE `voters`.`id` = 5[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 30ms (Views: 0.4ms | ActiveRecord: 19.5ms | Allocations: 1045)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:25:41 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:25:41', '2024-03-24 23:25:41')[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.8ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.6ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.6ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 4.7ms | Allocations: 1605)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc2fe10e0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 14.7ms | Allocations: 4818)
Completed 200 OK in 94ms (Views: 16.3ms | ActiveRecord: 29.8ms | Allocations: 13264)


Started GET "/admin/elections/2/users" for ::1 at 2024-03-24 19:26:03 -0400
Processing by Admin::UsersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (14.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/users', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/users/index.html.erb within layouts/application
  [1m[36mElectionUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `election_users` WHERE `election_users`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 276)
  Rendered admin/users/index.html.erb within layouts/application (Duration: 6.2ms | Allocations: 545)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::UsersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3322e48>, params: {"controller"=>"admin/users", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.6ms | Allocations: 3740)
Completed 200 OK in 50ms (Views: 25.4ms | ActiveRecord: 17.1ms | Allocations: 4606)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:26:05 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (4.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.6ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5)[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.6ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 8.4ms | Allocations: 1443)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc39f3538>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.0ms | Allocations: 4638)
Completed 200 OK in 34ms (Views: 23.3ms | ActiveRecord: 6.4ms | Allocations: 5526)


Started PATCH "/admin/elections/2/voters/1" for ::1 at 2024-03-24 19:26:09 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"2", "id"=>"1"}
  [1m[35m (15.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/1', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:26:09' WHERE `voters`.`id` = 1[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 21.1ms | Allocations: 1036)


Started PATCH "/admin/elections/2/voters/2" for ::1 at 2024-03-24 19:26:11 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"2", "id"=>"2"}
  [1m[35m (15.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/2', 'PATCH', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-24 23:26:11' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 36ms (Views: 0.3ms | ActiveRecord: 22.3ms | Allocations: 1036)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:26:12 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.0ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:26:12', '2024-03-24 23:26:12')[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.4ms | Allocations: 1568)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c1014e110>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.6ms | Allocations: 4765)
Completed 200 OK in 139ms (Views: 28.2ms | ActiveRecord: 30.5ms | Allocations: 13130)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:26:20 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (8.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.6ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 8.7ms | Allocations: 1443)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c13a538e8>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.3ms | Allocations: 4638)
Completed 200 OK in 43ms (Views: 25.2ms | ActiveRecord: 11.1ms | Allocations: 5511)


Started PATCH "/admin/elections/2/voters/2" for ::1 at 2024-03-24 19:26:23 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"2", "id"=>"2"}
  [1m[35m (12.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/2', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:26:23' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 19.1ms | Allocations: 1045)


Started PATCH "/admin/elections/2/voters/3" for ::1 at 2024-03-24 19:26:26 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"2", "id"=>"3"}
  [1m[35m (12.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/3', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-24 23:26:26' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 24ms (Views: 0.1ms | ActiveRecord: 16.9ms | Allocations: 1039)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:26:27 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (15.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.7ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:26:28', '2024-03-24 23:26:28')[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (2.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.0ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.6ms | Allocations: 1568)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3c1c800>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 27.6ms | Allocations: 4794)
Completed 200 OK in 152ms (Views: 30.1ms | ActiveRecord: 43.9ms | Allocations: 13168)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:26:33 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (15.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.8ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 12.5ms | Allocations: 1443)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc2fc64c0>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 29.9ms | Allocations: 4638)
Completed 200 OK in 57ms (Views: 30.5ms | ActiveRecord: 19.5ms | Allocations: 5529)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:26:38 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (15.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:26:38', '2024-03-24 23:26:38')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.3ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.0ms | Allocations: 1568)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc2ff7db8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.2ms | Allocations: 4764)
Completed 200 OK in 141ms (Views: 27.7ms | ActiveRecord: 40.4ms | Allocations: 13156)


Started GET "/admin/elections/2/users" for ::1 at 2024-03-24 19:26:45 -0400
Processing by Admin::UsersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (12.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/users', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/users/index.html.erb within layouts/application
  [1m[36mElectionUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `election_users` WHERE `election_users`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 276)
  Rendered admin/users/index.html.erb within layouts/application (Duration: 3.9ms | Allocations: 545)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::UsersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc32b7800>, params: {"controller"=>"admin/users", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 19.9ms | Allocations: 3740)
Completed 200 OK in 40ms (Views: 21.5ms | ActiveRecord: 14.1ms | Allocations: 4615)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:26:46 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (19.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.9ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 13.0ms | Allocations: 1443)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3527bd0>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 30.5ms | Allocations: 4638)
Completed 200 OK in 63ms (Views: 31.1ms | ActiveRecord: 23.5ms | Allocations: 5520)


Started PATCH "/admin/elections/2/voters/4" for ::1 at 2024-03-24 19:26:50 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"2", "id"=>"4"}
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/4', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 4 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-24 23:26:50' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 7.5ms | Allocations: 1024)


Started PATCH "/admin/elections/2/voters/3" for ::1 at 2024-03-24 19:26:53 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"2", "id"=>"3"}
  [1m[35m (13.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/3', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:26:53' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 18.2ms | Allocations: 1045)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:26:55 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:26:55', '2024-03-24 23:26:55')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.9ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 6.9ms | Allocations: 1605)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c146c3858>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.5ms | Allocations: 4802)
Completed 200 OK in 149ms (Views: 27.0ms | ActiveRecord: 42.2ms | Allocations: 13254)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:27:03 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (15.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (1.3ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 13.1ms | Allocations: 1443)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c122c87a0>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 30.4ms | Allocations: 4638)
Completed 200 OK in 59ms (Views: 30.6ms | ActiveRecord: 20.2ms | Allocations: 5514)


Started PATCH "/admin/elections/2/voters/4" for ::1 at 2024-03-24 19:27:07 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"2", "id"=>"4"}
  [1m[35m (14.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/4', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 4 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-24 23:27:07' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 34ms (Views: 0.3ms | ActiveRecord: 21.7ms | Allocations: 1027)


Started PATCH "/admin/elections/2/voters/5" for ::1 at 2024-03-24 19:27:10 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"2", "id"=>"5"}
  [1m[35m (14.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/5', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 5 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.1ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-24 23:27:10' WHERE `voters`.`id` = 5[0m
  [1m[36mTRANSACTION (13.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 45ms (Views: 0.2ms | ActiveRecord: 31.9ms | Allocations: 1033)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:27:12 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (15.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:27:12', '2024-03-24 23:27:12')[0m
  [1m[36mTRANSACTION (4.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.1ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.9ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.3ms | Allocations: 1568)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c49e20>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 27.6ms | Allocations: 4794)
Completed 200 OK in 159ms (Views: 30.1ms | ActiveRecord: 45.4ms | Allocations: 13167)


Started GET "/admin/elections/2/edit" for ::1 at 2024-03-24 19:27:42 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (10.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 158.4ms | Allocations: 115616)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 161.9ms | Allocations: 116041)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9bc2fc7140>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 167.1ms | Allocations: 118938)
Completed 200 OK in 345ms (Views: 168.2ms | ActiveRecord: 12.2ms | Allocations: 157853)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:28:22 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.7ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:28:22', '2024-03-24 23:28:22')[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.9ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.0ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.6ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.3ms | Allocations: 1568)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc35139a0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 22.9ms | Allocations: 4764)
Completed 200 OK in 134ms (Views: 25.9ms | ActiveRecord: 37.4ms | Allocations: 13144)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:28:33 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (14.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.9ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 12.5ms | Allocations: 1443)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc39d23b0>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 30.0ms | Allocations: 4638)
Completed 200 OK in 56ms (Views: 30.7ms | ActiveRecord: 17.8ms | Allocations: 5517)


Started PATCH "/admin/elections/2/voters/4" for ::1 at 2024-03-24 19:28:50 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"2", "id"=>"4"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/4', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 4 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.0ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-24 23:28:50' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 30ms (Views: 0.3ms | ActiveRecord: 19.2ms | Allocations: 1037)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:28:55 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:28:55', '2024-03-24 23:28:55')[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (0.3ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.4ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (0.3ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.3ms | Allocations: 248)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 3.1ms | Allocations: 1613)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3be1908>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 9.3ms | Allocations: 4809)
Completed 200 OK in 62ms (Views: 10.3ms | ActiveRecord: 24.2ms | Allocations: 13322)


Started GET "/equal-shares-demo/exit" for ::1 at 2024-03-24 19:34:00 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by VoteController#exit as HTML
  Parameters: {"election_slug"=>"equal-shares-demo"}
  [1m[35m (12.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/knapsack', 'http://localhost:3000/equal-shares-demo/exit', 'GET', NOW())[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 10 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 3 LIMIT 1[0m
Redirected to http://localhost:3000/equal-shares-demo?locale=en
Completed 302 Found in 56ms (ActiveRecord: 23.6ms | Allocations: 19764)


Started GET "/equal-shares-demo?locale=en" for ::1 at 2024-03-24 19:34:00 -0400
Processing by VoteController#index as HTML
  Parameters: {"locale"=>"en", "election_slug"=>"equal-shares-demo"}
  [1m[35m (14.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/equal-shares-demo/knapsack', 'http://localhost:3000/equal-shares-demo?locale=en', 'GET', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'equal-shares-demo' LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 2.4ms | Allocations: 325)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameters: :locale, :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9c139798a0>, params: {"locale"=>"en", "controller"=>"vote", "action"=>"index", "election_slug"=>"equal-shares-demo"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 53.9ms | Allocations: 8414)
Completed 200 OK in 84ms (Views: 49.4ms | ActiveRecord: 25.6ms | Allocations: 9403)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:34:37 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:34:37', '2024-03-24 23:34:37')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.7ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.6ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.7ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.6ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
Completed 500 Internal Server Error in 181ms (ActiveRecord: 43.4ms | Allocations: 58442)


  
NoMethodError (undefined method `voters' for #<Project id: 17, election_id: 2, category_id: nil, number: "1", cost: 1000, map_geometry: nil, image: nil, external_vote_count: nil, sort_order: nil, data: nil, created_at: "2024-03-22 06:10:49.000000000 +0000", updated_at: "2024-03-22 06:10:49.000000000 +0000", adjustable_cost: false, cost_min: 0, cost_step: 1, uses_slider: false, title: "Example Project 1", description: "Example description 1.", details: nil, address: nil, partner: nil, committee: nil, video_url: nil, image_description: nil>):
  
app/controllers/admin/elections_controller.rb:687:in `block in compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:686:in `map'
app/controllers/admin/elections_controller.rb:686:in `compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:716:in `analytics_knapsack'
app/controllers/admin/elections_controller.rb:163:in `analytics'
Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:36:44 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:36:44', '2024-03-24 23:36:44')[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.4ms | Allocations: 255)
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 3.8ms | Allocations: 3123)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc2fad218>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 10.9ms | Allocations: 6420)
Completed 200 OK in 166ms (Views: 12.5ms | ActiveRecord: 36.3ms | Allocations: 73328)


Started GET "/testing-mes" for ::1 at 2024-03-24 19:41:09 -0400
Processing by VoteController#index as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (16.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/testing-mes', 'GET', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.3ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 1.1ms | Allocations: 395)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9bc35288f0>, params: {"controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | Allocations: 3877)
Completed 200 OK in 34ms (Views: 11.3ms | ActiveRecord: 17.7ms | Allocations: 5123)


Started GET "/testing-mes/free_signup" for ::1 at 2024-03-24 19:41:10 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes', 'http://localhost:3000/testing-mes/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 0.7ms | Allocations: 205)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9bc3a091a8>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | Allocations: 3520)
Completed 200 OK in 20ms (Views: 10.6ms | ActiveRecord: 5.0ms | Allocations: 4309)


Started POST "/testing-mes/post_free_signup" for ::1 at 2024-03-24 19:41:14 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"G2qssU7BVTzXQMD9bcL7K9sjXgrrudPoEWCxgB+gIAO6GKtmuUa99T/A2IR+xfNLpRNGaeLIdsHJUxT4V81OnA==", "election_slug"=>"testing-mes"}
  [1m[35m (13.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-24 23:40:14.499979') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'b571fa407769367b1a0cc453a511a1bb' AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (0.6ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (2, 'free', 'b571fa407769367b1a0cc453a511a1bb', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:41:14', '2024-03-24 23:41:14')[0m
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'b571fa407769367b1a0cc453a511a1bb' AND `voters`.`id` != 11 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 11[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/knapsack
Completed 302 Found in 47ms (ActiveRecord: 26.2ms | Allocations: 3368)


Started GET "/testing-mes/knapsack" for ::1 at 2024-03-24 19:41:14 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 11 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.7ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 11[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'b571fa407769367b1a0cc453a511a1bb' AND `voters`.`id` != 11 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.7ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711323674}}' WHERE `voters`.`id` = 11[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.4ms | Allocations: 152)
  Rendered shared/_sidebar.html.erb (Duration: 0.6ms | Allocations: 349)
  Rendered shared/_project.html.erb (Duration: 0.7ms | Allocations: 323)
  Rendered shared/_project.html.erb (Duration: 0.7ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.6ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.6ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.6ms | Allocations: 307)
  Rendered shared/_project_list.html.erb (Duration: 7.3ms | Allocations: 2098)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 10)
  Rendered shared/_approval_js.html.erb (Duration: 2.6ms | Allocations: 1447)
  Rendered shared/_timer.html.erb (Duration: 0.5ms | Allocations: 120)
  Rendered vote/approval.html.erb within layouts/application (Duration: 18.3ms | Allocations: 5483)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9bc3c05d30>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 32.2ms | Allocations: 8805)
Completed 200 OK in 87ms (Views: 33.3ms | ActiveRecord: 19.8ms | Allocations: 17897)


Started POST "/testing-mes/submit_knapsack" for ::1 at 2024-03-24 19:41:37 -0400
Processing by VoteController#submit_knapsack as HTML
  Parameters: {"project"=>{"17"=>"1000", "18"=>"0", "19"=>"0", "20"=>"0", "21"=>"5000"}, "project_rank"=>{"17"=>"0", "18"=>"0", "19"=>"0", "20"=>"0", "21"=>"0"}, "authenticity_token"=>"HhGReCHQjgHG7hr5NkvmLI2dbqE68GTLT5gViU7auHa/Y5av1ldmyC5uAoAlTO5M8612wjOBweKXq7DxBrfW6Q==", "election_slug"=>"testing-mes"}
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/submit_knapsack', 'POST', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 11 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mVoteKnapsack Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `vote_knapsacks` WHERE `vote_knapsacks`.`voter_id` = 11 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Create (0.6ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (11, 17, 1000, '2024-03-24 23:41:37', '2024-03-24 23:41:37')[0m
  [1m[36mVoteKnapsack Create (0.4ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (11, 21, 5000, '2024-03-24 23:41:37', '2024-03-24 23:41:37')[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/thanks
Completed 302 Found in 28ms (ActiveRecord: 10.6ms | Allocations: 4462)


Started GET "/testing-mes/thanks" for ::1 at 2024-03-24 19:41:37 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 11 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.7ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-24 23:41:37' WHERE `voters`.`id` = 11[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'b571fa407769367b1a0cc453a511a1bb' AND `voters`.`id` != 11 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711323674,\"thanks\":1711323697}}' WHERE `voters`.`id` = 11[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.3ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 1.6ms | Allocations: 317)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c100d2948>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | Allocations: 3640)
Completed 200 OK in 42ms (Views: 14.3ms | ActiveRecord: 12.6ms | Allocations: 5748)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:41:41 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:41:41', '2024-03-24 23:41:41')[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.8ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.7ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.7ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.7ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.9ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 0.7ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 5.9ms | Allocations: 1709)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10880320>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 17.6ms | Allocations: 4905)
Completed 200 OK in 114ms (Views: 19.6ms | ActiveRecord: 32.5ms | Allocations: 15292)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:41:48 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (4.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.5ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5, 11)[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.8ms | Allocations: 309)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 14.2ms | Allocations: 2924)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c122742e0>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.9ms | Allocations: 6189)
Completed 200 OK in 38ms (Views: 23.0ms | ActiveRecord: 10.0ms | Allocations: 7381)


Started GET "/admin/elections/2/edit" for ::1 at 2024-03-24 19:43:23 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 90.4ms | Allocations: 115683)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 94.3ms | Allocations: 116112)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c138d8e00>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 99.5ms | Allocations: 119009)
Completed 200 OK in 240ms (Views: 100.6ms | ActiveRecord: 3.7ms | Allocations: 157923)


Started PATCH "/admin/elections/2" for ::1 at 2024-03-24 19:43:52 -0400
Processing by Admin::ElectionsController#update as JSON
  Parameters: {"utf8"=>"âœ“", "election"=>{"config_yaml"=>"workflow: [knapsack, thanks]\r\navailable_locales: [en]\r\ndefault_locale: en\r\nshow_public_results: false\r\nallow_local_voting: false\r\nallow_remote_voting: true\r\nremote_voting_free_verification: true\r\nfree_verification_use_captcha: false\r\nknapsack:\r\n  has_budget_limit: true\r\n  has_n_project_limit: false\r\n  total_tokens: 15\r\n  max_n_projects: 4\r\n  shuffle_projects: true\r\n", "name"=>"testing-mes", "slug"=>"testing-mes", "budget"=>"20000", "time_zone"=>"International Date Line West", "allow_admins_to_update_election"=>"1", "allow_admins_to_see_voter_data"=>"1", "allow_admins_to_see_exact_results"=>"1", "real_election"=>"1", "remarks"=>""}, "mce_0"=>"<p><img style=\"margin-left: auto; margin-right: auto; display: block;\" src=\"../../../img/sample-city-logo.png\" /></p>\r\n<p class=\"lead\">Welcome to the Participatory Budgeting sample digital ballot, courtesy of the Stanford Crowdsourced Democracy Team.</p>\r\n<p class=\"lead\">On this website, you can familiarize yourself with this year&rsquo;s projects and the digital ballot. This website is only informational, and you <strong>cannot</strong> cast your actual vote here.</p>\r\n<p class=\"lead\">When you cast your <u>actual ballot</u>, you will be deciding how you want to allocate $XXX million of the city's capital improvement budget. In order to vote, you need to come to one of the many voting sites that will be located throughout the city. The voting will be held from (Date XXX) to (Date YYY). See all times and locations below.</p>", "mce_2"=>"<h3>Voting Locations</h3>\r\n<p><strong>Saturday, September 27</strong> &nbsp; (12:00 noon - 4:00 p.m.)<br />Somewhere<br /><br /><strong>Tuesday, September 30</strong> &nbsp; (6:00 p.m. - 9:00 p.m.)<br />Somewhere<br /><br /></p>\r\n<p>For more information, please visit <a href=\"http://www.example.com/\">http://www.example.com/</a></p>", "mce_3"=>"<p style=\"font-size: 20px;\">You will now be asked to participate in an activity that will <u>not</u> affect your vote, but is part of a Stanford University research project meant to help us improve the participatory budgeting process.</p>\r\n<ul style=\"font-size: 20px;\">\r\n<li>Participating in this activity is optional. You can exit at any time.</li>\r\n<li>The expected time for this activity is 2-3 minutes.</li>\r\n</ul>\r\n<p style=\"font-size: 14px;\">This study poses no risk. No payment will be made to you for participation, and we cannot guarantee any benefits to you. You have the right to refuse to answer particular questions. Please contact Professor Ashish Goel at goel_admins@lists.stanford.edu if you have any questions, suggestions, or concerns. You may also contact the Stanford Institutional Review Board at 650-723-2480.</p>", "mce_4"=>"<h3>Instructions</h3>\r\n<ol>\r\n<li>Select the projects you would like to support. The total cost cannot exceed <strong>%{budget}</strong>.</li>\r\n<li>You can see the total amount you have allocated so far in the bar above. You can remove any previously selected projects by clicking on the bar or directly by clicking on the chosen project.</li>\r\n<li>Click the <strong>\"Submit My Vote\"</strong> button when you're ready to submit.</li>\r\n</ol>", "commit"=>"Save", "id"=>"2"}
  [1m[35m (14.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2', 'POST', NOW())[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mElection Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `elections` WHERE `elections`.`slug` = 'testing-mes' AND `elections`.`id` != 2 LIMIT 1[0m
  [1m[36mElection Update (1.2ms)[0m  [1m[33mUPDATE `elections` SET `elections`.`budget` = 20000, `elections`.`updated_at` = '2024-03-24 23:43:52' WHERE `elections`.`id` = 2[0m
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 42ms (Views: 0.4ms | ActiveRecord: 23.0ms | Allocations: 2074)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:43:54 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:43:54', '2024-03-24 23:43:54')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.9ms | Allocations: 1805)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc32dc8a8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.4ms | Allocations: 5001)
Completed 200 OK in 206ms (Views: 28.0ms | ActiveRecord: 41.6ms | Allocations: 21261)


Started GET "/admin/elections/2/edit" for ::1 at 2024-03-24 19:44:07 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 75.7ms | Allocations: 115615)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 81.6ms | Allocations: 116041)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9bc35405b8>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 87.8ms | Allocations: 118939)
Completed 200 OK in 249ms (Views: 89.0ms | ActiveRecord: 15.6ms | Allocations: 157863)


Started PATCH "/admin/elections/2" for ::1 at 2024-03-24 19:44:13 -0400
Processing by Admin::ElectionsController#update as JSON
  Parameters: {"utf8"=>"âœ“", "election"=>{"config_yaml"=>"workflow: [knapsack, thanks]\r\navailable_locales: [en]\r\ndefault_locale: en\r\nshow_public_results: false\r\nallow_local_voting: false\r\nallow_remote_voting: true\r\nremote_voting_free_verification: true\r\nfree_verification_use_captcha: false\r\nknapsack:\r\n  has_budget_limit: true\r\n  has_n_project_limit: false\r\n  total_tokens: 15\r\n  max_n_projects: 4\r\n  shuffle_projects: true\r\n", "name"=>"testing-mes", "slug"=>"testing-mes", "budget"=>"1500", "time_zone"=>"International Date Line West", "allow_admins_to_update_election"=>"1", "allow_admins_to_see_voter_data"=>"1", "allow_admins_to_see_exact_results"=>"1", "real_election"=>"1", "remarks"=>""}, "mce_0"=>"<p><img style=\"margin-left: auto; margin-right: auto; display: block;\" src=\"../../../img/sample-city-logo.png\" /></p>\r\n<p class=\"lead\">Welcome to the Participatory Budgeting sample digital ballot, courtesy of the Stanford Crowdsourced Democracy Team.</p>\r\n<p class=\"lead\">On this website, you can familiarize yourself with this year&rsquo;s projects and the digital ballot. This website is only informational, and you <strong>cannot</strong> cast your actual vote here.</p>\r\n<p class=\"lead\">When you cast your <u>actual ballot</u>, you will be deciding how you want to allocate $XXX million of the city's capital improvement budget. In order to vote, you need to come to one of the many voting sites that will be located throughout the city. The voting will be held from (Date XXX) to (Date YYY). See all times and locations below.</p>", "mce_2"=>"<h3>Voting Locations</h3>\r\n<p><strong>Saturday, September 27</strong> &nbsp; (12:00 noon - 4:00 p.m.)<br />Somewhere<br /><br /><strong>Tuesday, September 30</strong> &nbsp; (6:00 p.m. - 9:00 p.m.)<br />Somewhere<br /><br /></p>\r\n<p>For more information, please visit <a href=\"http://www.example.com/\">http://www.example.com/</a></p>", "mce_3"=>"<p style=\"font-size: 20px;\">You will now be asked to participate in an activity that will <u>not</u> affect your vote, but is part of a Stanford University research project meant to help us improve the participatory budgeting process.</p>\r\n<ul style=\"font-size: 20px;\">\r\n<li>Participating in this activity is optional. You can exit at any time.</li>\r\n<li>The expected time for this activity is 2-3 minutes.</li>\r\n</ul>\r\n<p style=\"font-size: 14px;\">This study poses no risk. No payment will be made to you for participation, and we cannot guarantee any benefits to you. You have the right to refuse to answer particular questions. Please contact Professor Ashish Goel at goel_admins@lists.stanford.edu if you have any questions, suggestions, or concerns. You may also contact the Stanford Institutional Review Board at 650-723-2480.</p>", "mce_4"=>"<h3>Instructions</h3>\r\n<ol>\r\n<li>Select the projects you would like to support. The total cost cannot exceed <strong>%{budget}</strong>.</li>\r\n<li>You can see the total amount you have allocated so far in the bar above. You can remove any previously selected projects by clicking on the bar or directly by clicking on the chosen project.</li>\r\n<li>Click the <strong>\"Submit My Vote\"</strong> button when you're ready to submit.</li>\r\n</ol>", "commit"=>"Save", "id"=>"2"}
  [1m[35m (14.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2', 'POST', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mElection Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `elections` WHERE `elections`.`slug` = 'testing-mes' AND `elections`.`id` != 2 LIMIT 1[0m
  [1m[36mElection Update (0.7ms)[0m  [1m[33mUPDATE `elections` SET `elections`.`budget` = 1500, `elections`.`updated_at` = '2024-03-24 23:44:13' WHERE `elections`.`id` = 2[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 28ms (Views: 0.2ms | ActiveRecord: 18.4ms | Allocations: 1513)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:44:15 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:44:15', '2024-03-24 23:44:15')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.6ms | Allocations: 1710)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c138f7da0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.0ms | Allocations: 4910)
Completed 200 OK in 126ms (Views: 27.5ms | ActiveRecord: 24.6ms | Allocations: 15803)


Started GET "/admin/elections/2/edit" for ::1 at 2024-03-24 19:44:20 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (12.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 73.4ms | Allocations: 115616)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 77.9ms | Allocations: 116041)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c139716a0>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 83.1ms | Allocations: 118937)
Completed 200 OK in 199ms (Views: 84.2ms | ActiveRecord: 13.7ms | Allocations: 157850)


Started PATCH "/admin/elections/2" for ::1 at 2024-03-24 19:44:27 -0400
Processing by Admin::ElectionsController#update as JSON
  Parameters: {"utf8"=>"âœ“", "election"=>{"config_yaml"=>"workflow: [knapsack, thanks]\r\navailable_locales: [en]\r\ndefault_locale: en\r\nshow_public_results: false\r\nallow_local_voting: false\r\nallow_remote_voting: true\r\nremote_voting_free_verification: true\r\nfree_verification_use_captcha: false\r\nknapsack:\r\n  has_budget_limit: true\r\n  has_n_project_limit: false\r\n  total_tokens: 15\r\n  max_n_projects: 4\r\n  shuffle_projects: true\r\n", "name"=>"testing-mes", "slug"=>"testing-mes", "budget"=>"1700", "time_zone"=>"International Date Line West", "allow_admins_to_update_election"=>"1", "allow_admins_to_see_voter_data"=>"1", "allow_admins_to_see_exact_results"=>"1", "real_election"=>"1", "remarks"=>""}, "mce_0"=>"<p><img style=\"margin-left: auto; margin-right: auto; display: block;\" src=\"../../../img/sample-city-logo.png\" /></p>\r\n<p class=\"lead\">Welcome to the Participatory Budgeting sample digital ballot, courtesy of the Stanford Crowdsourced Democracy Team.</p>\r\n<p class=\"lead\">On this website, you can familiarize yourself with this year&rsquo;s projects and the digital ballot. This website is only informational, and you <strong>cannot</strong> cast your actual vote here.</p>\r\n<p class=\"lead\">When you cast your <u>actual ballot</u>, you will be deciding how you want to allocate $XXX million of the city's capital improvement budget. In order to vote, you need to come to one of the many voting sites that will be located throughout the city. The voting will be held from (Date XXX) to (Date YYY). See all times and locations below.</p>", "mce_2"=>"<h3>Voting Locations</h3>\r\n<p><strong>Saturday, September 27</strong> &nbsp; (12:00 noon - 4:00 p.m.)<br />Somewhere<br /><br /><strong>Tuesday, September 30</strong> &nbsp; (6:00 p.m. - 9:00 p.m.)<br />Somewhere<br /><br /></p>\r\n<p>For more information, please visit <a href=\"http://www.example.com/\">http://www.example.com/</a></p>", "mce_3"=>"<p style=\"font-size: 20px;\">You will now be asked to participate in an activity that will <u>not</u> affect your vote, but is part of a Stanford University research project meant to help us improve the participatory budgeting process.</p>\r\n<ul style=\"font-size: 20px;\">\r\n<li>Participating in this activity is optional. You can exit at any time.</li>\r\n<li>The expected time for this activity is 2-3 minutes.</li>\r\n</ul>\r\n<p style=\"font-size: 14px;\">This study poses no risk. No payment will be made to you for participation, and we cannot guarantee any benefits to you. You have the right to refuse to answer particular questions. Please contact Professor Ashish Goel at goel_admins@lists.stanford.edu if you have any questions, suggestions, or concerns. You may also contact the Stanford Institutional Review Board at 650-723-2480.</p>", "mce_4"=>"<h3>Instructions</h3>\r\n<ol>\r\n<li>Select the projects you would like to support. The total cost cannot exceed <strong>%{budget}</strong>.</li>\r\n<li>You can see the total amount you have allocated so far in the bar above. You can remove any previously selected projects by clicking on the bar or directly by clicking on the chosen project.</li>\r\n<li>Click the <strong>\"Submit My Vote\"</strong> button when you're ready to submit.</li>\r\n</ol>", "commit"=>"Save", "id"=>"2"}
  [1m[35m (15.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2', 'POST', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mElection Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `elections` WHERE `elections`.`slug` = 'testing-mes' AND `elections`.`id` != 2 LIMIT 1[0m
  [1m[36mElection Update (1.0ms)[0m  [1m[33mUPDATE `elections` SET `elections`.`budget` = 1700, `elections`.`updated_at` = '2024-03-24 23:44:27' WHERE `elections`.`id` = 2[0m
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 41ms (Views: 0.4ms | ActiveRecord: 24.6ms | Allocations: 1504)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:44:28 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:44:28', '2024-03-24 23:44:28')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 17 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.9ms | Allocations: 1710)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c2a520>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.2ms | Allocations: 4906)
Completed 200 OK in 157ms (Views: 27.7ms | ActiveRecord: 41.2ms | Allocations: 15796)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:46:28 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:46:29', '2024-03-24 23:46:29')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 17[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mVoteKnapsack Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 17[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 17[0m
Completed 500 Internal Server Error in 171ms (ActiveRecord: 44.3ms | Allocations: 57517)


  
NoMethodError (undefined method `>=' for nil:NilClass):
  
app/controllers/admin/elections_controller.rb:695:in `block in compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:694:in `each'
app/controllers/admin/elections_controller.rb:694:in `compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:717:in `analytics_knapsack'
app/controllers/admin/elections_controller.rb:163:in `analytics'
Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:49:04 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.0ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:49:04', '2024-03-24 23:49:04')[0m
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 17[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 17[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mVoteKnapsack Count (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 17[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 17[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject::Translation Destroy (1.2ms)[0m  [1m[31mDELETE FROM `project_translations` WHERE `project_translations`.`id` = 17[0m
  [1m[36mProject Destroy (1.0ms)[0m  [1m[31mDELETE FROM `projects` WHERE `projects`.`id` = 17[0m
  [1m[36mTRANSACTION (4.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (1.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 1.5ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 12.0ms | Allocations: 3348)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c100d6908>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 32.1ms | Allocations: 6645)
Completed 200 OK in 416ms (Views: 36.2ms | ActiveRecord: 93.8ms | Allocations: 70246)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:49:18 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (14.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.9ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5, 11)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 309)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 26.5ms | Allocations: 3504)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3527a90>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 46.0ms | Allocations: 6769)
Completed 200 OK in 76ms (Views: 42.1ms | ActiveRecord: 24.7ms | Allocations: 7969)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:49:24 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.0ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:49:24', '2024-03-24 23:49:24')[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.2ms | Allocations: 1725)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3a24430>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.4ms | Allocations: 4921)
Completed 200 OK in 127ms (Views: 28.0ms | ActiveRecord: 37.7ms | Allocations: 11893)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:51:26 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:51:27', '2024-03-24 23:51:27')[0m
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.8ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 5.1ms | Allocations: 3285)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c13a9b198>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 12.1ms | Allocations: 6582)
Completed 200 OK in 392ms (Views: 13.8ms | ActiveRecord: 54.2ms | Allocations: 68349)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:51:45 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (7.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (3.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:51:45', '2024-03-24 23:51:45')[0m
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 11.5ms | Allocations: 3167)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3547778>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 31.8ms | Allocations: 6435)
Completed 200 OK in 441ms (Views: 36.0ms | ActiveRecord: 100.7ms | Allocations: 68508)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:52:03 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:52:03', '2024-03-24 23:52:03')[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.4ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 3.9ms | Allocations: 3297)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c7b060>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 10.7ms | Allocations: 6564)
Completed 200 OK in 168ms (Views: 12.2ms | ActiveRecord: 40.8ms | Allocations: 67567)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:52:12 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:52:12', '2024-03-24 23:52:12')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.7ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.7ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.7ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.7ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.8ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 2.7ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.0ms | Allocations: 3179)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc2fa65f8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 20.5ms | Allocations: 6476)
Completed 200 OK in 237ms (Views: 23.1ms | ActiveRecord: 54.2ms | Allocations: 68688)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:52:18 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (3.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:52:19', '2024-03-24 23:52:19')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (2.1ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 2.3ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 11.3ms | Allocations: 3185)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3c1eb00>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 28.2ms | Allocations: 6453)
Completed 200 OK in 368ms (Views: 32.1ms | ActiveRecord: 81.6ms | Allocations: 68408)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:52:25 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:52:25', '2024-03-24 23:52:25')[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.6ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.7ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 2.3ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.4ms | Allocations: 3191)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10083ca8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 16.5ms | Allocations: 6488)
Completed 200 OK in 199ms (Views: 18.6ms | ActiveRecord: 42.9ms | Allocations: 68576)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:52:37 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:52:37', '2024-03-24 23:52:37')[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Count (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.3ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.2ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Sum (1.4ms)[0m  [1m[34mSELECT SUM(`vote_knapsacks`.`cost`) FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.7ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 11.3ms | Allocations: 3197)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3c1aaa0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 29.9ms | Allocations: 6465)
Completed 200 OK in 360ms (Views: 34.3ms | ActiveRecord: 78.7ms | Allocations: 68559)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:53:28 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.0ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:53:28', '2024-03-24 23:53:28')[0m
  [1m[36mTRANSACTION (13.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 2.2ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 13.0ms | Allocations: 3203)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc2f9e880>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 32.8ms | Allocations: 6500)
Completed 200 OK in 414ms (Views: 37.5ms | ActiveRecord: 98.5ms | Allocations: 68760)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:53:51 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:53:52', '2024-03-24 23:53:52')[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.6ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 5.6ms | Allocations: 3209)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c1006ab40>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 13.8ms | Allocations: 6506)
Completed 200 OK in 177ms (Views: 15.6ms | ActiveRecord: 37.8ms | Allocations: 68471)


Started GET "/admin/elections/2/analytics.json?knapsack_partial=fractional" for ::1 at 2024-03-24 19:53:53 -0400
Processing by Admin::ElectionsController#analytics as JSON
  Parameters: {"knapsack_partial"=>"fractional", "id"=>"2"}
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/analytics.json?knapsack_partial=fractional', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:53:53', '2024-03-24 23:53:53')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
Completed 200 OK in 98ms (Views: 1.2ms | ActiveRecord: 28.6ms | Allocations: 7664)


Started GET "/admin/elections/2/analytics.json?knapsack_partial=equalizing" for ::1 at 2024-03-24 19:53:55 -0400
Processing by Admin::ElectionsController#analytics as JSON
  Parameters: {"knapsack_partial"=>"equalizing", "id"=>"2"}
  [1m[35m (12.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/analytics.json?knapsack_partial=equalizing', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:53:55', '2024-03-24 23:53:55')[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.6ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
Completed 200 OK in 55ms (Views: 0.6ms | ActiveRecord: 24.4ms | Allocations: 7630)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 19:53:58 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.4ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5, 11)[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 309)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 11.7ms | Allocations: 3504)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc317bd60>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | Allocations: 6798)
Completed 200 OK in 32ms (Views: 18.7ms | ActiveRecord: 8.4ms | Allocations: 7999)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:54:02 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (12.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.7ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:54:02', '2024-03-24 23:54:02')[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.4ms | Allocations: 1601)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc32b5b40>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.2ms | Allocations: 4797)
Completed 200 OK in 122ms (Views: 27.5ms | ActiveRecord: 35.0ms | Allocations: 12256)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:55:10 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:55:11', '2024-03-24 23:55:11')[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.4ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 0.5ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 4.2ms | Allocations: 3340)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10081908>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 10.9ms | Allocations: 6608)
Completed 200 OK in 151ms (Views: 12.6ms | ActiveRecord: 35.1ms | Allocations: 67929)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:55:18 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (15.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:55:18', '2024-03-24 23:55:18')[0m
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 22.8ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 29.7ms | Allocations: 1725)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c13bf4d00>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 48.1ms | Allocations: 4952)
Completed 200 OK in 152ms (Views: 50.7ms | ActiveRecord: 40.5ms | Allocations: 11933)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:55:34 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:55:34', '2024-03-24 23:55:34')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.6ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 5.5ms | Allocations: 3221)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc2fcdc20>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 12.9ms | Allocations: 6518)
Completed 200 OK in 161ms (Views: 14.6ms | ActiveRecord: 35.1ms | Allocations: 68612)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:55:36 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (12.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:55:36', '2024-03-24 23:55:36')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.4ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.6ms | Allocations: 1601)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3bc7a80>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.7ms | Allocations: 4797)
Completed 200 OK in 130ms (Views: 29.5ms | ActiveRecord: 37.1ms | Allocations: 12281)


Started GET "/admin/elections/2/edit" for ::1 at 2024-03-24 19:55:49 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (12.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 213.7ms | Allocations: 115688)
  Rendered shared/_admin_template.html.erb (Duration: 0.6ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 218.2ms | Allocations: 116117)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9bc3c16220>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 224.3ms | Allocations: 119014)
Completed 200 OK in 317ms (Views: 225.4ms | ActiveRecord: 13.7ms | Allocations: 157945)


Started PATCH "/admin/elections/2" for ::1 at 2024-03-24 19:55:57 -0400
Processing by Admin::ElectionsController#update as JSON
  Parameters: {"utf8"=>"âœ“", "election"=>{"config_yaml"=>"workflow: [knapsack, thanks]\r\navailable_locales: [en]\r\ndefault_locale: en\r\nshow_public_results: false\r\nallow_local_voting: false\r\nallow_remote_voting: true\r\nremote_voting_free_verification: true\r\nfree_verification_use_captcha: false\r\nknapsack:\r\n  has_budget_limit: true\r\n  has_n_project_limit: false\r\n  total_tokens: 15\r\n  max_n_projects: 4\r\n  shuffle_projects: true\r\n", "name"=>"testing-mes", "slug"=>"testing-mes", "budget"=>"6000", "time_zone"=>"International Date Line West", "allow_admins_to_update_election"=>"1", "allow_admins_to_see_voter_data"=>"1", "allow_admins_to_see_exact_results"=>"1", "real_election"=>"1", "remarks"=>""}, "mce_0"=>"<p><img style=\"margin-left: auto; margin-right: auto; display: block;\" src=\"../../../img/sample-city-logo.png\" /></p>\r\n<p class=\"lead\">Welcome to the Participatory Budgeting sample digital ballot, courtesy of the Stanford Crowdsourced Democracy Team.</p>\r\n<p class=\"lead\">On this website, you can familiarize yourself with this year&rsquo;s projects and the digital ballot. This website is only informational, and you <strong>cannot</strong> cast your actual vote here.</p>\r\n<p class=\"lead\">When you cast your <u>actual ballot</u>, you will be deciding how you want to allocate $XXX million of the city's capital improvement budget. In order to vote, you need to come to one of the many voting sites that will be located throughout the city. The voting will be held from (Date XXX) to (Date YYY). See all times and locations below.</p>", "mce_2"=>"<h3>Voting Locations</h3>\r\n<p><strong>Saturday, September 27</strong> &nbsp; (12:00 noon - 4:00 p.m.)<br />Somewhere<br /><br /><strong>Tuesday, September 30</strong> &nbsp; (6:00 p.m. - 9:00 p.m.)<br />Somewhere<br /><br /></p>\r\n<p>For more information, please visit <a href=\"http://www.example.com/\">http://www.example.com/</a></p>", "mce_3"=>"<p style=\"font-size: 20px;\">You will now be asked to participate in an activity that will <u>not</u> affect your vote, but is part of a Stanford University research project meant to help us improve the participatory budgeting process.</p>\r\n<ul style=\"font-size: 20px;\">\r\n<li>Participating in this activity is optional. You can exit at any time.</li>\r\n<li>The expected time for this activity is 2-3 minutes.</li>\r\n</ul>\r\n<p style=\"font-size: 14px;\">This study poses no risk. No payment will be made to you for participation, and we cannot guarantee any benefits to you. You have the right to refuse to answer particular questions. Please contact Professor Ashish Goel at goel_admins@lists.stanford.edu if you have any questions, suggestions, or concerns. You may also contact the Stanford Institutional Review Board at 650-723-2480.</p>", "mce_4"=>"<h3>Instructions</h3>\r\n<ol>\r\n<li>Select the projects you would like to support. The total cost cannot exceed <strong>%{budget}</strong>.</li>\r\n<li>You can see the total amount you have allocated so far in the bar above. You can remove any previously selected projects by clicking on the bar or directly by clicking on the chosen project.</li>\r\n<li>Click the <strong>\"Submit My Vote\"</strong> button when you're ready to submit.</li>\r\n</ol>", "commit"=>"Save", "id"=>"2"}
  [1m[35m (13.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2', 'POST', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mElection Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `elections` WHERE `elections`.`slug` = 'testing-mes' AND `elections`.`id` != 2 LIMIT 1[0m
  [1m[36mElection Update (1.0ms)[0m  [1m[33mUPDATE `elections` SET `elections`.`budget` = 6000, `elections`.`updated_at` = '2024-03-24 23:55:57' WHERE `elections`.`id` = 2[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 38ms (Views: 0.3ms | ActiveRecord: 20.5ms | Allocations: 2079)


Started GET "/admin/elections/2/projects" for ::1 at 2024-03-24 19:56:00 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (13.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 302)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 44.4ms | Allocations: 5478)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c10096b00>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 62.4ms | Allocations: 8742)
Completed 200 OK in 88ms (Views: 59.3ms | ActiveRecord: 21.5ms | Allocations: 10383)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:56:01 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (12.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:56:01', '2024-03-24 23:56:01')[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
Completed 500 Internal Server Error in 79ms (ActiveRecord: 30.7ms | Allocations: 6496)


  
NoMethodError (undefined method `voters' for #<Project id: 18, election_id: 2, category_id: nil, number: "2", cost: 2000, map_geometry: nil, image: nil, external_vote_count: nil, sort_order: nil, data: nil, created_at: "2024-03-22 06:10:49.000000000 +0000", updated_at: "2024-03-22 06:10:49.000000000 +0000", adjustable_cost: false, cost_min: 0, cost_step: 1, uses_slider: false, title: "Example Project 2", description: "Example description 2.", details: nil, address: nil, partner: nil, committee: nil, video_url: nil, image_description: nil>):
  
app/controllers/admin/elections_controller.rb:687:in `block in compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:686:in `map'
app/controllers/admin/elections_controller.rb:686:in `compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:717:in `analytics_knapsack'
app/controllers/admin/elections_controller.rb:163:in `analytics'
Started GET "/admin/elections/2/projects" for ::1 at 2024-03-24 19:56:04 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (14.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/projects', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 275)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 46.1ms | Allocations: 4537)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c13b8da38>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 64.4ms | Allocations: 7762)
Completed 200 OK in 92ms (Views: 60.0ms | ActiveRecord: 23.2ms | Allocations: 9074)


Started GET "/admin/elections/2/users" for ::1 at 2024-03-24 19:56:06 -0400
Processing by Admin::UsersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (10.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects', 'http://localhost:3000/admin/elections/2/users', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/users/index.html.erb within layouts/application
  [1m[36mElectionUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `election_users` WHERE `election_users`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 311)
  Rendered admin/users/index.html.erb within layouts/application (Duration: 4.6ms | Allocations: 689)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::UsersController, action: index, request: #<ActionDispatch::Request:0x00007f9c10073df8>, params: {"controller"=>"admin/users", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.3ms | Allocations: 3954)
Completed 200 OK in 51ms (Views: 25.7ms | ActiveRecord: 14.6ms | Allocations: 7178)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:56:07 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:56:07', '2024-03-24 23:56:07')[0m
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
Completed 500 Internal Server Error in 88ms (ActiveRecord: 34.3ms | Allocations: 6474)


  
NoMethodError (undefined method `voters' for #<Project id: 18, election_id: 2, category_id: nil, number: "2", cost: 2000, map_geometry: nil, image: nil, external_vote_count: nil, sort_order: nil, data: nil, created_at: "2024-03-22 06:10:49.000000000 +0000", updated_at: "2024-03-22 06:10:49.000000000 +0000", adjustable_cost: false, cost_min: 0, cost_step: 1, uses_slider: false, title: "Example Project 2", description: "Example description 2.", details: nil, address: nil, partner: nil, committee: nil, video_url: nil, image_description: nil>):
  
app/controllers/admin/elections_controller.rb:687:in `block in compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:686:in `map'
app/controllers/admin/elections_controller.rb:686:in `compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:717:in `analytics_knapsack'
app/controllers/admin/elections_controller.rb:163:in `analytics'
Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:57:15 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:57:15', '2024-03-24 23:57:15')[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mVoteKnapsack Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
Completed 500 Internal Server Error in 139ms (ActiveRecord: 32.6ms | Allocations: 56988)


  
NoMethodError (undefined method `>=' for nil:NilClass):
  
app/controllers/admin/elections_controller.rb:695:in `block in compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:694:in `each'
app/controllers/admin/elections_controller.rb:694:in `compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:717:in `analytics_knapsack'
app/controllers/admin/elections_controller.rb:163:in `analytics'
Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 19:58:48 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-24 23:58:49', '2024-03-24 23:58:49')[0m
  [1m[36mTRANSACTION (4.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
Completed 500 Internal Server Error in 342ms (ActiveRecord: 81.8ms | Allocations: 57953)


  
NoMethodError (undefined method `voters' for #<Project id: 18, election_id: 2, category_id: nil, number: "2", cost: 2000, map_geometry: nil, image: nil, external_vote_count: nil, sort_order: nil, data: nil, created_at: "2024-03-22 06:10:49.000000000 +0000", updated_at: "2024-03-22 06:10:49.000000000 +0000", adjustable_cost: false, cost_min: 0, cost_step: 1, uses_slider: false, title: "Example Project 2", description: "Example description 2.", details: nil, address: nil, partner: nil, committee: nil, video_url: nil, image_description: nil>):
  
app/controllers/admin/elections_controller.rb:687:in `block in compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:686:in `map'
app/controllers/admin/elections_controller.rb:686:in `compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:717:in `analytics_knapsack'
app/controllers/admin/elections_controller.rb:163:in `analytics'
Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:00:18 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.1ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:00:19', '2024-03-25 00:00:19')[0m
  [1m[36mTRANSACTION (9.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 18 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.2ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
Completed 500 Internal Server Error in 361ms (ActiveRecord: 86.6ms | Allocations: 57680)


  
NameError (undefined local variable or method `project_coverability' for #<Admin::ElectionsController:0x00000000308e78>):
  
app/controllers/admin/elections_controller.rb:686:in `compute_and_fund_projects_by_equal_shares'
app/controllers/admin/elections_controller.rb:718:in `analytics_knapsack'
app/controllers/admin/elections_controller.rb:163:in `analytics'
Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:01:57 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:01:57', '2024-03-25 00:01:57')[0m
  [1m[36mTRANSACTION (3.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 18[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mVoteKnapsack Count (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mCACHE VoteKnapsack Pluck (0.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 18[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject::Translation Destroy (0.9ms)[0m  [1m[31mDELETE FROM `project_translations` WHERE `project_translations`.`id` = 18[0m
  [1m[36mProject Destroy (0.8ms)[0m  [1m[31mDELETE FROM `projects` WHERE `projects`.`id` = 18[0m
  [1m[36mTRANSACTION (11.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 11.2ms | Allocations: 3237)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c146b9740>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 29.4ms | Allocations: 6534)
Completed 200 OK in 356ms (Views: 33.4ms | ActiveRecord: 88.5ms | Allocations: 69125)


Started GET "/admin/elections/2/users" for ::1 at 2024-03-24 20:02:20 -0400
Processing by Admin::UsersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/users', 'GET', NOW())[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/users/index.html.erb within layouts/application
  [1m[36mElectionUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `election_users` WHERE `election_users`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.6ms | Allocations: 311)
  Rendered admin/users/index.html.erb within layouts/application (Duration: 3.1ms | Allocations: 689)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::UsersController, action: index, request: #<ActionDispatch::Request:0x00007f9c13973720>, params: {"controller"=>"admin/users", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 12.1ms | Allocations: 3990)
Completed 200 OK in 29ms (Views: 14.5ms | ActiveRecord: 5.9ms | Allocations: 7215)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:02:23 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:02:23', '2024-03-25 00:02:23')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.9ms | Allocations: 1524)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3a0ea68>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 29.1ms | Allocations: 4729)
Completed 200 OK in 122ms (Views: 31.7ms | ActiveRecord: 34.7ms | Allocations: 10955)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:02:54 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:02:54', '2024-03-25 00:02:54')[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (4.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.6ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 0.6ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 5.8ms | Allocations: 3174)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c100e9b20>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 16.2ms | Allocations: 6471)
Completed 200 OK in 302ms (Views: 18.4ms | ActiveRecord: 41.0ms | Allocations: 67073)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:03:00 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:03:00', '2024-03-25 00:03:00')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.5ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.7ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.4ms | Allocations: 1524)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc2ff62d8>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.1ms | Allocations: 4720)
Completed 200 OK in 121ms (Views: 28.7ms | ActiveRecord: 35.6ms | Allocations: 10939)


Started GET "/admin/elections/2/projects" for ::1 at 2024-03-24 20:03:02 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (13.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 302)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 34.6ms | Allocations: 3866)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc31f2780>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 53.0ms | Allocations: 7130)
Completed 200 OK in 81ms (Views: 51.7ms | ActiveRecord: 20.6ms | Allocations: 8796)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:03:03 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (15.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.8ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:03:03', '2024-03-25 00:03:03')[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.3ms | Allocations: 1524)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3452d18>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.7ms | Allocations: 4720)
Completed 200 OK in 120ms (Views: 28.0ms | ActiveRecord: 36.9ms | Allocations: 10907)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:03:08 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (12.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:03:08', '2024-03-25 00:03:08')[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.0ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 6.9ms | Allocations: 1524)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc39d0290>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 23.4ms | Allocations: 4720)
Completed 200 OK in 99ms (Views: 26.1ms | ActiveRecord: 29.2ms | Allocations: 10909)


Started GET "/testing-mes" for ::1 at 2024-03-24 20:03:16 -0400
Processing by VoteController#index as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (12.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/testing-mes', 'GET', NOW())[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 11 LIMIT 1[0m
  [1m[36mElection Load (0.3ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 0.9ms | Allocations: 395)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3a22db0>, params: {"controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 10.9ms | Allocations: 3875)
Completed 200 OK in 33ms (Views: 12.2ms | ActiveRecord: 14.6ms | Allocations: 6848)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 20:03:21 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.8ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5, 11)[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 309)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 18.3ms | Allocations: 2927)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3c1a460>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 35.7ms | Allocations: 6192)
Completed 200 OK in 48ms (Views: 33.4ms | ActiveRecord: 8.9ms | Allocations: 7384)


Started PATCH "/admin/elections/2/voters/4" for ::1 at 2024-03-24 20:03:25 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"2", "id"=>"4"}
  [1m[35m (12.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/4', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 4 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.5ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-25 00:03:25' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 22ms (Views: 0.1ms | ActiveRecord: 15.6ms | Allocations: 1817)


Started PATCH "/admin/elections/2/voters/4" for ::1 at 2024-03-24 20:03:28 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"2", "id"=>"4"}
  [1m[35m (14.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/4', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 4 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.9ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-25 00:03:28' WHERE `voters`.`id` = 4[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 20.2ms | Allocations: 1033)


Started PATCH "/admin/elections/2/voters/11" for ::1 at 2024-03-24 20:03:32 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"1", "election_id"=>"2", "id"=>"11"}
  [1m[35m (13.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/11', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 11 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.5ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = TRUE, `voters`.`updated_at` = '2024-03-25 00:03:32' WHERE `voters`.`id` = 11[0m
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 33ms (Views: 0.3ms | ActiveRecord: 20.3ms | Allocations: 1022)


Started PATCH "/admin/elections/2/voters/11" for ::1 at 2024-03-24 20:03:33 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"2", "id"=>"11"}
  [1m[35m (13.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/11', 'PATCH', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 11 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-25 00:03:33' WHERE `voters`.`id` = 11[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 35ms (Views: 0.3ms | ActiveRecord: 20.7ms | Allocations: 1049)


Started PATCH "/admin/elections/2/voters/3" for ::1 at 2024-03-24 20:03:38 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"2", "id"=>"3"}
  [1m[35m (13.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/3', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 3 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.9ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-25 00:03:38' WHERE `voters`.`id` = 3[0m
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 30ms (Views: 0.2ms | ActiveRecord: 19.4ms | Allocations: 1021)


Started PATCH "/admin/elections/2/voters/2" for ::1 at 2024-03-24 20:03:39 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"2", "id"=>"2"}
  [1m[35m (15.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/2', 'PATCH', NOW())[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-25 00:03:39' WHERE `voters`.`id` = 2[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 23.2ms | Allocations: 1024)


Started PATCH "/admin/elections/2/voters/1" for ::1 at 2024-03-24 20:03:41 -0400
Processing by Admin::VotersController#update as JSON
  Parameters: {"void"=>"0", "election_id"=>"2", "id"=>"1"}
  [1m[35m (16.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/voters/1', 'PATCH', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 1 LIMIT 1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (0.7ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`void` = FALSE, `voters`.`updated_at` = '2024-03-25 00:03:41' WHERE `voters`.`id` = 1[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 32ms (Views: 0.3ms | ActiveRecord: 21.6ms | Allocations: 1027)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:03:44 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:03:44', '2024-03-25 00:03:44')[0m
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.4ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 9.0ms | Allocations: 1531)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c138f82a0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 27.3ms | Allocations: 4727)
Completed 200 OK in 124ms (Views: 30.1ms | ActiveRecord: 36.8ms | Allocations: 10995)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 20:03:55 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (14.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.8ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5, 11)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 14.0ms | Allocations: 1544)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c13c2fe78>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 34.2ms | Allocations: 4739)
Completed 200 OK in 58ms (Views: 35.0ms | ActiveRecord: 17.3ms | Allocations: 5615)


Started GET "/admin/elections/2/edit" for ::1 at 2024-03-24 20:03:58 -0400
Processing by Admin::ElectionsController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (14.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/edit', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/edit.html.erb within layouts/application
  Rendered shared/_election_form.html.erb (Duration: 91.8ms | Allocations: 115685)
  Rendered shared/_admin_template.html.erb (Duration: 0.6ms | Allocations: 279)
  Rendered admin/elections/edit.html.erb within layouts/application (Duration: 95.5ms | Allocations: 116116)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: edit, request: #<ActionDispatch::Request:0x00007f9c143eafa0>, params: {"controller"=>"admin/elections", "action"=>"edit", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 101.2ms | Allocations: 119013)
Completed 200 OK in 282ms (Views: 102.4ms | ActiveRecord: 15.9ms | Allocations: 157941)


Started GET "/admin/elections/2/users" for ::1 at 2024-03-24 20:04:02 -0400
Processing by Admin::UsersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (12.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/edit', 'http://localhost:3000/admin/elections/2/users', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/users/index.html.erb within layouts/application
  [1m[36mElectionUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM `election_users` WHERE `election_users`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.3ms | Allocations: 311)
  Rendered admin/users/index.html.erb within layouts/application (Duration: 6.7ms | Allocations: 689)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::UsersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc39d3850>, params: {"controller"=>"admin/users", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.3ms | Allocations: 3956)
Completed 200 OK in 66ms (Views: 30.1ms | ActiveRecord: 19.0ms | Allocations: 7191)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 20:04:04 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (6.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/users', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.7ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5, 11)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 11.3ms | Allocations: 1539)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3bd1e18>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 28.8ms | Allocations: 4734)
Completed 200 OK in 45ms (Views: 29.3ms | ActiveRecord: 9.2ms | Allocations: 5627)


Started GET "/" for ::1 at 2024-03-24 20:04:15 -0400
Processing by HomeController#index as HTML
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/', 'GET', NOW())[0m
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 27.2ms | Allocations: 710)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  Rendered layout layouts/application.html.erb (Duration: 36.8ms | Allocations: 4208)
Completed 200 OK in 44ms (Views: 39.1ms | ActiveRecord: 2.6ms | Allocations: 4862)


Started GET "/admin" for ::1 at 2024-03-24 20:04:23 -0400
Processing by Admin::HomeController#index as HTML
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', NULL, 'http://localhost:3000/admin', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT elections.*, COUNT(voters.id) AS voter_count FROM `elections` LEFT OUTER JOIN voters ON voters.election_id = elections.id AND voters.void = false GROUP BY `elections`.`id`[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/home/index.html.erb within layouts/application
  Rendered shared/_election_list.html.erb (Duration: 0.9ms | Allocations: 321)
  Rendered shared/_admin_template.html.erb (Duration: 0.1ms | Allocations: 68)
  Rendered admin/home/index.html.erb within layouts/application (Duration: 2.1ms | Allocations: 581)
  Rendered layout layouts/application.html.erb (Duration: 8.5ms | Allocations: 3786)
Completed 200 OK in 18ms (Views: 10.0ms | ActiveRecord: 3.2ms | Allocations: 6788)


Started GET "/admin/elections/2" for ::1 at 2024-03-24 20:04:28 -0400
Processing by Admin::ElectionsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (4.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin', 'http://localhost:3000/admin/elections/2', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/show.html.erb within layouts/application
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 280)
  Rendered admin/elections/show.html.erb within layouts/application (Duration: 3.5ms | Allocations: 837)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: show, request: #<ActionDispatch::Request:0x00007f9c10c230e0>, params: {"controller"=>"admin/elections", "action"=>"show", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | Allocations: 4032)
Completed 200 OK in 20ms (Views: 11.1ms | ActiveRecord: 5.4ms | Allocations: 4756)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:04:31 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (15.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.9ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:04:31', '2024-03-25 00:04:31')[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mProject Load (1.3ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.8ms | Allocations: 1531)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122b8e90>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.7ms | Allocations: 4727)
Completed 200 OK in 121ms (Views: 27.1ms | ActiveRecord: 37.4ms | Allocations: 11000)


Started GET "/testing-mes/free_signup" for ::1 at 2024-03-24 20:05:29 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (6.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes', 'http://localhost:3000/testing-mes/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 11 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 1.5ms | Allocations: 205)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9c13972780>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 21.7ms | Allocations: 3520)
Completed 200 OK in 41ms (Views: 23.1ms | ActiveRecord: 9.8ms | Allocations: 4469)


Started POST "/testing-mes/post_free_signup" for ::1 at 2024-03-24 20:05:32 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"HGcSu0fU+VzvBMg9/zCeQRg/C5ssfazEvlqcRJ5/gX69FRVssFMRlQeE0ETsN5YhZg8T+CUMCe1maTk81hLv4Q==", "election_slug"=>"testing-mes"}
  [1m[35m (2.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 11 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mActivityLog Count (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-25 00:04:32.870729') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '12140b0c493e0a935eb03522ca13a127' AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (0.6ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (2, 'free', '12140b0c493e0a935eb03522ca13a127', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:05:32', '2024-03-25 00:05:32')[0m
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '12140b0c493e0a935eb03522ca13a127' AND `voters`.`id` != 12 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.8ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 12[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/knapsack
Completed 302 Found in 37ms (ActiveRecord: 15.4ms | Allocations: 2891)


Started GET "/testing-mes/knapsack" for ::1 at 2024-03-24 20:05:32 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (10.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 12 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 12[0m
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '12140b0c493e0a935eb03522ca13a127' AND `voters`.`id` != 12 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711325132}}' WHERE `voters`.`id` = 12[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.8ms | Allocations: 144)
  Rendered shared/_sidebar.html.erb (Duration: 0.8ms | Allocations: 215)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 316)
  Rendered shared/_project.html.erb (Duration: 1.3ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 307)
  Rendered shared/_project_list.html.erb (Duration: 8.0ms | Allocations: 1325)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 10)
  Rendered shared/_approval_js.html.erb (Duration: 3.7ms | Allocations: 1447)
  Rendered shared/_timer.html.erb (Duration: 0.7ms | Allocations: 120)
  Rendered vote/approval.html.erb within layouts/application (Duration: 24.2ms | Allocations: 4428)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9c14506240>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 44.2ms | Allocations: 7750)
Completed 200 OK in 140ms (Views: 45.8ms | ActiveRecord: 36.0ms | Allocations: 14740)


Started GET "/admin/elections/2/projects" for ::1 at 2024-03-24 20:05:41 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (3.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.4ms | Allocations: 275)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 21.5ms | Allocations: 3741)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9c13a96cd8>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 31.7ms | Allocations: 6966)
Completed 200 OK in 43ms (Views: 29.9ms | ActiveRecord: 8.3ms | Allocations: 8296)


Started GET "/admin/elections/2/projects/new" for ::1 at 2024-03-24 20:05:43 -0400
Processing by Admin::ProjectsController#new as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (3.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects', 'http://localhost:3000/admin/elections/2/projects/new', 'GET', NOW())[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/new.html.erb within layouts/application
  [1m[36mCategory Load (1.0ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 2[0m
  Rendered shared/_project_form.html.erb (Duration: 21.7ms | Allocations: 5567)
  Rendered shared/_admin_template.html.erb (Duration: 0.9ms | Allocations: 274)
  Rendered admin/projects/new.html.erb within layouts/application (Duration: 25.3ms | Allocations: 5998)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: new, request: #<ActionDispatch::Request:0x00007f9bc3c25e78>, params: {"controller"=>"admin/projects", "action"=>"new", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 42.6ms | Allocations: 9212)
Completed 200 OK in 57ms (Views: 44.3ms | ActiveRecord: 5.8ms | Allocations: 9977)


Started POST "/admin/elections/2/projects" for ::1 at 2024-03-24 20:05:50 -0400
Processing by Admin::ProjectsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"vWFpPHdx/uQMME6zWRrmC5AxEo6ocbW37YwnGEj3dPYcE27rgPYWLeSwVspKHe5r7gEK7aEAEJ41v4JgAJoaaQ==", "project"=>{"number"=>"", "title_en"=>"Project 1", "description_en"=>"", "cost"=>"999", "adjustable_cost"=>"0", "cost_min"=>"0", "cost_step"=>"1", "uses_slider"=>"0", "address_en"=>"", "category_id"=>"", "image_cache"=>"", "image_description_en"=>"", "map_geometry"=>"", "video_url_en"=>"", "details_en"=>"", "data"=>""}, "commit"=>"Save", "election_id"=>"2"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects/new', 'http://localhost:3000/admin/elections/2/projects', 'POST', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mProject Maximum (0.6ms)[0m  [1m[34mSELECT MAX(`projects`.`sort_order`) FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.4ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `map_geometry`, `sort_order`, `data`, `created_at`, `updated_at`) VALUES (2, '', 999, '', 1, '', '2024-03-25 00:05:50', '2024-03-25 00:05:50')[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 31 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.5ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`, `details`, `address`, `video_url`, `image_description`) VALUES (31, 'en', '2024-03-25 00:05:50', '2024-03-25 00:05:50', 'Project 1', '', '', '', '', '')[0m
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/2/projects
Completed 302 Found in 31ms (ActiveRecord: 8.5ms | Allocations: 7536)


Started GET "/admin/elections/2/projects" for ::1 at 2024-03-24 20:05:50 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (17.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects/new', 'http://localhost:3000/admin/elections/2/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 275)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 40.1ms | Allocations: 4395)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3179740>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 57.6ms | Allocations: 7593)
Completed 200 OK in 89ms (Views: 53.4ms | ActiveRecord: 26.3ms | Allocations: 8910)


Started GET "/admin/elections/2/projects/new" for ::1 at 2024-03-24 20:05:55 -0400
Processing by Admin::ProjectsController#new as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (14.9ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects', 'http://localhost:3000/admin/elections/2/projects/new', 'GET', NOW())[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/new.html.erb within layouts/application
  [1m[36mCategory Load (0.9ms)[0m  [1m[34mSELECT `categories`.`id`, `categories`.`election_id`, `categories`.`image`, `categories`.`sort_order`, `categories`.`created_at`, `categories`.`updated_at`, `categories`.`pinned`, `categories`.`category_group` FROM `categories` WHERE `categories`.`election_id` = 2[0m
  Rendered shared/_project_form.html.erb (Duration: 16.7ms | Allocations: 3863)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 274)
  Rendered admin/projects/new.html.erb within layouts/application (Duration: 20.5ms | Allocations: 4291)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: new, request: #<ActionDispatch::Request:0x00007f9bc32b8ca0>, params: {"controller"=>"admin/projects", "action"=>"new", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 37.9ms | Allocations: 7477)
Completed 200 OK in 65ms (Views: 39.7ms | ActiveRecord: 17.8ms | Allocations: 8237)


Started POST "/admin/elections/2/projects" for ::1 at 2024-03-24 20:06:03 -0400
Processing by Admin::ProjectsController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"OZUTM/zgtB3JiIQY9KnJ3XGG730SStYm46nBP7suPmqY5xTkC2dc1CEInGHnrsG9D7b3Hhs7cw87mmRH80NQ9Q==", "project"=>{"number"=>"", "title_en"=>"Project 2", "description_en"=>"", "cost"=>"2000", "adjustable_cost"=>"0", "cost_min"=>"0", "cost_step"=>"1", "uses_slider"=>"0", "address_en"=>"", "category_id"=>"", "image_cache"=>"", "image_description_en"=>"", "map_geometry"=>"", "video_url_en"=>"", "details_en"=>"", "data"=>""}, "commit"=>"Save", "election_id"=>"2"}
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects/new', 'http://localhost:3000/admin/elections/2/projects', 'POST', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mProject Maximum (0.5ms)[0m  [1m[34mSELECT MAX(`projects`.`sort_order`) FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Create (0.6ms)[0m  [1m[32mINSERT INTO `projects` (`election_id`, `number`, `cost`, `map_geometry`, `sort_order`, `data`, `created_at`, `updated_at`) VALUES (2, '', 2000, '', 2, '', '2024-03-25 00:06:03', '2024-03-25 00:06:03')[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`id` = 32 LIMIT 1[0m
  [1m[36mProject::Translation Create (0.5ms)[0m  [1m[32mINSERT INTO `project_translations` (`project_id`, `locale`, `created_at`, `updated_at`, `title`, `description`, `details`, `address`, `video_url`, `image_description`) VALUES (32, 'en', '2024-03-25 00:06:03', '2024-03-25 00:06:03', 'Project 2', '', '', '', '', '')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/admin/elections/2/projects
Completed 302 Found in 31ms (ActiveRecord: 8.8ms | Allocations: 5581)


Started GET "/admin/elections/2/projects" for ::1 at 2024-03-24 20:06:03 -0400
Processing by Admin::ProjectsController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (2.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects/new', 'http://localhost:3000/admin/elections/2/projects', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/projects/index.html.erb within layouts/application
  [1m[36mProject Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2 ORDER BY `projects`.`sort_order` ASC[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mCACHE Category Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendered shared/_admin_template.html.erb (Duration: 0.6ms | Allocations: 275)
  Rendered admin/projects/index.html.erb within layouts/application (Duration: 25.7ms | Allocations: 5053)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::ProjectsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc354a0b8>, params: {"controller"=>"admin/projects", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 35.9ms | Allocations: 8249)
Completed 200 OK in 47ms (Views: 33.1ms | ActiveRecord: 8.1ms | Allocations: 9578)


Started GET "/testing-mes/knapsack" for ::1 at 2024-03-24 20:06:09 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (4.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 12 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '12140b0c493e0a935eb03522ca13a127' AND `voters`.`id` != 12 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (0.6ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711325169}}', `voters`.`updated_at` = '2024-03-25 00:06:09' WHERE `voters`.`id` = 12[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.4ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 0.4ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 0.6ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.6ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.6ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 0.7ms | Allocations: 306)
  Rendered shared/_project.html.erb (Duration: 0.6ms | Allocations: 299)
  Rendered shared/_project_list.html.erb (Duration: 6.6ms | Allocations: 2062)
  Rendered shared/themes/_theme_2.html (Duration: 0.0ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 2.2ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 0.4ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 15.4ms | Allocations: 5413)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9bc3bc2580>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.9ms | Allocations: 8735)
Completed 200 OK in 64ms (Views: 26.7ms | ActiveRecord: 13.7ms | Allocations: 14099)


Started GET "/testing-mes/thanks" for ::1 at 2024-03-24 20:06:11 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (4.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 12 LIMIT 1[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-25 00:06:11' WHERE `voters`.`id` = 12[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '12140b0c493e0a935eb03522ca13a127' AND `voters`.`id` != 12 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711325169,\"thanks\":1711325171}}' WHERE `voters`.`id` = 12[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.6ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 2.7ms | Allocations: 317)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c1007cd18>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 25.7ms | Allocations: 3640)
Completed 200 OK in 74ms (Views: 27.6ms | ActiveRecord: 20.1ms | Allocations: 5760)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 20:06:17 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (10.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/projects', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.8ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5, 11, 12)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 13.8ms | Allocations: 1643)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c10be9f70>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 31.1ms | Allocations: 4838)
Completed 200 OK in 54ms (Views: 31.8ms | ActiveRecord: 14.6ms | Allocations: 5728)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:06:18 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.5ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:06:18', '2024-03-25 00:06:18')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.7ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 31[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 32[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.3ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.3ms | Allocations: 1675)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c97d00>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.0ms | Allocations: 4871)
Completed 200 OK in 108ms (Views: 28.6ms | ActiveRecord: 24.2ms | Allocations: 12337)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:06:22 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:06:22', '2024-03-25 00:06:22')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.6ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 31[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 32[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.5ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 4.6ms | Allocations: 1675)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122fa700>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 12.5ms | Allocations: 4871)
Completed 200 OK in 74ms (Views: 13.7ms | ActiveRecord: 26.6ms | Allocations: 12337)


Started GET "/admin/elections/2/voters" for ::1 at 2024-03-24 20:06:29 -0400
Processing by Admin::VotersController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (13.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/voters', 'GET', NOW())[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.6ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/voters/index.html.erb within layouts/application
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 ORDER BY `voters`.`id` ASC[0m
  [1m[36mVoterRegistrationRecord Load (0.8ms)[0m  [1m[34mSELECT `voter_registration_records`.* FROM `voter_registration_records` WHERE `voter_registration_records`.`voter_id` IN (1, 2, 3, 4, 5, 11, 12)[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 276)
  Rendered admin/voters/index.html.erb within layouts/application (Duration: 12.0ms | Allocations: 1641)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::VotersController, action: index, request: #<ActionDispatch::Request:0x00007f9c13c2c958>, params: {"controller"=>"admin/voters", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 28.7ms | Allocations: 4836)
Completed 200 OK in 51ms (Views: 28.5ms | ActiveRecord: 16.7ms | Allocations: 5727)


Started GET "/testing-mes/done" for ::1 at 2024-03-24 20:06:32 -0400
Processing by VoteController#done as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (12.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes/done', 'GET', NOW())[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 12 LIMIT 1[0m
  [1m[36mElection Load (0.8ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'done', `voters`.`updated_at` = '2024-03-25 00:06:32' WHERE `voters`.`id` = 12[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = '12140b0c493e0a935eb03522ca13a127' AND `voters`.`id` != 12 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.5ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711325169,\"thanks\":1711325171,\"done\":1711325192}}' WHERE `voters`.`id` = 12[0m
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes?locale=en
Completed 302 Found in 54ms (ActiveRecord: 26.9ms | Allocations: 2054)


Started GET "/testing-mes?locale=en" for ::1 at 2024-03-24 20:06:32 -0400
Processing by VoteController#index as HTML
  Parameters: {"locale"=>"en", "election_slug"=>"testing-mes"}
  [1m[35m (13.4ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/thanks', 'http://localhost:3000/testing-mes?locale=en', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/index.html.erb within layouts/application
  Rendered vote/index.html.erb within layouts/application (Duration: 2.0ms | Allocations: 289)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameters: :locale, :election_slug. Context: { controller: VoteController, action: index, request: #<ActionDispatch::Request:0x00007f9bc39efbe0>, params: {"locale"=>"en", "controller"=>"vote", "action"=>"index", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 21.4ms | Allocations: 3702)
Completed 200 OK in 47ms (Views: 22.9ms | ActiveRecord: 16.2ms | Allocations: 4494)


Started GET "/testing-mes/free_signup" for ::1 at 2024-03-24 20:06:34 -0400
Processing by VoteController#free_signup as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (3.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes?locale=en', 'http://localhost:3000/testing-mes/free_signup', 'GET', NOW())[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/free_signup.html.erb within layouts/application
  Rendered vote/free_signup.html.erb within layouts/application (Duration: 1.0ms | Allocations: 203)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: free_signup, request: #<ActionDispatch::Request:0x00007f9c13a5cf88>, params: {"controller"=>"vote", "action"=>"free_signup", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 18.4ms | Allocations: 3553)
Completed 200 OK in 37ms (Views: 19.4ms | ActiveRecord: 6.0ms | Allocations: 4312)


Started POST "/testing-mes/post_free_signup" for ::1 at 2024-03-24 20:06:37 -0400
Processing by VoteController#post_free_signup as HTML
  Parameters: {"freeform_text"=>"22101", "authenticity_token"=>"X1sDv+yblirQfYelGv/pHJSo11wKGbmmSFTXxhdYDQ/+KQRoGxx+4zj9n9wJ+OF86pjPPwNoHI+QZ3K+XzVjkA==", "election_slug"=>"testing-mes"}
  [1m[35m (15.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/post_free_signup', 'POST', NOW())[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` IS NULL LIMIT 1[0m
  [1m[36mActivityLog Count (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM `activity_logs` WHERE (activity = 'remote_voting_signup_failure' AND created_at >= '2024-03-25 00:05:37.067613') AND `activity_logs`.`ip_address` = '::1'[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'aef3e94d8b28f44073d306532599204b' AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Create (1.0ms)[0m  [1m[32mINSERT INTO `voters` (`election_id`, `authentication_method`, `authentication_id`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (2, 'free', 'aef3e94d8b28f44073d306532599204b', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:06:37', '2024-03-25 00:06:37')[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'aef3e94d8b28f44073d306532599204b' AND `voters`.`id` != 13 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\"}' WHERE `voters`.`id` = 13[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/knapsack
Completed 302 Found in 61ms (ActiveRecord: 29.9ms | Allocations: 2259)


Started GET "/testing-mes/knapsack" for ::1 at 2024-03-24 20:06:37 -0400
Processing by VoteController#knapsack as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (14.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/free_signup', 'http://localhost:3000/testing-mes/knapsack', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 13 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.1ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'knapsack' WHERE `voters`.`id` = 13[0m
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'aef3e94d8b28f44073d306532599204b' AND `voters`.`id` != 13 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.1ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711325197}}' WHERE `voters`.`id` = 13[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/approval.html.erb within layouts/application
  Rendered shared/_budgetbar.html.erb (Duration: 0.7ms | Allocations: 132)
  Rendered shared/_sidebar.html.erb (Duration: 0.9ms | Allocations: 348)
  Rendered shared/_project.html.erb (Duration: 3.6ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.7ms | Allocations: 299)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 307)
  Rendered shared/_project.html.erb (Duration: 1.2ms | Allocations: 306)
  Rendered shared/_project_list.html.erb (Duration: 15.3ms | Allocations: 2062)
  Rendered shared/themes/_theme_2.html (Duration: 0.1ms | Allocations: 9)
  Rendered shared/_approval_js.html.erb (Duration: 4.8ms | Allocations: 1444)
  Rendered shared/_timer.html.erb (Duration: 0.7ms | Allocations: 118)
  Rendered vote/approval.html.erb within layouts/application (Duration: 32.7ms | Allocations: 5413)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: knapsack, request: #<ActionDispatch::Request:0x00007f9bc3c28a38>, params: {"controller"=>"vote", "action"=>"knapsack", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 53.3ms | Allocations: 8767)
Completed 200 OK in 140ms (Views: 54.8ms | ActiveRecord: 37.2ms | Allocations: 14272)


Started POST "/testing-mes/submit_knapsack" for ::1 at 2024-03-24 20:06:43 -0400
Processing by VoteController#submit_knapsack as HTML
  Parameters: {"project"=>{"19"=>"0", "20"=>"0", "21"=>"5000", "31"=>"999", "32"=>"0"}, "project_rank"=>{"19"=>"0", "20"=>"0", "21"=>"0", "31"=>"0", "32"=>"0"}, "authenticity_token"=>"/7acj00VdcCCj9QjwTJZsPln1Db73vA3lGQEzkq4DnBexJtYupKdCWoPzFrSNVHQh1fMVfKvVR5MV6G2AtVg7w==", "election_slug"=>"testing-mes"}
  [1m[35m (16.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/submit_knapsack', 'POST', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 13 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mVoteKnapsack Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `vote_knapsacks` WHERE `vote_knapsacks`.`voter_id` = 13 LIMIT 1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProject Load (1.2ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Create (1.0ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (13, 21, 5000, '2024-03-25 00:06:43', '2024-03-25 00:06:43')[0m
  [1m[36mVoteKnapsack Create (0.9ms)[0m  [1m[32mINSERT INTO `vote_knapsacks` (`voter_id`, `project_id`, `cost`, `created_at`, `updated_at`) VALUES (13, 31, 999, '2024-03-25 00:06:43', '2024-03-25 00:06:43')[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/testing-mes/thanks
Completed 302 Found in 66ms (ActiveRecord: 29.8ms | Allocations: 4909)


Started GET "/testing-mes/thanks" for ::1 at 2024-03-24 20:06:43 -0400
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 13 LIMIT 1[0m
  [1m[36mElection Load (1.0ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`stage` = 'thanks', `voters`.`updated_at` = '2024-03-25 00:06:43' WHERE `voters`.`id` = 13[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'aef3e94d8b28f44073d306532599204b' AND `voters`.`id` != 13 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.2ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711325197,\"thanks\":1711325203}}' WHERE `voters`.`id` = 13[0m
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 1.8ms | Allocations: 119)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 3.8ms | Allocations: 315)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9bc3198de8>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.1ms | Allocations: 3638)
Completed 200 OK in 69ms (Views: 25.6ms | ActiveRecord: 18.5ms | Allocations: 5740)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:06:47 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (15.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:06:47', '2024-03-25 00:06:47')[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.8ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.2ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 31[0m
  [1m[36mVoteKnapsack Pluck (0.8ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 32[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.3ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.0ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.4ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.8ms | Allocations: 1679)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc32dad28>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 24.7ms | Allocations: 4875)
Completed 200 OK in 125ms (Views: 27.3ms | ActiveRecord: 38.0ms | Allocations: 12421)


Started GET "/testing-mes/thanks" for ::1 at 2024-03-24 20:07:15 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by VoteController#thanks as HTML
  Parameters: {"election_slug"=>"testing-mes"}
  [1m[35m (12.8ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/testing-mes/knapsack', 'http://localhost:3000/testing-mes/thanks', 'GET', NOW())[0m
  [1m[36mElection Load (0.7ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`slug` = 'testing-mes' LIMIT 1[0m
  [1m[36mVoter Load (0.9ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`id` = 13 LIMIT 1[0m
  [1m[36mElection Load (1.2ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mVoter Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voters` WHERE `voters`.`authentication_id` = 'aef3e94d8b28f44073d306532599204b' AND `voters`.`id` != 13 AND `voters`.`election_id` = 2 AND `voters`.`authentication_method` = 'free' LIMIT 1[0m
  [1m[36mVoter Update (1.3ms)[0m  [1m[33mUPDATE `voters` SET `voters`.`data` = '{\"freeform_text\":\"22101\",\"timestamps\":{\"knapsack\":1711325197,\"thanks\":1711325235}}', `voters`.`updated_at` = '2024-03-25 00:07:15' WHERE `voters`.`id` = 13[0m
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  Rendering layout layouts/application.html.erb
  Rendering vote/thanks.html.erb within layouts/application
  Rendered shared/_timer.html.erb (Duration: 0.7ms | Allocations: 124)
  Rendered vote/thanks.html.erb within layouts/application (Duration: 6.0ms | Allocations: 1970)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
[31mUnpermitted parameter: :election_slug. Context: { controller: VoteController, action: thanks, request: #<ActionDispatch::Request:0x00007f9c10095660>, params: {"controller"=>"vote", "action"=>"thanks", "election_slug"=>"testing-mes"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 58.1ms | Allocations: 9904)
Completed 200 OK in 183ms (Views: 53.1ms | ActiveRecord: 48.0ms | Allocations: 29803)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:07:17 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (4.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (1.1ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (1.1ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:07:17', '2024-03-25 00:07:17')[0m
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (1.1ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (1.2ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (1.1ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mProject Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.1ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 31[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 32[0m
  [1m[36mProject Load (1.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.2ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 1.2ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 8.6ms | Allocations: 1782)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c122fcfa0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 27.8ms | Allocations: 5049)
Completed 200 OK in 311ms (Views: 32.4ms | ActiveRecord: 71.6ms | Allocations: 46967)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:09:01 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:09:01', '2024-03-25 00:09:01')[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 31[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 32[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.8ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 0.8ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 5.3ms | Allocations: 3341)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc2fb8f28>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | Allocations: 6638)
Completed 200 OK in 170ms (Views: 15.4ms | ActiveRecord: 39.8ms | Allocations: 68424)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:09:17 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:09:18', '2024-03-25 00:09:18')[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 19[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 20[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 21[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 31[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` WHERE `vote_knapsacks`.`project_id` = 32[0m
  [1m[36mProject Load (0.6ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.5ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 5.1ms | Allocations: 3347)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c06378>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | Allocations: 6644)
Completed 200 OK in 169ms (Views: 15.2ms | ActiveRecord: 37.8ms | Allocations: 68383)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:14:32 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/voters', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.4ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:14:33', '2024-03-25 00:14:33')[0m
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.6ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Pluck (0.5ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 31 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.3ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 32 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.4ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 4.2ms | Allocations: 3353)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9c10c2b600>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 10.4ms | Allocations: 6650)
Completed 200 OK in 160ms (Views: 12.0ms | ActiveRecord: 22.3ms | Allocations: 66984)


Started GET "/admin/elections/2/locations" for ::1 at 2024-03-24 20:14:37 -0400
Processing by Admin::LocationsController#index as HTML
  Parameters: {"election_id"=>"2"}
  [1m[35m (3.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/analytics', 'http://localhost:3000/admin/elections/2/locations', 'GET', NOW())[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.9ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/locations/index.html.erb within layouts/application
  [1m[36mLocation Load (2.0ms)[0m  [1m[34mSELECT `locations`.* FROM `locations` WHERE `locations`.`election_id` = 2 ORDER BY `locations`.`name` ASC[0m
  Rendered shared/_admin_template.html.erb (Duration: 1.0ms | Allocations: 305)
  Rendered admin/locations/index.html.erb within layouts/application (Duration: 68.6ms | Allocations: 857)
[31mUnpermitted parameter: :election_id. Context: { controller: Admin::LocationsController, action: index, request: #<ActionDispatch::Request:0x00007f9bc3203850>, params: {"controller"=>"admin/locations", "action"=>"index", "election_id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 86.1ms | Allocations: 4122)
Completed 200 OK in 112ms (Views: 89.2ms | ActiveRecord: 10.4ms | Allocations: 6308)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:14:39 -0400
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (13.2ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/locations', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.5ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.6ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:14:39', '2024-03-25 00:14:39')[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.7ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.9ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.8ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.7ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (1.0ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (0.9ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mProject Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (1.6ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (1.0ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Pluck (1.1ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (1.0ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 31 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.9ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 32 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (1.4ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (1.4ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 1.1ms | Allocations: 295)
  Rendered shared/_admin_template.html.erb (Duration: 1.1ms | Allocations: 280)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 7.9ms | Allocations: 1679)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3518ea0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 26.0ms | Allocations: 4876)
Completed 200 OK in 137ms (Views: 28.3ms | ActiveRecord: 37.1ms | Allocations: 13819)


Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:18:31 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
  
SyntaxError (/home/liana/stanford/cs366/pb-mysql/app/controllers/admin/elections_controller.rb:1241: syntax error, unexpected end-of-input):
  
app/controllers/admin/elections_controller.rb:1241: syntax error, unexpected end-of-input
app/controllers/admin/elections_controller.rb:1241: syntax error, unexpected end-of-input
app/controllers/admin/elections_controller.rb:1241: syntax error, unexpected end-of-input
Started GET "/admin/elections/2/analytics" for ::1 at 2024-03-24 20:19:13 -0400
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:88)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:89)
DEPRECATION WARNING: Using a dynamic :action segment in a route is deprecated and will be removed in Rails 7.1. (called from block in <main> at /home/liana/stanford/cs366/pb-mysql/config/routes.rb:90)
Processing by Admin::ElectionsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO visitors (ip_address, user_agent, referrer, url, method, created_at) VALUES ('::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', 'http://localhost:3000/admin/elections/2/locations', 'http://localhost:3000/admin/elections/2/analytics', 'GET', NOW())[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1[0m
  [1m[36mElection Load (0.4ms)[0m  [1m[34mSELECT `elections`.* FROM `elections` WHERE `elections`.`id` = 2 LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActivityLog Create (0.3ms)[0m  [1m[32mINSERT INTO `activity_logs` (`user_id`, `activity`, `note`, `ip_address`, `user_agent`, `created_at`, `updated_at`) VALUES (1, 'analytics', '2', '::1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36', '2024-03-25 00:19:13', '2024-03-25 00:19:13')[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.* FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) LIMIT 1[0m
  [1m[36mProject Load (0.4ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 19[0m
  [1m[36mProject::Translation Load (0.5ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 20[0m
  [1m[36mProject::Translation Load (0.4ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 21[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 31[0m
  [1m[36mProject::Translation Load (0.3ms)[0m  [1m[34mSELECT `project_translations`.* FROM `project_translations` WHERE `project_translations`.`project_id` = 32[0m
  [1m[36mProject Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 AND (external_vote_count > 0) LIMIT 1[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(created_at, '+00:00', '-12:00')) AS date, authentication_method, location_id, COUNT(*) AS vote_count FROM `voters` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) AND `voters`.`stage` != 'knapsack' GROUP BY `date`, `voters`.`authentication_method`, `voters`.`location_id`[0m
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `categories` WHERE `categories`.`election_id` = 2 LIMIT 1[0m
  [1m[36mVoter Load (0.4ms)[0m  [1m[34mSELECT `voters`.`id`, `voters`.`stage` FROM `voters` WHERE `voters`.`election_id` = 2 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `projects` WHERE `projects`.`election_id` = 2 LIMIT 1[0m
  [1m[36mCACHE Project Load (0.0ms)[0m  [1m[34mSELECT `projects`.`id`, `projects`.`election_id`, `projects`.`category_id`, `projects`.`number`, `projects`.`cost`, `projects`.`map_geometry`, `projects`.`image`, `projects`.`external_vote_count`, `projects`.`sort_order`, `projects`.`data`, `projects`.`created_at`, `projects`.`updated_at`, `projects`.`adjustable_cost`, `projects`.`cost_min`, `projects`.`cost_step`, `projects`.`uses_slider` FROM `projects` WHERE `projects`.`election_id` = 2[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 19 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 20 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 21 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 31 AND `voters`.`void` = FALSE[0m
  [1m[36mVoteKnapsack Pluck (0.4ms)[0m  [1m[34mSELECT `vote_knapsacks`.`voter_id` FROM `vote_knapsacks` INNER JOIN `voters` ON `voters`.`id` = `vote_knapsacks`.`voter_id` WHERE `vote_knapsacks`.`project_id` = 32 AND `voters`.`void` = FALSE[0m
  [1m[36mProject Load (0.5ms)[0m  [1m[34mSELECT projects.id, vote_knapsacks.cost AS knapsack_cost, COUNT(voters.id) AS vote_count FROM `projects` LEFT OUTER JOIN vote_knapsacks ON vote_knapsacks.project_id = projects.id LEFT OUTER JOIN voters ON voters.id = vote_knapsacks.voter_id AND voters.void = 0 WHERE `projects`.`election_id` = 2 GROUP BY projects.id, vote_knapsacks.cost ORDER BY vote_count DESC, projects.sort_order[0m
  [1m[36mVoter Load (0.5ms)[0m  [1m[34mSELECT DATE(CONVERT_TZ(voters.created_at, '+00:00', '-12:00')) AS date, COUNT(DISTINCT voters.id) AS vote_count FROM `voters` INNER JOIN `vote_knapsacks` ON `vote_knapsacks`.`voter_id` = `voters`.`id` WHERE `voters`.`election_id` = 2 AND (void = 0 AND stage IS NOT NULL) GROUP BY `date`[0m
  [1m[36mVoterRegistrationRecord Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM `voter_registration_records` WHERE `voter_registration_records`.`election_id` = 2 LIMIT 1[0m
  Rendering layout layouts/application.html.erb
  Rendering admin/elections/analytics.html.erb within layouts/application
  Rendered shared/analytics/_knapsack.html.erb (Duration: 0.4ms | Allocations: 302)
  Rendered shared/_admin_template.html.erb (Duration: 0.4ms | Allocations: 309)
  Rendered admin/elections/analytics.html.erb within layouts/application (Duration: 4.0ms | Allocations: 3365)
[31mUnpermitted parameter: :id. Context: { controller: Admin::ElectionsController, action: analytics, request: #<ActionDispatch::Request:0x00007f9bc3523df0>, params: {"controller"=>"admin/elections", "action"=>"analytics", "id"=>"2"} }[0m
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | Allocations: 6663)
Completed 200 OK in 162ms (Views: 20.8ms | ActiveRecord: 36.2ms | Allocations: 70417)


